{"version":3,"file":"svg2roughjs.umd.min.js","sources":["../node_modules/hachure-fill/bin/hachure.js","../node_modules/roughjs/bin/fillers/scan-line-hachure.js","../node_modules/roughjs/bin/fillers/hachure-filler.js","../node_modules/roughjs/bin/geometry.js","../node_modules/roughjs/bin/fillers/zigzag-filler.js","../node_modules/roughjs/bin/fillers/hatch-filler.js","../node_modules/roughjs/bin/fillers/dot-filler.js","../node_modules/roughjs/bin/fillers/dashed-filler.js","../node_modules/roughjs/bin/fillers/zigzag-line-filler.js","../node_modules/roughjs/bin/fillers/filler.js","../node_modules/roughjs/bin/math.js","../node_modules/path-data-parser/lib/parser.js","../node_modules/path-data-parser/lib/absolutize.js","../node_modules/path-data-parser/lib/normalize.js","../node_modules/roughjs/bin/renderer.js","../node_modules/points-on-curve/lib/curve-to-bezier.js","../node_modules/points-on-curve/lib/index.js","../node_modules/roughjs/bin/generator.js","../node_modules/points-on-path/lib/index.js","../node_modules/roughjs/bin/canvas.js","../node_modules/roughjs/bin/core.js","../node_modules/roughjs/bin/svg.js","../node_modules/roughjs/bin/rough.js","../out-tsc/OutputType.js","../out-tsc/dom-helpers.js","../out-tsc/utils.js","../out-tsc/styles/effective-attributes.js","../out-tsc/styles/pattern.js","../node_modules/tinycolor2/esm/tinycolor.js","../out-tsc/svg-units.js","../out-tsc/transformation.js","../out-tsc/styles/colors.js","../out-tsc/styles/pens.js","../out-tsc/styles/styles.js","../out-tsc/geom/primitives.js","../node_modules/svg-pathdata/lib/SVGPathData.module.js","../out-tsc/geom/marker.js","../out-tsc/geom/rect.js","../out-tsc/clipping.js","../out-tsc/geom/circle.js","../out-tsc/geom/ellipse.js","../out-tsc/geom/polygon.js","../out-tsc/geom/path.js","../out-tsc/geom/text.js","../out-tsc/processor.js","../out-tsc/geom/use.js","../out-tsc/geom/line.js","../out-tsc/geom/polyline.js","../out-tsc/geom/image.js","../out-tsc/geom/foreign-object.js","../out-tsc/RandomNumberGenerator.js","../out-tsc/Svg2Roughjs.js","../out-tsc/styles/textures.js"],"sourcesContent":["function rotatePoints(points, center, degrees) {\n    if (points && points.length) {\n        const [cx, cy] = center;\n        const angle = (Math.PI / 180) * degrees;\n        const cos = Math.cos(angle);\n        const sin = Math.sin(angle);\n        for (const p of points) {\n            const [x, y] = p;\n            p[0] = ((x - cx) * cos) - ((y - cy) * sin) + cx;\n            p[1] = ((x - cx) * sin) + ((y - cy) * cos) + cy;\n        }\n    }\n}\nfunction rotateLines(lines, center, degrees) {\n    const points = [];\n    lines.forEach((line) => points.push(...line));\n    rotatePoints(points, center, degrees);\n}\nfunction areSamePoints(p1, p2) {\n    return p1[0] === p2[0] && p1[1] === p2[1];\n}\nexport function hachureLines(polygons, hachureGap, hachureAngle, hachureStepOffset = 1) {\n    const angle = hachureAngle;\n    const gap = Math.max(hachureGap, 0.1);\n    const polygonList = (polygons[0] && polygons[0][0] && (typeof polygons[0][0] === 'number')) ? [polygons] : polygons;\n    const rotationCenter = [0, 0];\n    if (angle) {\n        for (const polygon of polygonList) {\n            rotatePoints(polygon, rotationCenter, angle);\n        }\n    }\n    const lines = straightHachureLines(polygonList, gap, hachureStepOffset);\n    if (angle) {\n        for (const polygon of polygonList) {\n            rotatePoints(polygon, rotationCenter, -angle);\n        }\n        rotateLines(lines, rotationCenter, -angle);\n    }\n    return lines;\n}\nfunction straightHachureLines(polygons, gap, hachureStepOffset) {\n    const vertexArray = [];\n    for (const polygon of polygons) {\n        const vertices = [...polygon];\n        if (!areSamePoints(vertices[0], vertices[vertices.length - 1])) {\n            vertices.push([vertices[0][0], vertices[0][1]]);\n        }\n        if (vertices.length > 2) {\n            vertexArray.push(vertices);\n        }\n    }\n    const lines = [];\n    gap = Math.max(gap, 0.1);\n    // Create sorted edges table\n    const edges = [];\n    for (const vertices of vertexArray) {\n        for (let i = 0; i < vertices.length - 1; i++) {\n            const p1 = vertices[i];\n            const p2 = vertices[i + 1];\n            if (p1[1] !== p2[1]) {\n                const ymin = Math.min(p1[1], p2[1]);\n                edges.push({\n                    ymin,\n                    ymax: Math.max(p1[1], p2[1]),\n                    x: ymin === p1[1] ? p1[0] : p2[0],\n                    islope: (p2[0] - p1[0]) / (p2[1] - p1[1]),\n                });\n            }\n        }\n    }\n    edges.sort((e1, e2) => {\n        if (e1.ymin < e2.ymin) {\n            return -1;\n        }\n        if (e1.ymin > e2.ymin) {\n            return 1;\n        }\n        if (e1.x < e2.x) {\n            return -1;\n        }\n        if (e1.x > e2.x) {\n            return 1;\n        }\n        if (e1.ymax === e2.ymax) {\n            return 0;\n        }\n        return (e1.ymax - e2.ymax) / Math.abs((e1.ymax - e2.ymax));\n    });\n    if (!edges.length) {\n        return lines;\n    }\n    // Start scanning\n    let activeEdges = [];\n    let y = edges[0].ymin;\n    let iteration = 0;\n    while (activeEdges.length || edges.length) {\n        if (edges.length) {\n            let ix = -1;\n            for (let i = 0; i < edges.length; i++) {\n                if (edges[i].ymin > y) {\n                    break;\n                }\n                ix = i;\n            }\n            const removed = edges.splice(0, ix + 1);\n            removed.forEach((edge) => {\n                activeEdges.push({ s: y, edge });\n            });\n        }\n        activeEdges = activeEdges.filter((ae) => {\n            if (ae.edge.ymax <= y) {\n                return false;\n            }\n            return true;\n        });\n        activeEdges.sort((ae1, ae2) => {\n            if (ae1.edge.x === ae2.edge.x) {\n                return 0;\n            }\n            return (ae1.edge.x - ae2.edge.x) / Math.abs((ae1.edge.x - ae2.edge.x));\n        });\n        // fill between the edges\n        if ((hachureStepOffset !== 1) || (iteration % gap === 0)) {\n            if (activeEdges.length > 1) {\n                for (let i = 0; i < activeEdges.length; i = i + 2) {\n                    const nexti = i + 1;\n                    if (nexti >= activeEdges.length) {\n                        break;\n                    }\n                    const ce = activeEdges[i].edge;\n                    const ne = activeEdges[nexti].edge;\n                    lines.push([\n                        [Math.round(ce.x), y],\n                        [Math.round(ne.x), y],\n                    ]);\n                }\n            }\n        }\n        y += hachureStepOffset;\n        activeEdges.forEach((ae) => {\n            ae.edge.x = ae.edge.x + (hachureStepOffset * ae.edge.islope);\n        });\n        iteration++;\n    }\n    return lines;\n}\n","import { hachureLines } from 'hachure-fill';\nexport function polygonHachureLines(polygonList, o) {\n    var _a;\n    const angle = o.hachureAngle + 90;\n    let gap = o.hachureGap;\n    if (gap < 0) {\n        gap = o.strokeWidth * 4;\n    }\n    gap = Math.round(Math.max(gap, 0.1));\n    let skipOffset = 1;\n    if (o.roughness >= 1) {\n        if ((((_a = o.randomizer) === null || _a === void 0 ? void 0 : _a.next()) || Math.random()) > 0.7) {\n            skipOffset = gap;\n        }\n    }\n    return hachureLines(polygonList, gap, angle, skipOffset || 1);\n}\n","import { polygonHachureLines } from './scan-line-hachure';\nexport class HachureFiller {\n    constructor(helper) {\n        this.helper = helper;\n    }\n    fillPolygons(polygonList, o) {\n        return this._fillPolygons(polygonList, o);\n    }\n    _fillPolygons(polygonList, o) {\n        const lines = polygonHachureLines(polygonList, o);\n        const ops = this.renderLines(lines, o);\n        return { type: 'fillSketch', ops };\n    }\n    renderLines(lines, o) {\n        const ops = [];\n        for (const line of lines) {\n            ops.push(...this.helper.doubleLineOps(line[0][0], line[0][1], line[1][0], line[1][1], o));\n        }\n        return ops;\n    }\n}\n","export function lineLength(line) {\n    const p1 = line[0];\n    const p2 = line[1];\n    return Math.sqrt(Math.pow(p1[0] - p2[0], 2) + Math.pow(p1[1] - p2[1], 2));\n}\n","import { HachureFiller } from './hachure-filler';\nimport { polygonHachureLines } from './scan-line-hachure';\nimport { lineLength } from '../geometry';\nexport class ZigZagFiller extends HachureFiller {\n    fillPolygons(polygonList, o) {\n        let gap = o.hachureGap;\n        if (gap < 0) {\n            gap = o.strokeWidth * 4;\n        }\n        gap = Math.max(gap, 0.1);\n        const o2 = Object.assign({}, o, { hachureGap: gap });\n        const lines = polygonHachureLines(polygonList, o2);\n        const zigZagAngle = (Math.PI / 180) * o.hachureAngle;\n        const zigzagLines = [];\n        const dgx = gap * 0.5 * Math.cos(zigZagAngle);\n        const dgy = gap * 0.5 * Math.sin(zigZagAngle);\n        for (const [p1, p2] of lines) {\n            if (lineLength([p1, p2])) {\n                zigzagLines.push([\n                    [p1[0] - dgx, p1[1] + dgy],\n                    [...p2],\n                ], [\n                    [p1[0] + dgx, p1[1] - dgy],\n                    [...p2],\n                ]);\n            }\n        }\n        const ops = this.renderLines(zigzagLines, o);\n        return { type: 'fillSketch', ops };\n    }\n}\n","import { HachureFiller } from './hachure-filler';\nexport class HatchFiller extends HachureFiller {\n    fillPolygons(polygonList, o) {\n        const set = this._fillPolygons(polygonList, o);\n        const o2 = Object.assign({}, o, { hachureAngle: o.hachureAngle + 90 });\n        const set2 = this._fillPolygons(polygonList, o2);\n        set.ops = set.ops.concat(set2.ops);\n        return set;\n    }\n}\n","import { lineLength } from '../geometry';\nimport { polygonHachureLines } from './scan-line-hachure';\nexport class DotFiller {\n    constructor(helper) {\n        this.helper = helper;\n    }\n    fillPolygons(polygonList, o) {\n        o = Object.assign({}, o, { hachureAngle: 0 });\n        const lines = polygonHachureLines(polygonList, o);\n        return this.dotsOnLines(lines, o);\n    }\n    dotsOnLines(lines, o) {\n        const ops = [];\n        let gap = o.hachureGap;\n        if (gap < 0) {\n            gap = o.strokeWidth * 4;\n        }\n        gap = Math.max(gap, 0.1);\n        let fweight = o.fillWeight;\n        if (fweight < 0) {\n            fweight = o.strokeWidth / 2;\n        }\n        const ro = gap / 4;\n        for (const line of lines) {\n            const length = lineLength(line);\n            const dl = length / gap;\n            const count = Math.ceil(dl) - 1;\n            const offset = length - (count * gap);\n            const x = ((line[0][0] + line[1][0]) / 2) - (gap / 4);\n            const minY = Math.min(line[0][1], line[1][1]);\n            for (let i = 0; i < count; i++) {\n                const y = minY + offset + (i * gap);\n                const cx = (x - ro) + Math.random() * 2 * ro;\n                const cy = (y - ro) + Math.random() * 2 * ro;\n                const el = this.helper.ellipse(cx, cy, fweight, fweight, o);\n                ops.push(...el.ops);\n            }\n        }\n        return { type: 'fillSketch', ops };\n    }\n}\n","import { lineLength } from '../geometry';\nimport { polygonHachureLines } from './scan-line-hachure';\nexport class DashedFiller {\n    constructor(helper) {\n        this.helper = helper;\n    }\n    fillPolygons(polygonList, o) {\n        const lines = polygonHachureLines(polygonList, o);\n        return { type: 'fillSketch', ops: this.dashedLine(lines, o) };\n    }\n    dashedLine(lines, o) {\n        const offset = o.dashOffset < 0 ? (o.hachureGap < 0 ? (o.strokeWidth * 4) : o.hachureGap) : o.dashOffset;\n        const gap = o.dashGap < 0 ? (o.hachureGap < 0 ? (o.strokeWidth * 4) : o.hachureGap) : o.dashGap;\n        const ops = [];\n        lines.forEach((line) => {\n            const length = lineLength(line);\n            const count = Math.floor(length / (offset + gap));\n            const startOffset = (length + gap - (count * (offset + gap))) / 2;\n            let p1 = line[0];\n            let p2 = line[1];\n            if (p1[0] > p2[0]) {\n                p1 = line[1];\n                p2 = line[0];\n            }\n            const alpha = Math.atan((p2[1] - p1[1]) / (p2[0] - p1[0]));\n            for (let i = 0; i < count; i++) {\n                const lstart = i * (offset + gap);\n                const lend = lstart + offset;\n                const start = [p1[0] + (lstart * Math.cos(alpha)) + (startOffset * Math.cos(alpha)), p1[1] + lstart * Math.sin(alpha) + (startOffset * Math.sin(alpha))];\n                const end = [p1[0] + (lend * Math.cos(alpha)) + (startOffset * Math.cos(alpha)), p1[1] + (lend * Math.sin(alpha)) + (startOffset * Math.sin(alpha))];\n                ops.push(...this.helper.doubleLineOps(start[0], start[1], end[0], end[1], o));\n            }\n        });\n        return ops;\n    }\n}\n","import { lineLength } from '../geometry';\nimport { polygonHachureLines } from './scan-line-hachure';\nexport class ZigZagLineFiller {\n    constructor(helper) {\n        this.helper = helper;\n    }\n    fillPolygons(polygonList, o) {\n        const gap = o.hachureGap < 0 ? (o.strokeWidth * 4) : o.hachureGap;\n        const zo = o.zigzagOffset < 0 ? gap : o.zigzagOffset;\n        o = Object.assign({}, o, { hachureGap: gap + zo });\n        const lines = polygonHachureLines(polygonList, o);\n        return { type: 'fillSketch', ops: this.zigzagLines(lines, zo, o) };\n    }\n    zigzagLines(lines, zo, o) {\n        const ops = [];\n        lines.forEach((line) => {\n            const length = lineLength(line);\n            const count = Math.round(length / (2 * zo));\n            let p1 = line[0];\n            let p2 = line[1];\n            if (p1[0] > p2[0]) {\n                p1 = line[1];\n                p2 = line[0];\n            }\n            const alpha = Math.atan((p2[1] - p1[1]) / (p2[0] - p1[0]));\n            for (let i = 0; i < count; i++) {\n                const lstart = i * 2 * zo;\n                const lend = (i + 1) * 2 * zo;\n                const dz = Math.sqrt(2 * Math.pow(zo, 2));\n                const start = [p1[0] + (lstart * Math.cos(alpha)), p1[1] + lstart * Math.sin(alpha)];\n                const end = [p1[0] + (lend * Math.cos(alpha)), p1[1] + (lend * Math.sin(alpha))];\n                const middle = [start[0] + dz * Math.cos(alpha + Math.PI / 4), start[1] + dz * Math.sin(alpha + Math.PI / 4)];\n                ops.push(...this.helper.doubleLineOps(start[0], start[1], middle[0], middle[1], o), ...this.helper.doubleLineOps(middle[0], middle[1], end[0], end[1], o));\n            }\n        });\n        return ops;\n    }\n}\n","import { HachureFiller } from './hachure-filler';\nimport { ZigZagFiller } from './zigzag-filler';\nimport { HatchFiller } from './hatch-filler';\nimport { DotFiller } from './dot-filler';\nimport { DashedFiller } from './dashed-filler';\nimport { ZigZagLineFiller } from './zigzag-line-filler';\nconst fillers = {};\nexport function getFiller(o, helper) {\n    let fillerName = o.fillStyle || 'hachure';\n    if (!fillers[fillerName]) {\n        switch (fillerName) {\n            case 'zigzag':\n                if (!fillers[fillerName]) {\n                    fillers[fillerName] = new ZigZagFiller(helper);\n                }\n                break;\n            case 'cross-hatch':\n                if (!fillers[fillerName]) {\n                    fillers[fillerName] = new HatchFiller(helper);\n                }\n                break;\n            case 'dots':\n                if (!fillers[fillerName]) {\n                    fillers[fillerName] = new DotFiller(helper);\n                }\n                break;\n            case 'dashed':\n                if (!fillers[fillerName]) {\n                    fillers[fillerName] = new DashedFiller(helper);\n                }\n                break;\n            case 'zigzag-line':\n                if (!fillers[fillerName]) {\n                    fillers[fillerName] = new ZigZagLineFiller(helper);\n                }\n                break;\n            case 'hachure':\n            default:\n                fillerName = 'hachure';\n                if (!fillers[fillerName]) {\n                    fillers[fillerName] = new HachureFiller(helper);\n                }\n                break;\n        }\n    }\n    return fillers[fillerName];\n}\n","export function randomSeed() {\n    return Math.floor(Math.random() * 2 ** 31);\n}\nexport class Random {\n    constructor(seed) {\n        this.seed = seed;\n    }\n    next() {\n        if (this.seed) {\n            return ((2 ** 31 - 1) & (this.seed = Math.imul(48271, this.seed))) / 2 ** 31;\n        }\n        else {\n            return Math.random();\n        }\n    }\n}\n","const COMMAND = 0;\nconst NUMBER = 1;\nconst EOD = 2;\nconst PARAMS = { A: 7, a: 7, C: 6, c: 6, H: 1, h: 1, L: 2, l: 2, M: 2, m: 2, Q: 4, q: 4, S: 4, s: 4, T: 2, t: 2, V: 1, v: 1, Z: 0, z: 0 };\nfunction tokenize(d) {\n    const tokens = new Array();\n    while (d !== '') {\n        if (d.match(/^([ \\t\\r\\n,]+)/)) {\n            d = d.substr(RegExp.$1.length);\n        }\n        else if (d.match(/^([aAcChHlLmMqQsStTvVzZ])/)) {\n            tokens[tokens.length] = { type: COMMAND, text: RegExp.$1 };\n            d = d.substr(RegExp.$1.length);\n        }\n        else if (d.match(/^(([-+]?[0-9]+(\\.[0-9]*)?|[-+]?\\.[0-9]+)([eE][-+]?[0-9]+)?)/)) {\n            tokens[tokens.length] = { type: NUMBER, text: `${parseFloat(RegExp.$1)}` };\n            d = d.substr(RegExp.$1.length);\n        }\n        else {\n            return [];\n        }\n    }\n    tokens[tokens.length] = { type: EOD, text: '' };\n    return tokens;\n}\nfunction isType(token, type) {\n    return token.type === type;\n}\nexport function parsePath(d) {\n    const segments = [];\n    const tokens = tokenize(d);\n    let mode = 'BOD';\n    let index = 0;\n    let token = tokens[index];\n    while (!isType(token, EOD)) {\n        let paramsCount = 0;\n        const params = [];\n        if (mode === 'BOD') {\n            if (token.text === 'M' || token.text === 'm') {\n                index++;\n                paramsCount = PARAMS[token.text];\n                mode = token.text;\n            }\n            else {\n                return parsePath('M0,0' + d);\n            }\n        }\n        else if (isType(token, NUMBER)) {\n            paramsCount = PARAMS[mode];\n        }\n        else {\n            index++;\n            paramsCount = PARAMS[token.text];\n            mode = token.text;\n        }\n        if ((index + paramsCount) < tokens.length) {\n            for (let i = index; i < index + paramsCount; i++) {\n                const numbeToken = tokens[i];\n                if (isType(numbeToken, NUMBER)) {\n                    params[params.length] = +numbeToken.text;\n                }\n                else {\n                    throw new Error('Param not a number: ' + mode + ',' + numbeToken.text);\n                }\n            }\n            if (typeof PARAMS[mode] === 'number') {\n                const segment = { key: mode, data: params };\n                segments.push(segment);\n                index += paramsCount;\n                token = tokens[index];\n                if (mode === 'M')\n                    mode = 'L';\n                if (mode === 'm')\n                    mode = 'l';\n            }\n            else {\n                throw new Error('Bad segment: ' + mode);\n            }\n        }\n        else {\n            throw new Error('Path data ended short');\n        }\n    }\n    return segments;\n}\nexport function serialize(segments) {\n    const tokens = [];\n    for (const { key, data } of segments) {\n        tokens.push(key);\n        switch (key) {\n            case 'C':\n            case 'c':\n                tokens.push(data[0], `${data[1]},`, data[2], `${data[3]},`, data[4], data[5]);\n                break;\n            case 'S':\n            case 's':\n            case 'Q':\n            case 'q':\n                tokens.push(data[0], `${data[1]},`, data[2], data[3]);\n                break;\n            default:\n                tokens.push(...data);\n                break;\n        }\n    }\n    return tokens.join(' ');\n}\n","// Translate relative commands to absolute commands\nexport function absolutize(segments) {\n    let cx = 0, cy = 0;\n    let subx = 0, suby = 0;\n    const out = [];\n    for (const { key, data } of segments) {\n        switch (key) {\n            case 'M':\n                out.push({ key: 'M', data: [...data] });\n                [cx, cy] = data;\n                [subx, suby] = data;\n                break;\n            case 'm':\n                cx += data[0];\n                cy += data[1];\n                out.push({ key: 'M', data: [cx, cy] });\n                subx = cx;\n                suby = cy;\n                break;\n            case 'L':\n                out.push({ key: 'L', data: [...data] });\n                [cx, cy] = data;\n                break;\n            case 'l':\n                cx += data[0];\n                cy += data[1];\n                out.push({ key: 'L', data: [cx, cy] });\n                break;\n            case 'C':\n                out.push({ key: 'C', data: [...data] });\n                cx = data[4];\n                cy = data[5];\n                break;\n            case 'c': {\n                const newdata = data.map((d, i) => (i % 2) ? (d + cy) : (d + cx));\n                out.push({ key: 'C', data: newdata });\n                cx = newdata[4];\n                cy = newdata[5];\n                break;\n            }\n            case 'Q':\n                out.push({ key: 'Q', data: [...data] });\n                cx = data[2];\n                cy = data[3];\n                break;\n            case 'q': {\n                const newdata = data.map((d, i) => (i % 2) ? (d + cy) : (d + cx));\n                out.push({ key: 'Q', data: newdata });\n                cx = newdata[2];\n                cy = newdata[3];\n                break;\n            }\n            case 'A':\n                out.push({ key: 'A', data: [...data] });\n                cx = data[5];\n                cy = data[6];\n                break;\n            case 'a':\n                cx += data[5];\n                cy += data[6];\n                out.push({ key: 'A', data: [data[0], data[1], data[2], data[3], data[4], cx, cy] });\n                break;\n            case 'H':\n                out.push({ key: 'H', data: [...data] });\n                cx = data[0];\n                break;\n            case 'h':\n                cx += data[0];\n                out.push({ key: 'H', data: [cx] });\n                break;\n            case 'V':\n                out.push({ key: 'V', data: [...data] });\n                cy = data[0];\n                break;\n            case 'v':\n                cy += data[0];\n                out.push({ key: 'V', data: [cy] });\n                break;\n            case 'S':\n                out.push({ key: 'S', data: [...data] });\n                cx = data[2];\n                cy = data[3];\n                break;\n            case 's': {\n                const newdata = data.map((d, i) => (i % 2) ? (d + cy) : (d + cx));\n                out.push({ key: 'S', data: newdata });\n                cx = newdata[2];\n                cy = newdata[3];\n                break;\n            }\n            case 'T':\n                out.push({ key: 'T', data: [...data] });\n                cx = data[0];\n                cy = data[1];\n                break;\n            case 't':\n                cx += data[0];\n                cy += data[1];\n                out.push({ key: 'T', data: [cx, cy] });\n                break;\n            case 'Z':\n            case 'z':\n                out.push({ key: 'Z', data: [] });\n                cx = subx;\n                cy = suby;\n                break;\n        }\n    }\n    return out;\n}\n","// Normalize path to include only M, L, C, and Z commands\nexport function normalize(segments) {\n    const out = [];\n    let lastType = '';\n    let cx = 0, cy = 0;\n    let subx = 0, suby = 0;\n    let lcx = 0, lcy = 0;\n    for (const { key, data } of segments) {\n        switch (key) {\n            case 'M':\n                out.push({ key: 'M', data: [...data] });\n                [cx, cy] = data;\n                [subx, suby] = data;\n                break;\n            case 'C':\n                out.push({ key: 'C', data: [...data] });\n                cx = data[4];\n                cy = data[5];\n                lcx = data[2];\n                lcy = data[3];\n                break;\n            case 'L':\n                out.push({ key: 'L', data: [...data] });\n                [cx, cy] = data;\n                break;\n            case 'H':\n                cx = data[0];\n                out.push({ key: 'L', data: [cx, cy] });\n                break;\n            case 'V':\n                cy = data[0];\n                out.push({ key: 'L', data: [cx, cy] });\n                break;\n            case 'S': {\n                let cx1 = 0, cy1 = 0;\n                if (lastType === 'C' || lastType === 'S') {\n                    cx1 = cx + (cx - lcx);\n                    cy1 = cy + (cy - lcy);\n                }\n                else {\n                    cx1 = cx;\n                    cy1 = cy;\n                }\n                out.push({ key: 'C', data: [cx1, cy1, ...data] });\n                lcx = data[0];\n                lcy = data[1];\n                cx = data[2];\n                cy = data[3];\n                break;\n            }\n            case 'T': {\n                const [x, y] = data;\n                let x1 = 0, y1 = 0;\n                if (lastType === 'Q' || lastType === 'T') {\n                    x1 = cx + (cx - lcx);\n                    y1 = cy + (cy - lcy);\n                }\n                else {\n                    x1 = cx;\n                    y1 = cy;\n                }\n                const cx1 = cx + 2 * (x1 - cx) / 3;\n                const cy1 = cy + 2 * (y1 - cy) / 3;\n                const cx2 = x + 2 * (x1 - x) / 3;\n                const cy2 = y + 2 * (y1 - y) / 3;\n                out.push({ key: 'C', data: [cx1, cy1, cx2, cy2, x, y] });\n                lcx = x1;\n                lcy = y1;\n                cx = x;\n                cy = y;\n                break;\n            }\n            case 'Q': {\n                const [x1, y1, x, y] = data;\n                const cx1 = cx + 2 * (x1 - cx) / 3;\n                const cy1 = cy + 2 * (y1 - cy) / 3;\n                const cx2 = x + 2 * (x1 - x) / 3;\n                const cy2 = y + 2 * (y1 - y) / 3;\n                out.push({ key: 'C', data: [cx1, cy1, cx2, cy2, x, y] });\n                lcx = x1;\n                lcy = y1;\n                cx = x;\n                cy = y;\n                break;\n            }\n            case 'A': {\n                const r1 = Math.abs(data[0]);\n                const r2 = Math.abs(data[1]);\n                const angle = data[2];\n                const largeArcFlag = data[3];\n                const sweepFlag = data[4];\n                const x = data[5];\n                const y = data[6];\n                if (r1 === 0 || r2 === 0) {\n                    out.push({ key: 'C', data: [cx, cy, x, y, x, y] });\n                    cx = x;\n                    cy = y;\n                }\n                else {\n                    if (cx !== x || cy !== y) {\n                        const curves = arcToCubicCurves(cx, cy, x, y, r1, r2, angle, largeArcFlag, sweepFlag);\n                        curves.forEach(function (curve) {\n                            out.push({ key: 'C', data: curve });\n                        });\n                        cx = x;\n                        cy = y;\n                    }\n                }\n                break;\n            }\n            case 'Z':\n                out.push({ key: 'Z', data: [] });\n                cx = subx;\n                cy = suby;\n                break;\n        }\n        lastType = key;\n    }\n    return out;\n}\nfunction degToRad(degrees) {\n    return (Math.PI * degrees) / 180;\n}\nfunction rotate(x, y, angleRad) {\n    const X = x * Math.cos(angleRad) - y * Math.sin(angleRad);\n    const Y = x * Math.sin(angleRad) + y * Math.cos(angleRad);\n    return [X, Y];\n}\nfunction arcToCubicCurves(x1, y1, x2, y2, r1, r2, angle, largeArcFlag, sweepFlag, recursive) {\n    const angleRad = degToRad(angle);\n    let params = [];\n    let f1 = 0, f2 = 0, cx = 0, cy = 0;\n    if (recursive) {\n        [f1, f2, cx, cy] = recursive;\n    }\n    else {\n        [x1, y1] = rotate(x1, y1, -angleRad);\n        [x2, y2] = rotate(x2, y2, -angleRad);\n        const x = (x1 - x2) / 2;\n        const y = (y1 - y2) / 2;\n        let h = (x * x) / (r1 * r1) + (y * y) / (r2 * r2);\n        if (h > 1) {\n            h = Math.sqrt(h);\n            r1 = h * r1;\n            r2 = h * r2;\n        }\n        const sign = (largeArcFlag === sweepFlag) ? -1 : 1;\n        const r1Pow = r1 * r1;\n        const r2Pow = r2 * r2;\n        const left = r1Pow * r2Pow - r1Pow * y * y - r2Pow * x * x;\n        const right = r1Pow * y * y + r2Pow * x * x;\n        const k = sign * Math.sqrt(Math.abs(left / right));\n        cx = k * r1 * y / r2 + (x1 + x2) / 2;\n        cy = k * -r2 * x / r1 + (y1 + y2) / 2;\n        f1 = Math.asin(parseFloat(((y1 - cy) / r2).toFixed(9)));\n        f2 = Math.asin(parseFloat(((y2 - cy) / r2).toFixed(9)));\n        if (x1 < cx) {\n            f1 = Math.PI - f1;\n        }\n        if (x2 < cx) {\n            f2 = Math.PI - f2;\n        }\n        if (f1 < 0) {\n            f1 = Math.PI * 2 + f1;\n        }\n        if (f2 < 0) {\n            f2 = Math.PI * 2 + f2;\n        }\n        if (sweepFlag && f1 > f2) {\n            f1 = f1 - Math.PI * 2;\n        }\n        if (!sweepFlag && f2 > f1) {\n            f2 = f2 - Math.PI * 2;\n        }\n    }\n    let df = f2 - f1;\n    if (Math.abs(df) > (Math.PI * 120 / 180)) {\n        const f2old = f2;\n        const x2old = x2;\n        const y2old = y2;\n        if (sweepFlag && f2 > f1) {\n            f2 = f1 + (Math.PI * 120 / 180) * (1);\n        }\n        else {\n            f2 = f1 + (Math.PI * 120 / 180) * (-1);\n        }\n        x2 = cx + r1 * Math.cos(f2);\n        y2 = cy + r2 * Math.sin(f2);\n        params = arcToCubicCurves(x2, y2, x2old, y2old, r1, r2, angle, 0, sweepFlag, [f2, f2old, cx, cy]);\n    }\n    df = f2 - f1;\n    const c1 = Math.cos(f1);\n    const s1 = Math.sin(f1);\n    const c2 = Math.cos(f2);\n    const s2 = Math.sin(f2);\n    const t = Math.tan(df / 4);\n    const hx = 4 / 3 * r1 * t;\n    const hy = 4 / 3 * r2 * t;\n    const m1 = [x1, y1];\n    const m2 = [x1 + hx * s1, y1 - hy * c1];\n    const m3 = [x2 + hx * s2, y2 - hy * c2];\n    const m4 = [x2, y2];\n    m2[0] = 2 * m1[0] - m2[0];\n    m2[1] = 2 * m1[1] - m2[1];\n    if (recursive) {\n        return [m2, m3, m4].concat(params);\n    }\n    else {\n        params = [m2, m3, m4].concat(params);\n        const curves = [];\n        for (let i = 0; i < params.length; i += 3) {\n            const r1 = rotate(params[i][0], params[i][1], angleRad);\n            const r2 = rotate(params[i + 1][0], params[i + 1][1], angleRad);\n            const r3 = rotate(params[i + 2][0], params[i + 2][1], angleRad);\n            curves.push([r1[0], r1[1], r2[0], r2[1], r3[0], r3[1]]);\n        }\n        return curves;\n    }\n}\n","import { getFiller } from './fillers/filler.js';\nimport { Random } from './math.js';\nimport { parsePath, normalize, absolutize } from 'path-data-parser';\nconst helper = {\n    randOffset,\n    randOffsetWithRange,\n    ellipse,\n    doubleLineOps: doubleLineFillOps,\n};\nexport function line(x1, y1, x2, y2, o) {\n    return { type: 'path', ops: _doubleLine(x1, y1, x2, y2, o) };\n}\nexport function linearPath(points, close, o) {\n    const len = (points || []).length;\n    if (len > 2) {\n        const ops = [];\n        for (let i = 0; i < (len - 1); i++) {\n            ops.push(..._doubleLine(points[i][0], points[i][1], points[i + 1][0], points[i + 1][1], o));\n        }\n        if (close) {\n            ops.push(..._doubleLine(points[len - 1][0], points[len - 1][1], points[0][0], points[0][1], o));\n        }\n        return { type: 'path', ops };\n    }\n    else if (len === 2) {\n        return line(points[0][0], points[0][1], points[1][0], points[1][1], o);\n    }\n    return { type: 'path', ops: [] };\n}\nexport function polygon(points, o) {\n    return linearPath(points, true, o);\n}\nexport function rectangle(x, y, width, height, o) {\n    const points = [\n        [x, y],\n        [x + width, y],\n        [x + width, y + height],\n        [x, y + height],\n    ];\n    return polygon(points, o);\n}\nexport function curve(inputPoints, o) {\n    if (inputPoints.length) {\n        const p1 = inputPoints[0];\n        const pointsList = (typeof p1[0] === 'number') ? [inputPoints] : inputPoints;\n        const o1 = _curveWithOffset(pointsList[0], 1 * (1 + o.roughness * 0.2), o);\n        const o2 = o.disableMultiStroke ? [] : _curveWithOffset(pointsList[0], 1.5 * (1 + o.roughness * 0.22), cloneOptionsAlterSeed(o));\n        for (let i = 1; i < pointsList.length; i++) {\n            const points = pointsList[i];\n            if (points.length) {\n                const underlay = _curveWithOffset(points, 1 * (1 + o.roughness * 0.2), o);\n                const overlay = o.disableMultiStroke ? [] : _curveWithOffset(points, 1.5 * (1 + o.roughness * 0.22), cloneOptionsAlterSeed(o));\n                for (const item of underlay) {\n                    if (item.op !== 'move') {\n                        o1.push(item);\n                    }\n                }\n                for (const item of overlay) {\n                    if (item.op !== 'move') {\n                        o2.push(item);\n                    }\n                }\n            }\n        }\n        return { type: 'path', ops: o1.concat(o2) };\n    }\n    return { type: 'path', ops: [] };\n}\nexport function ellipse(x, y, width, height, o) {\n    const params = generateEllipseParams(width, height, o);\n    return ellipseWithParams(x, y, o, params).opset;\n}\nexport function generateEllipseParams(width, height, o) {\n    const psq = Math.sqrt(Math.PI * 2 * Math.sqrt((Math.pow(width / 2, 2) + Math.pow(height / 2, 2)) / 2));\n    const stepCount = Math.ceil(Math.max(o.curveStepCount, (o.curveStepCount / Math.sqrt(200)) * psq));\n    const increment = (Math.PI * 2) / stepCount;\n    let rx = Math.abs(width / 2);\n    let ry = Math.abs(height / 2);\n    const curveFitRandomness = 1 - o.curveFitting;\n    rx += _offsetOpt(rx * curveFitRandomness, o);\n    ry += _offsetOpt(ry * curveFitRandomness, o);\n    return { increment, rx, ry };\n}\nexport function ellipseWithParams(x, y, o, ellipseParams) {\n    const [ap1, cp1] = _computeEllipsePoints(ellipseParams.increment, x, y, ellipseParams.rx, ellipseParams.ry, 1, ellipseParams.increment * _offset(0.1, _offset(0.4, 1, o), o), o);\n    let o1 = _curve(ap1, null, o);\n    if ((!o.disableMultiStroke) && (o.roughness !== 0)) {\n        const [ap2] = _computeEllipsePoints(ellipseParams.increment, x, y, ellipseParams.rx, ellipseParams.ry, 1.5, 0, o);\n        const o2 = _curve(ap2, null, o);\n        o1 = o1.concat(o2);\n    }\n    return {\n        estimatedPoints: cp1,\n        opset: { type: 'path', ops: o1 },\n    };\n}\nexport function arc(x, y, width, height, start, stop, closed, roughClosure, o) {\n    const cx = x;\n    const cy = y;\n    let rx = Math.abs(width / 2);\n    let ry = Math.abs(height / 2);\n    rx += _offsetOpt(rx * 0.01, o);\n    ry += _offsetOpt(ry * 0.01, o);\n    let strt = start;\n    let stp = stop;\n    while (strt < 0) {\n        strt += Math.PI * 2;\n        stp += Math.PI * 2;\n    }\n    if ((stp - strt) > (Math.PI * 2)) {\n        strt = 0;\n        stp = Math.PI * 2;\n    }\n    const ellipseInc = (Math.PI * 2) / o.curveStepCount;\n    const arcInc = Math.min(ellipseInc / 2, (stp - strt) / 2);\n    const ops = _arc(arcInc, cx, cy, rx, ry, strt, stp, 1, o);\n    if (!o.disableMultiStroke) {\n        const o2 = _arc(arcInc, cx, cy, rx, ry, strt, stp, 1.5, o);\n        ops.push(...o2);\n    }\n    if (closed) {\n        if (roughClosure) {\n            ops.push(..._doubleLine(cx, cy, cx + rx * Math.cos(strt), cy + ry * Math.sin(strt), o), ..._doubleLine(cx, cy, cx + rx * Math.cos(stp), cy + ry * Math.sin(stp), o));\n        }\n        else {\n            ops.push({ op: 'lineTo', data: [cx, cy] }, { op: 'lineTo', data: [cx + rx * Math.cos(strt), cy + ry * Math.sin(strt)] });\n        }\n    }\n    return { type: 'path', ops };\n}\nexport function svgPath(path, o) {\n    const segments = normalize(absolutize(parsePath(path)));\n    const ops = [];\n    let first = [0, 0];\n    let current = [0, 0];\n    for (const { key, data } of segments) {\n        switch (key) {\n            case 'M': {\n                current = [data[0], data[1]];\n                first = [data[0], data[1]];\n                break;\n            }\n            case 'L':\n                ops.push(..._doubleLine(current[0], current[1], data[0], data[1], o));\n                current = [data[0], data[1]];\n                break;\n            case 'C': {\n                const [x1, y1, x2, y2, x, y] = data;\n                ops.push(..._bezierTo(x1, y1, x2, y2, x, y, current, o));\n                current = [x, y];\n                break;\n            }\n            case 'Z':\n                ops.push(..._doubleLine(current[0], current[1], first[0], first[1], o));\n                current = [first[0], first[1]];\n                break;\n        }\n    }\n    return { type: 'path', ops };\n}\n// Fills\nexport function solidFillPolygon(polygonList, o) {\n    const ops = [];\n    for (const points of polygonList) {\n        if (points.length) {\n            const offset = o.maxRandomnessOffset || 0;\n            const len = points.length;\n            if (len > 2) {\n                ops.push({ op: 'move', data: [points[0][0] + _offsetOpt(offset, o), points[0][1] + _offsetOpt(offset, o)] });\n                for (let i = 1; i < len; i++) {\n                    ops.push({ op: 'lineTo', data: [points[i][0] + _offsetOpt(offset, o), points[i][1] + _offsetOpt(offset, o)] });\n                }\n            }\n        }\n    }\n    return { type: 'fillPath', ops };\n}\nexport function patternFillPolygons(polygonList, o) {\n    return getFiller(o, helper).fillPolygons(polygonList, o);\n}\nexport function patternFillArc(x, y, width, height, start, stop, o) {\n    const cx = x;\n    const cy = y;\n    let rx = Math.abs(width / 2);\n    let ry = Math.abs(height / 2);\n    rx += _offsetOpt(rx * 0.01, o);\n    ry += _offsetOpt(ry * 0.01, o);\n    let strt = start;\n    let stp = stop;\n    while (strt < 0) {\n        strt += Math.PI * 2;\n        stp += Math.PI * 2;\n    }\n    if ((stp - strt) > (Math.PI * 2)) {\n        strt = 0;\n        stp = Math.PI * 2;\n    }\n    const increment = (stp - strt) / o.curveStepCount;\n    const points = [];\n    for (let angle = strt; angle <= stp; angle = angle + increment) {\n        points.push([cx + rx * Math.cos(angle), cy + ry * Math.sin(angle)]);\n    }\n    points.push([cx + rx * Math.cos(stp), cy + ry * Math.sin(stp)]);\n    points.push([cx, cy]);\n    return patternFillPolygons([points], o);\n}\nexport function randOffset(x, o) {\n    return _offsetOpt(x, o);\n}\nexport function randOffsetWithRange(min, max, o) {\n    return _offset(min, max, o);\n}\nexport function doubleLineFillOps(x1, y1, x2, y2, o) {\n    return _doubleLine(x1, y1, x2, y2, o, true);\n}\n// Private helpers\nfunction cloneOptionsAlterSeed(ops) {\n    const result = Object.assign({}, ops);\n    result.randomizer = undefined;\n    if (ops.seed) {\n        result.seed = ops.seed + 1;\n    }\n    return result;\n}\nfunction random(ops) {\n    if (!ops.randomizer) {\n        ops.randomizer = new Random(ops.seed || 0);\n    }\n    return ops.randomizer.next();\n}\nfunction _offset(min, max, ops, roughnessGain = 1) {\n    return ops.roughness * roughnessGain * ((random(ops) * (max - min)) + min);\n}\nfunction _offsetOpt(x, ops, roughnessGain = 1) {\n    return _offset(-x, x, ops, roughnessGain);\n}\nfunction _doubleLine(x1, y1, x2, y2, o, filling = false) {\n    const singleStroke = filling ? o.disableMultiStrokeFill : o.disableMultiStroke;\n    const o1 = _line(x1, y1, x2, y2, o, true, false);\n    if (singleStroke) {\n        return o1;\n    }\n    const o2 = _line(x1, y1, x2, y2, o, true, true);\n    return o1.concat(o2);\n}\nfunction _line(x1, y1, x2, y2, o, move, overlay) {\n    const lengthSq = Math.pow((x1 - x2), 2) + Math.pow((y1 - y2), 2);\n    const length = Math.sqrt(lengthSq);\n    let roughnessGain = 1;\n    if (length < 200) {\n        roughnessGain = 1;\n    }\n    else if (length > 500) {\n        roughnessGain = 0.4;\n    }\n    else {\n        roughnessGain = (-0.0016668) * length + 1.233334;\n    }\n    let offset = o.maxRandomnessOffset || 0;\n    if ((offset * offset * 100) > lengthSq) {\n        offset = length / 10;\n    }\n    const halfOffset = offset / 2;\n    const divergePoint = 0.2 + random(o) * 0.2;\n    let midDispX = o.bowing * o.maxRandomnessOffset * (y2 - y1) / 200;\n    let midDispY = o.bowing * o.maxRandomnessOffset * (x1 - x2) / 200;\n    midDispX = _offsetOpt(midDispX, o, roughnessGain);\n    midDispY = _offsetOpt(midDispY, o, roughnessGain);\n    const ops = [];\n    const randomHalf = () => _offsetOpt(halfOffset, o, roughnessGain);\n    const randomFull = () => _offsetOpt(offset, o, roughnessGain);\n    const preserveVertices = o.preserveVertices;\n    if (move) {\n        if (overlay) {\n            ops.push({\n                op: 'move', data: [\n                    x1 + (preserveVertices ? 0 : randomHalf()),\n                    y1 + (preserveVertices ? 0 : randomHalf()),\n                ],\n            });\n        }\n        else {\n            ops.push({\n                op: 'move', data: [\n                    x1 + (preserveVertices ? 0 : _offsetOpt(offset, o, roughnessGain)),\n                    y1 + (preserveVertices ? 0 : _offsetOpt(offset, o, roughnessGain)),\n                ],\n            });\n        }\n    }\n    if (overlay) {\n        ops.push({\n            op: 'bcurveTo',\n            data: [\n                midDispX + x1 + (x2 - x1) * divergePoint + randomHalf(),\n                midDispY + y1 + (y2 - y1) * divergePoint + randomHalf(),\n                midDispX + x1 + 2 * (x2 - x1) * divergePoint + randomHalf(),\n                midDispY + y1 + 2 * (y2 - y1) * divergePoint + randomHalf(),\n                x2 + (preserveVertices ? 0 : randomHalf()),\n                y2 + (preserveVertices ? 0 : randomHalf()),\n            ],\n        });\n    }\n    else {\n        ops.push({\n            op: 'bcurveTo',\n            data: [\n                midDispX + x1 + (x2 - x1) * divergePoint + randomFull(),\n                midDispY + y1 + (y2 - y1) * divergePoint + randomFull(),\n                midDispX + x1 + 2 * (x2 - x1) * divergePoint + randomFull(),\n                midDispY + y1 + 2 * (y2 - y1) * divergePoint + randomFull(),\n                x2 + (preserveVertices ? 0 : randomFull()),\n                y2 + (preserveVertices ? 0 : randomFull()),\n            ],\n        });\n    }\n    return ops;\n}\nfunction _curveWithOffset(points, offset, o) {\n    if (!points.length) {\n        return [];\n    }\n    const ps = [];\n    ps.push([\n        points[0][0] + _offsetOpt(offset, o),\n        points[0][1] + _offsetOpt(offset, o),\n    ]);\n    ps.push([\n        points[0][0] + _offsetOpt(offset, o),\n        points[0][1] + _offsetOpt(offset, o),\n    ]);\n    for (let i = 1; i < points.length; i++) {\n        ps.push([\n            points[i][0] + _offsetOpt(offset, o),\n            points[i][1] + _offsetOpt(offset, o),\n        ]);\n        if (i === (points.length - 1)) {\n            ps.push([\n                points[i][0] + _offsetOpt(offset, o),\n                points[i][1] + _offsetOpt(offset, o),\n            ]);\n        }\n    }\n    return _curve(ps, null, o);\n}\nfunction _curve(points, closePoint, o) {\n    const len = points.length;\n    const ops = [];\n    if (len > 3) {\n        const b = [];\n        const s = 1 - o.curveTightness;\n        ops.push({ op: 'move', data: [points[1][0], points[1][1]] });\n        for (let i = 1; (i + 2) < len; i++) {\n            const cachedVertArray = points[i];\n            b[0] = [cachedVertArray[0], cachedVertArray[1]];\n            b[1] = [cachedVertArray[0] + (s * points[i + 1][0] - s * points[i - 1][0]) / 6, cachedVertArray[1] + (s * points[i + 1][1] - s * points[i - 1][1]) / 6];\n            b[2] = [points[i + 1][0] + (s * points[i][0] - s * points[i + 2][0]) / 6, points[i + 1][1] + (s * points[i][1] - s * points[i + 2][1]) / 6];\n            b[3] = [points[i + 1][0], points[i + 1][1]];\n            ops.push({ op: 'bcurveTo', data: [b[1][0], b[1][1], b[2][0], b[2][1], b[3][0], b[3][1]] });\n        }\n        if (closePoint && closePoint.length === 2) {\n            const ro = o.maxRandomnessOffset;\n            ops.push({ op: 'lineTo', data: [closePoint[0] + _offsetOpt(ro, o), closePoint[1] + _offsetOpt(ro, o)] });\n        }\n    }\n    else if (len === 3) {\n        ops.push({ op: 'move', data: [points[1][0], points[1][1]] });\n        ops.push({\n            op: 'bcurveTo',\n            data: [\n                points[1][0], points[1][1],\n                points[2][0], points[2][1],\n                points[2][0], points[2][1],\n            ],\n        });\n    }\n    else if (len === 2) {\n        ops.push(..._line(points[0][0], points[0][1], points[1][0], points[1][1], o, true, true));\n    }\n    return ops;\n}\nfunction _computeEllipsePoints(increment, cx, cy, rx, ry, offset, overlap, o) {\n    const coreOnly = o.roughness === 0;\n    const corePoints = [];\n    const allPoints = [];\n    if (coreOnly) {\n        increment = increment / 4;\n        allPoints.push([\n            cx + rx * Math.cos(-increment),\n            cy + ry * Math.sin(-increment),\n        ]);\n        for (let angle = 0; angle <= Math.PI * 2; angle = angle + increment) {\n            const p = [\n                cx + rx * Math.cos(angle),\n                cy + ry * Math.sin(angle),\n            ];\n            corePoints.push(p);\n            allPoints.push(p);\n        }\n        allPoints.push([\n            cx + rx * Math.cos(0),\n            cy + ry * Math.sin(0),\n        ]);\n        allPoints.push([\n            cx + rx * Math.cos(increment),\n            cy + ry * Math.sin(increment),\n        ]);\n    }\n    else {\n        const radOffset = _offsetOpt(0.5, o) - (Math.PI / 2);\n        allPoints.push([\n            _offsetOpt(offset, o) + cx + 0.9 * rx * Math.cos(radOffset - increment),\n            _offsetOpt(offset, o) + cy + 0.9 * ry * Math.sin(radOffset - increment),\n        ]);\n        const endAngle = Math.PI * 2 + radOffset - 0.01;\n        for (let angle = radOffset; angle < endAngle; angle = angle + increment) {\n            const p = [\n                _offsetOpt(offset, o) + cx + rx * Math.cos(angle),\n                _offsetOpt(offset, o) + cy + ry * Math.sin(angle),\n            ];\n            corePoints.push(p);\n            allPoints.push(p);\n        }\n        allPoints.push([\n            _offsetOpt(offset, o) + cx + rx * Math.cos(radOffset + Math.PI * 2 + overlap * 0.5),\n            _offsetOpt(offset, o) + cy + ry * Math.sin(radOffset + Math.PI * 2 + overlap * 0.5),\n        ]);\n        allPoints.push([\n            _offsetOpt(offset, o) + cx + 0.98 * rx * Math.cos(radOffset + overlap),\n            _offsetOpt(offset, o) + cy + 0.98 * ry * Math.sin(radOffset + overlap),\n        ]);\n        allPoints.push([\n            _offsetOpt(offset, o) + cx + 0.9 * rx * Math.cos(radOffset + overlap * 0.5),\n            _offsetOpt(offset, o) + cy + 0.9 * ry * Math.sin(radOffset + overlap * 0.5),\n        ]);\n    }\n    return [allPoints, corePoints];\n}\nfunction _arc(increment, cx, cy, rx, ry, strt, stp, offset, o) {\n    const radOffset = strt + _offsetOpt(0.1, o);\n    const points = [];\n    points.push([\n        _offsetOpt(offset, o) + cx + 0.9 * rx * Math.cos(radOffset - increment),\n        _offsetOpt(offset, o) + cy + 0.9 * ry * Math.sin(radOffset - increment),\n    ]);\n    for (let angle = radOffset; angle <= stp; angle = angle + increment) {\n        points.push([\n            _offsetOpt(offset, o) + cx + rx * Math.cos(angle),\n            _offsetOpt(offset, o) + cy + ry * Math.sin(angle),\n        ]);\n    }\n    points.push([\n        cx + rx * Math.cos(stp),\n        cy + ry * Math.sin(stp),\n    ]);\n    points.push([\n        cx + rx * Math.cos(stp),\n        cy + ry * Math.sin(stp),\n    ]);\n    return _curve(points, null, o);\n}\nfunction _bezierTo(x1, y1, x2, y2, x, y, current, o) {\n    const ops = [];\n    const ros = [o.maxRandomnessOffset || 1, (o.maxRandomnessOffset || 1) + 0.3];\n    let f = [0, 0];\n    const iterations = o.disableMultiStroke ? 1 : 2;\n    const preserveVertices = o.preserveVertices;\n    for (let i = 0; i < iterations; i++) {\n        if (i === 0) {\n            ops.push({ op: 'move', data: [current[0], current[1]] });\n        }\n        else {\n            ops.push({ op: 'move', data: [current[0] + (preserveVertices ? 0 : _offsetOpt(ros[0], o)), current[1] + (preserveVertices ? 0 : _offsetOpt(ros[0], o))] });\n        }\n        f = preserveVertices ? [x, y] : [x + _offsetOpt(ros[i], o), y + _offsetOpt(ros[i], o)];\n        ops.push({\n            op: 'bcurveTo',\n            data: [\n                x1 + _offsetOpt(ros[i], o), y1 + _offsetOpt(ros[i], o),\n                x2 + _offsetOpt(ros[i], o), y2 + _offsetOpt(ros[i], o),\n                f[0], f[1],\n            ],\n        });\n    }\n    return ops;\n}\n","function clone(p) {\n    return [...p];\n}\nexport function curveToBezier(pointsIn, curveTightness = 0) {\n    const len = pointsIn.length;\n    if (len < 3) {\n        throw new Error('A curve must have at least three points.');\n    }\n    const out = [];\n    if (len === 3) {\n        out.push(clone(pointsIn[0]), clone(pointsIn[1]), clone(pointsIn[2]), clone(pointsIn[2]));\n    }\n    else {\n        const points = [];\n        points.push(pointsIn[0], pointsIn[0]);\n        for (let i = 1; i < pointsIn.length; i++) {\n            points.push(pointsIn[i]);\n            if (i === (pointsIn.length - 1)) {\n                points.push(pointsIn[i]);\n            }\n        }\n        const b = [];\n        const s = 1 - curveTightness;\n        out.push(clone(points[0]));\n        for (let i = 1; (i + 2) < points.length; i++) {\n            const cachedVertArray = points[i];\n            b[0] = [cachedVertArray[0], cachedVertArray[1]];\n            b[1] = [cachedVertArray[0] + (s * points[i + 1][0] - s * points[i - 1][0]) / 6, cachedVertArray[1] + (s * points[i + 1][1] - s * points[i - 1][1]) / 6];\n            b[2] = [points[i + 1][0] + (s * points[i][0] - s * points[i + 2][0]) / 6, points[i + 1][1] + (s * points[i][1] - s * points[i + 2][1]) / 6];\n            b[3] = [points[i + 1][0], points[i + 1][1]];\n            out.push(b[1], b[2], b[3]);\n        }\n    }\n    return out;\n}\n","// distance between 2 points\nfunction distance(p1, p2) {\n    return Math.sqrt(distanceSq(p1, p2));\n}\n// distance between 2 points squared\nfunction distanceSq(p1, p2) {\n    return Math.pow(p1[0] - p2[0], 2) + Math.pow(p1[1] - p2[1], 2);\n}\n// Sistance squared from a point p to the line segment vw\nfunction distanceToSegmentSq(p, v, w) {\n    const l2 = distanceSq(v, w);\n    if (l2 === 0) {\n        return distanceSq(p, v);\n    }\n    let t = ((p[0] - v[0]) * (w[0] - v[0]) + (p[1] - v[1]) * (w[1] - v[1])) / l2;\n    t = Math.max(0, Math.min(1, t));\n    return distanceSq(p, lerp(v, w, t));\n}\nfunction lerp(a, b, t) {\n    return [\n        a[0] + (b[0] - a[0]) * t,\n        a[1] + (b[1] - a[1]) * t,\n    ];\n}\n// Adapted from https://seant23.wordpress.com/2010/11/12/offset-bezier-curves/\nfunction flatness(points, offset) {\n    const p1 = points[offset + 0];\n    const p2 = points[offset + 1];\n    const p3 = points[offset + 2];\n    const p4 = points[offset + 3];\n    let ux = 3 * p2[0] - 2 * p1[0] - p4[0];\n    ux *= ux;\n    let uy = 3 * p2[1] - 2 * p1[1] - p4[1];\n    uy *= uy;\n    let vx = 3 * p3[0] - 2 * p4[0] - p1[0];\n    vx *= vx;\n    let vy = 3 * p3[1] - 2 * p4[1] - p1[1];\n    vy *= vy;\n    if (ux < vx) {\n        ux = vx;\n    }\n    if (uy < vy) {\n        uy = vy;\n    }\n    return ux + uy;\n}\nfunction getPointsOnBezierCurveWithSplitting(points, offset, tolerance, newPoints) {\n    const outPoints = newPoints || [];\n    if (flatness(points, offset) < tolerance) {\n        const p0 = points[offset + 0];\n        if (outPoints.length) {\n            const d = distance(outPoints[outPoints.length - 1], p0);\n            if (d > 1) {\n                outPoints.push(p0);\n            }\n        }\n        else {\n            outPoints.push(p0);\n        }\n        outPoints.push(points[offset + 3]);\n    }\n    else {\n        // subdivide\n        const t = .5;\n        const p1 = points[offset + 0];\n        const p2 = points[offset + 1];\n        const p3 = points[offset + 2];\n        const p4 = points[offset + 3];\n        const q1 = lerp(p1, p2, t);\n        const q2 = lerp(p2, p3, t);\n        const q3 = lerp(p3, p4, t);\n        const r1 = lerp(q1, q2, t);\n        const r2 = lerp(q2, q3, t);\n        const red = lerp(r1, r2, t);\n        getPointsOnBezierCurveWithSplitting([p1, q1, r1, red], 0, tolerance, outPoints);\n        getPointsOnBezierCurveWithSplitting([red, r2, q3, p4], 0, tolerance, outPoints);\n    }\n    return outPoints;\n}\nexport function simplify(points, distance) {\n    return simplifyPoints(points, 0, points.length, distance);\n}\n// RamerDouglasPeucker algorithm\n// https://en.wikipedia.org/wiki/Ramer%E2%80%93Douglas%E2%80%93Peucker_algorithm\nfunction simplifyPoints(points, start, end, epsilon, newPoints) {\n    const outPoints = newPoints || [];\n    // find the most distance point from the endpoints\n    const s = points[start];\n    const e = points[end - 1];\n    let maxDistSq = 0;\n    let maxNdx = 1;\n    for (let i = start + 1; i < end - 1; ++i) {\n        const distSq = distanceToSegmentSq(points[i], s, e);\n        if (distSq > maxDistSq) {\n            maxDistSq = distSq;\n            maxNdx = i;\n        }\n    }\n    // if that point is too far, split\n    if (Math.sqrt(maxDistSq) > epsilon) {\n        simplifyPoints(points, start, maxNdx + 1, epsilon, outPoints);\n        simplifyPoints(points, maxNdx, end, epsilon, outPoints);\n    }\n    else {\n        if (!outPoints.length) {\n            outPoints.push(s);\n        }\n        outPoints.push(e);\n    }\n    return outPoints;\n}\nexport function pointsOnBezierCurves(points, tolerance = 0.15, distance) {\n    const newPoints = [];\n    const numSegments = (points.length - 1) / 3;\n    for (let i = 0; i < numSegments; i++) {\n        const offset = i * 3;\n        getPointsOnBezierCurveWithSplitting(points, offset, tolerance, newPoints);\n    }\n    if (distance && distance > 0) {\n        return simplifyPoints(newPoints, 0, newPoints.length, distance);\n    }\n    return newPoints;\n}\n","import { line, solidFillPolygon, patternFillPolygons, rectangle, ellipseWithParams, generateEllipseParams, linearPath, arc, patternFillArc, curve, svgPath } from './renderer.js';\nimport { randomSeed } from './math.js';\nimport { curveToBezier } from 'points-on-curve/lib/curve-to-bezier.js';\nimport { pointsOnBezierCurves } from 'points-on-curve';\nimport { pointsOnPath } from 'points-on-path';\nconst NOS = 'none';\nexport class RoughGenerator {\n    constructor(config) {\n        this.defaultOptions = {\n            maxRandomnessOffset: 2,\n            roughness: 1,\n            bowing: 1,\n            stroke: '#000',\n            strokeWidth: 1,\n            curveTightness: 0,\n            curveFitting: 0.95,\n            curveStepCount: 9,\n            fillStyle: 'hachure',\n            fillWeight: -1,\n            hachureAngle: -41,\n            hachureGap: -1,\n            dashOffset: -1,\n            dashGap: -1,\n            zigzagOffset: -1,\n            seed: 0,\n            disableMultiStroke: false,\n            disableMultiStrokeFill: false,\n            preserveVertices: false,\n            fillShapeRoughnessGain: 0.8,\n        };\n        this.config = config || {};\n        if (this.config.options) {\n            this.defaultOptions = this._o(this.config.options);\n        }\n    }\n    static newSeed() {\n        return randomSeed();\n    }\n    _o(options) {\n        return options ? Object.assign({}, this.defaultOptions, options) : this.defaultOptions;\n    }\n    _d(shape, sets, options) {\n        return { shape, sets: sets || [], options: options || this.defaultOptions };\n    }\n    line(x1, y1, x2, y2, options) {\n        const o = this._o(options);\n        return this._d('line', [line(x1, y1, x2, y2, o)], o);\n    }\n    rectangle(x, y, width, height, options) {\n        const o = this._o(options);\n        const paths = [];\n        const outline = rectangle(x, y, width, height, o);\n        if (o.fill) {\n            const points = [[x, y], [x + width, y], [x + width, y + height], [x, y + height]];\n            if (o.fillStyle === 'solid') {\n                paths.push(solidFillPolygon([points], o));\n            }\n            else {\n                paths.push(patternFillPolygons([points], o));\n            }\n        }\n        if (o.stroke !== NOS) {\n            paths.push(outline);\n        }\n        return this._d('rectangle', paths, o);\n    }\n    ellipse(x, y, width, height, options) {\n        const o = this._o(options);\n        const paths = [];\n        const ellipseParams = generateEllipseParams(width, height, o);\n        const ellipseResponse = ellipseWithParams(x, y, o, ellipseParams);\n        if (o.fill) {\n            if (o.fillStyle === 'solid') {\n                const shape = ellipseWithParams(x, y, o, ellipseParams).opset;\n                shape.type = 'fillPath';\n                paths.push(shape);\n            }\n            else {\n                paths.push(patternFillPolygons([ellipseResponse.estimatedPoints], o));\n            }\n        }\n        if (o.stroke !== NOS) {\n            paths.push(ellipseResponse.opset);\n        }\n        return this._d('ellipse', paths, o);\n    }\n    circle(x, y, diameter, options) {\n        const ret = this.ellipse(x, y, diameter, diameter, options);\n        ret.shape = 'circle';\n        return ret;\n    }\n    linearPath(points, options) {\n        const o = this._o(options);\n        return this._d('linearPath', [linearPath(points, false, o)], o);\n    }\n    arc(x, y, width, height, start, stop, closed = false, options) {\n        const o = this._o(options);\n        const paths = [];\n        const outline = arc(x, y, width, height, start, stop, closed, true, o);\n        if (closed && o.fill) {\n            if (o.fillStyle === 'solid') {\n                const fillOptions = Object.assign({}, o);\n                fillOptions.disableMultiStroke = true;\n                const shape = arc(x, y, width, height, start, stop, true, false, fillOptions);\n                shape.type = 'fillPath';\n                paths.push(shape);\n            }\n            else {\n                paths.push(patternFillArc(x, y, width, height, start, stop, o));\n            }\n        }\n        if (o.stroke !== NOS) {\n            paths.push(outline);\n        }\n        return this._d('arc', paths, o);\n    }\n    curve(points, options) {\n        const o = this._o(options);\n        const paths = [];\n        const outline = curve(points, o);\n        if (o.fill && o.fill !== NOS) {\n            if (o.fillStyle === 'solid') {\n                const fillShape = curve(points, Object.assign(Object.assign({}, o), { disableMultiStroke: true, roughness: o.roughness ? (o.roughness + o.fillShapeRoughnessGain) : 0 }));\n                paths.push({\n                    type: 'fillPath',\n                    ops: this._mergedShape(fillShape.ops),\n                });\n            }\n            else {\n                const polyPoints = [];\n                const inputPoints = points;\n                if (inputPoints.length) {\n                    const p1 = inputPoints[0];\n                    const pointsList = (typeof p1[0] === 'number') ? [inputPoints] : inputPoints;\n                    for (const points of pointsList) {\n                        if (points.length < 3) {\n                            polyPoints.push(...points);\n                        }\n                        else if (points.length === 3) {\n                            polyPoints.push(...pointsOnBezierCurves(curveToBezier([\n                                points[0],\n                                points[0],\n                                points[1],\n                                points[2],\n                            ]), 10, (1 + o.roughness) / 2));\n                        }\n                        else {\n                            polyPoints.push(...pointsOnBezierCurves(curveToBezier(points), 10, (1 + o.roughness) / 2));\n                        }\n                    }\n                }\n                if (polyPoints.length) {\n                    paths.push(patternFillPolygons([polyPoints], o));\n                }\n            }\n        }\n        if (o.stroke !== NOS) {\n            paths.push(outline);\n        }\n        return this._d('curve', paths, o);\n    }\n    polygon(points, options) {\n        const o = this._o(options);\n        const paths = [];\n        const outline = linearPath(points, true, o);\n        if (o.fill) {\n            if (o.fillStyle === 'solid') {\n                paths.push(solidFillPolygon([points], o));\n            }\n            else {\n                paths.push(patternFillPolygons([points], o));\n            }\n        }\n        if (o.stroke !== NOS) {\n            paths.push(outline);\n        }\n        return this._d('polygon', paths, o);\n    }\n    path(d, options) {\n        const o = this._o(options);\n        const paths = [];\n        if (!d) {\n            return this._d('path', paths, o);\n        }\n        d = (d || '').replace(/\\n/g, ' ').replace(/(-\\s)/g, '-').replace('/(\\s\\s)/g', ' ');\n        const hasFill = o.fill && o.fill !== 'transparent' && o.fill !== NOS;\n        const hasStroke = o.stroke !== NOS;\n        const simplified = !!(o.simplification && (o.simplification < 1));\n        const distance = simplified ? (4 - 4 * (o.simplification || 1)) : ((1 + o.roughness) / 2);\n        const sets = pointsOnPath(d, 1, distance);\n        const shape = svgPath(d, o);\n        if (hasFill) {\n            if (o.fillStyle === 'solid') {\n                if (sets.length === 1) {\n                    const fillShape = svgPath(d, Object.assign(Object.assign({}, o), { disableMultiStroke: true, roughness: o.roughness ? (o.roughness + o.fillShapeRoughnessGain) : 0 }));\n                    paths.push({\n                        type: 'fillPath',\n                        ops: this._mergedShape(fillShape.ops),\n                    });\n                }\n                else {\n                    paths.push(solidFillPolygon(sets, o));\n                }\n            }\n            else {\n                paths.push(patternFillPolygons(sets, o));\n            }\n        }\n        if (hasStroke) {\n            if (simplified) {\n                sets.forEach((set) => {\n                    paths.push(linearPath(set, false, o));\n                });\n            }\n            else {\n                paths.push(shape);\n            }\n        }\n        return this._d('path', paths, o);\n    }\n    opsToPath(drawing, fixedDecimals) {\n        let path = '';\n        for (const item of drawing.ops) {\n            const data = ((typeof fixedDecimals === 'number') && fixedDecimals >= 0) ? (item.data.map((d) => +d.toFixed(fixedDecimals))) : item.data;\n            switch (item.op) {\n                case 'move':\n                    path += `M${data[0]} ${data[1]} `;\n                    break;\n                case 'bcurveTo':\n                    path += `C${data[0]} ${data[1]}, ${data[2]} ${data[3]}, ${data[4]} ${data[5]} `;\n                    break;\n                case 'lineTo':\n                    path += `L${data[0]} ${data[1]} `;\n                    break;\n            }\n        }\n        return path.trim();\n    }\n    toPaths(drawable) {\n        const sets = drawable.sets || [];\n        const o = drawable.options || this.defaultOptions;\n        const paths = [];\n        for (const drawing of sets) {\n            let path = null;\n            switch (drawing.type) {\n                case 'path':\n                    path = {\n                        d: this.opsToPath(drawing),\n                        stroke: o.stroke,\n                        strokeWidth: o.strokeWidth,\n                        fill: NOS,\n                    };\n                    break;\n                case 'fillPath':\n                    path = {\n                        d: this.opsToPath(drawing),\n                        stroke: NOS,\n                        strokeWidth: 0,\n                        fill: o.fill || NOS,\n                    };\n                    break;\n                case 'fillSketch':\n                    path = this.fillSketch(drawing, o);\n                    break;\n            }\n            if (path) {\n                paths.push(path);\n            }\n        }\n        return paths;\n    }\n    fillSketch(drawing, o) {\n        let fweight = o.fillWeight;\n        if (fweight < 0) {\n            fweight = o.strokeWidth / 2;\n        }\n        return {\n            d: this.opsToPath(drawing),\n            stroke: o.fill || NOS,\n            strokeWidth: fweight,\n            fill: NOS,\n        };\n    }\n    _mergedShape(input) {\n        return input.filter((d, i) => {\n            if (i === 0) {\n                return true;\n            }\n            if (d.op === 'move') {\n                return false;\n            }\n            return true;\n        });\n    }\n}\n","import { pointsOnBezierCurves, simplify } from 'points-on-curve';\nimport { parsePath, absolutize, normalize } from 'path-data-parser';\nexport function pointsOnPath(path, tolerance, distance) {\n    const segments = parsePath(path);\n    const normalized = normalize(absolutize(segments));\n    const sets = [];\n    let currentPoints = [];\n    let start = [0, 0];\n    let pendingCurve = [];\n    const appendPendingCurve = () => {\n        if (pendingCurve.length >= 4) {\n            currentPoints.push(...pointsOnBezierCurves(pendingCurve, tolerance));\n        }\n        pendingCurve = [];\n    };\n    const appendPendingPoints = () => {\n        appendPendingCurve();\n        if (currentPoints.length) {\n            sets.push(currentPoints);\n            currentPoints = [];\n        }\n    };\n    for (const { key, data } of normalized) {\n        switch (key) {\n            case 'M':\n                appendPendingPoints();\n                start = [data[0], data[1]];\n                currentPoints.push(start);\n                break;\n            case 'L':\n                appendPendingCurve();\n                currentPoints.push([data[0], data[1]]);\n                break;\n            case 'C':\n                if (!pendingCurve.length) {\n                    const lastPoint = currentPoints.length ? currentPoints[currentPoints.length - 1] : start;\n                    pendingCurve.push([lastPoint[0], lastPoint[1]]);\n                }\n                pendingCurve.push([data[0], data[1]]);\n                pendingCurve.push([data[2], data[3]]);\n                pendingCurve.push([data[4], data[5]]);\n                break;\n            case 'Z':\n                appendPendingCurve();\n                currentPoints.push([start[0], start[1]]);\n                break;\n        }\n    }\n    appendPendingPoints();\n    if (!distance) {\n        return sets;\n    }\n    const out = [];\n    for (const set of sets) {\n        const simplifiedSet = simplify(set, distance);\n        if (simplifiedSet.length) {\n            out.push(simplifiedSet);\n        }\n    }\n    return out;\n}\n","import { RoughGenerator } from './generator';\nexport class RoughCanvas {\n    constructor(canvas, config) {\n        this.canvas = canvas;\n        this.ctx = this.canvas.getContext('2d');\n        this.gen = new RoughGenerator(config);\n    }\n    draw(drawable) {\n        const sets = drawable.sets || [];\n        const o = drawable.options || this.getDefaultOptions();\n        const ctx = this.ctx;\n        const precision = drawable.options.fixedDecimalPlaceDigits;\n        for (const drawing of sets) {\n            switch (drawing.type) {\n                case 'path':\n                    ctx.save();\n                    ctx.strokeStyle = o.stroke === 'none' ? 'transparent' : o.stroke;\n                    ctx.lineWidth = o.strokeWidth;\n                    if (o.strokeLineDash) {\n                        ctx.setLineDash(o.strokeLineDash);\n                    }\n                    if (o.strokeLineDashOffset) {\n                        ctx.lineDashOffset = o.strokeLineDashOffset;\n                    }\n                    this._drawToContext(ctx, drawing, precision);\n                    ctx.restore();\n                    break;\n                case 'fillPath': {\n                    ctx.save();\n                    ctx.fillStyle = o.fill || '';\n                    const fillRule = (drawable.shape === 'curve' || drawable.shape === 'polygon' || drawable.shape === 'path') ? 'evenodd' : 'nonzero';\n                    this._drawToContext(ctx, drawing, precision, fillRule);\n                    ctx.restore();\n                    break;\n                }\n                case 'fillSketch':\n                    this.fillSketch(ctx, drawing, o);\n                    break;\n            }\n        }\n    }\n    fillSketch(ctx, drawing, o) {\n        let fweight = o.fillWeight;\n        if (fweight < 0) {\n            fweight = o.strokeWidth / 2;\n        }\n        ctx.save();\n        if (o.fillLineDash) {\n            ctx.setLineDash(o.fillLineDash);\n        }\n        if (o.fillLineDashOffset) {\n            ctx.lineDashOffset = o.fillLineDashOffset;\n        }\n        ctx.strokeStyle = o.fill || '';\n        ctx.lineWidth = fweight;\n        this._drawToContext(ctx, drawing, o.fixedDecimalPlaceDigits);\n        ctx.restore();\n    }\n    _drawToContext(ctx, drawing, fixedDecimals, rule = 'nonzero') {\n        ctx.beginPath();\n        for (const item of drawing.ops) {\n            const data = ((typeof fixedDecimals === 'number') && fixedDecimals >= 0) ? (item.data.map((d) => +d.toFixed(fixedDecimals))) : item.data;\n            switch (item.op) {\n                case 'move':\n                    ctx.moveTo(data[0], data[1]);\n                    break;\n                case 'bcurveTo':\n                    ctx.bezierCurveTo(data[0], data[1], data[2], data[3], data[4], data[5]);\n                    break;\n                case 'lineTo':\n                    ctx.lineTo(data[0], data[1]);\n                    break;\n            }\n        }\n        if (drawing.type === 'fillPath') {\n            ctx.fill(rule);\n        }\n        else {\n            ctx.stroke();\n        }\n    }\n    get generator() {\n        return this.gen;\n    }\n    getDefaultOptions() {\n        return this.gen.defaultOptions;\n    }\n    line(x1, y1, x2, y2, options) {\n        const d = this.gen.line(x1, y1, x2, y2, options);\n        this.draw(d);\n        return d;\n    }\n    rectangle(x, y, width, height, options) {\n        const d = this.gen.rectangle(x, y, width, height, options);\n        this.draw(d);\n        return d;\n    }\n    ellipse(x, y, width, height, options) {\n        const d = this.gen.ellipse(x, y, width, height, options);\n        this.draw(d);\n        return d;\n    }\n    circle(x, y, diameter, options) {\n        const d = this.gen.circle(x, y, diameter, options);\n        this.draw(d);\n        return d;\n    }\n    linearPath(points, options) {\n        const d = this.gen.linearPath(points, options);\n        this.draw(d);\n        return d;\n    }\n    polygon(points, options) {\n        const d = this.gen.polygon(points, options);\n        this.draw(d);\n        return d;\n    }\n    arc(x, y, width, height, start, stop, closed = false, options) {\n        const d = this.gen.arc(x, y, width, height, start, stop, closed, options);\n        this.draw(d);\n        return d;\n    }\n    curve(points, options) {\n        const d = this.gen.curve(points, options);\n        this.draw(d);\n        return d;\n    }\n    path(d, options) {\n        const drawing = this.gen.path(d, options);\n        this.draw(drawing);\n        return drawing;\n    }\n}\n","export const SVGNS = 'http://www.w3.org/2000/svg';\n","import { SVGNS } from './core';\nimport { RoughGenerator } from './generator';\nexport class RoughSVG {\n    constructor(svg, config) {\n        this.svg = svg;\n        this.gen = new RoughGenerator(config);\n    }\n    draw(drawable) {\n        const sets = drawable.sets || [];\n        const o = drawable.options || this.getDefaultOptions();\n        const doc = this.svg.ownerDocument || window.document;\n        const g = doc.createElementNS(SVGNS, 'g');\n        const precision = drawable.options.fixedDecimalPlaceDigits;\n        for (const drawing of sets) {\n            let path = null;\n            switch (drawing.type) {\n                case 'path': {\n                    path = doc.createElementNS(SVGNS, 'path');\n                    path.setAttribute('d', this.opsToPath(drawing, precision));\n                    path.setAttribute('stroke', o.stroke);\n                    path.setAttribute('stroke-width', o.strokeWidth + '');\n                    path.setAttribute('fill', 'none');\n                    if (o.strokeLineDash) {\n                        path.setAttribute('stroke-dasharray', o.strokeLineDash.join(' ').trim());\n                    }\n                    if (o.strokeLineDashOffset) {\n                        path.setAttribute('stroke-dashoffset', `${o.strokeLineDashOffset}`);\n                    }\n                    break;\n                }\n                case 'fillPath': {\n                    path = doc.createElementNS(SVGNS, 'path');\n                    path.setAttribute('d', this.opsToPath(drawing, precision));\n                    path.setAttribute('stroke', 'none');\n                    path.setAttribute('stroke-width', '0');\n                    path.setAttribute('fill', o.fill || '');\n                    if (drawable.shape === 'curve' || drawable.shape === 'polygon') {\n                        path.setAttribute('fill-rule', 'evenodd');\n                    }\n                    break;\n                }\n                case 'fillSketch': {\n                    path = this.fillSketch(doc, drawing, o);\n                    break;\n                }\n            }\n            if (path) {\n                g.appendChild(path);\n            }\n        }\n        return g;\n    }\n    fillSketch(doc, drawing, o) {\n        let fweight = o.fillWeight;\n        if (fweight < 0) {\n            fweight = o.strokeWidth / 2;\n        }\n        const path = doc.createElementNS(SVGNS, 'path');\n        path.setAttribute('d', this.opsToPath(drawing, o.fixedDecimalPlaceDigits));\n        path.setAttribute('stroke', o.fill || '');\n        path.setAttribute('stroke-width', fweight + '');\n        path.setAttribute('fill', 'none');\n        if (o.fillLineDash) {\n            path.setAttribute('stroke-dasharray', o.fillLineDash.join(' ').trim());\n        }\n        if (o.fillLineDashOffset) {\n            path.setAttribute('stroke-dashoffset', `${o.fillLineDashOffset}`);\n        }\n        return path;\n    }\n    get generator() {\n        return this.gen;\n    }\n    getDefaultOptions() {\n        return this.gen.defaultOptions;\n    }\n    opsToPath(drawing, fixedDecimalPlaceDigits) {\n        return this.gen.opsToPath(drawing, fixedDecimalPlaceDigits);\n    }\n    line(x1, y1, x2, y2, options) {\n        const d = this.gen.line(x1, y1, x2, y2, options);\n        return this.draw(d);\n    }\n    rectangle(x, y, width, height, options) {\n        const d = this.gen.rectangle(x, y, width, height, options);\n        return this.draw(d);\n    }\n    ellipse(x, y, width, height, options) {\n        const d = this.gen.ellipse(x, y, width, height, options);\n        return this.draw(d);\n    }\n    circle(x, y, diameter, options) {\n        const d = this.gen.circle(x, y, diameter, options);\n        return this.draw(d);\n    }\n    linearPath(points, options) {\n        const d = this.gen.linearPath(points, options);\n        return this.draw(d);\n    }\n    polygon(points, options) {\n        const d = this.gen.polygon(points, options);\n        return this.draw(d);\n    }\n    arc(x, y, width, height, start, stop, closed = false, options) {\n        const d = this.gen.arc(x, y, width, height, start, stop, closed, options);\n        return this.draw(d);\n    }\n    curve(points, options) {\n        const d = this.gen.curve(points, options);\n        return this.draw(d);\n    }\n    path(d, options) {\n        const drawing = this.gen.path(d, options);\n        return this.draw(drawing);\n    }\n}\n","import { RoughCanvas } from './canvas';\nimport { RoughGenerator } from './generator';\nimport { RoughSVG } from './svg';\nexport default {\n    canvas(canvas, config) {\n        return new RoughCanvas(canvas, config);\n    },\n    svg(svg, config) {\n        return new RoughSVG(svg, config);\n    },\n    generator(config) {\n        return new RoughGenerator(config);\n    },\n    newSeed() {\n        return RoughGenerator.newSeed();\n    },\n};\n","export var OutputType;\n(function (OutputType) {\n    OutputType[OutputType[\"SVG\"] = 0] = \"SVG\";\n    OutputType[OutputType[\"CANVAS\"] = 1] = \"CANVAS\";\n})(OutputType || (OutputType = {}));\n","/**\n * Returns the Node's children, since Node.prototype.children is not available on all browsers.\n * https://developer.mozilla.org/en-US/docs/Web/API/ParentNode/children\n */\nexport function getNodeChildren(element) {\n    if (typeof element.children !== 'undefined') {\n        return element.children;\n    }\n    let i = 0;\n    let node;\n    const nodes = element.childNodes;\n    const children = [];\n    while ((node = nodes[i++])) {\n        if (node.nodeType === 1) {\n            children.push(node);\n        }\n    }\n    return children;\n}\n/**\n * IE doesn't support `element.parentElement` in SVG documents.\n * This helper utilizes `parentNode` and checks for the `nodeType`.\n */\nexport function getParentElement(node) {\n    const parentNode = node.parentNode;\n    if (parentNode && parentNode.nodeType === Node.ELEMENT_NODE) {\n        return parentNode;\n    }\n    return null;\n}\n/**\n * Returns the CSS rules that apply to the given element (ignoring inheritance).\n *\n * Based on https://stackoverflow.com/a/22638396\n */\nexport function getMatchedCssRules(context, el) {\n    const ret = [];\n    el.matches =\n        el.matches ||\n            el.webkitMatchesSelector ||\n            // @ts-expect-error: legacy browser support\n            el.mozMatchesSelector ||\n            // @ts-expect-error: legacy browser support\n            el.msMatchesSelector ||\n            // @ts-expect-error: legacy browser support\n            el.oMatchesSelector;\n    context.styleSheets.forEach(sheet => {\n        const rules = sheet.rules || sheet.cssRules;\n        for (const r in rules) {\n            const rule = rules[r];\n            if (el.matches(rule.selectorText)) {\n                ret.push(rule);\n            }\n        }\n    });\n    return ret;\n}\n/**\n * Moves the child-nodes from the source to a new parent.\n */\nexport function reparentNodes(newParent, source) {\n    while (source.firstChild) {\n        newParent.append(source.firstChild);\n    }\n    return newParent;\n}\n/**\n * Returns the id from the url string\n */\nexport function getIdFromUrl(url) {\n    if (url === null) {\n        return null;\n    }\n    const result = /url\\('#?(.*?)'\\)/.exec(url) || /url\\(\"#?(.*?)\"\\)/.exec(url) || /url\\(#?(.*?)\\)/.exec(url);\n    if (result && result.length > 1) {\n        return result[1];\n    }\n    return null;\n}\n","import { reparentNodes } from './dom-helpers';\n/**\n * Attribute for storing the new clip-path IDs for the sketch output.\n */\nexport const SKETCH_CLIP_ATTRIBUTE = 'data-sketchy-clip-path';\n/**\n * Regexp that detects curved commands in path data.\n */\nconst PATH_CURVES_REGEX = /[acsqt]/i;\n/**\n * Returns the <defs> element of the output SVG sketch.\n */\nexport function getDefsElement(context) {\n    if (context.svgSketchDefs) {\n        return context.svgSketchDefs;\n    }\n    const parent = context.svgSketch;\n    const defs = document.createElementNS('http://www.w3.org/2000/svg', 'defs');\n    if (parent.childElementCount > 0) {\n        parent.insertBefore(defs, parent.firstElementChild);\n    }\n    else {\n        parent.appendChild(defs);\n    }\n    context.svgSketchDefs = defs;\n    return defs;\n}\nexport function getPointsArray(element) {\n    const pointsAttr = element.getAttribute('points');\n    if (!pointsAttr) {\n        return [];\n    }\n    let coordinateRegexp;\n    if (pointsAttr.indexOf(' ') > 0) {\n        // just assume that the coordinates (or pairs) are separated with space\n        coordinateRegexp = /\\s+/g;\n    }\n    else {\n        // there are no spaces, so assume comma separators\n        coordinateRegexp = /,/g;\n    }\n    const pointList = pointsAttr.split(coordinateRegexp);\n    const points = [];\n    for (let i = 0; i < pointList.length; i++) {\n        const currentEntry = pointList[i];\n        const coordinates = currentEntry.split(',');\n        if (coordinates.length === 2) {\n            points.push({ x: parseFloat(coordinates[0]), y: parseFloat(coordinates[1]) });\n        }\n        else {\n            // space as separators, take next entry as y coordinate\n            const next = i + 1;\n            if (next < pointList.length) {\n                points.push({ x: parseFloat(currentEntry), y: parseFloat(pointList[next]) });\n                // skip the next entry\n                i = next;\n            }\n        }\n    }\n    return points;\n}\n/**\n * Helper method to append the returned `SVGGElement` from Rough.js which\n * also post processes the result e.g. by applying the clip.\n */\nexport function appendSketchElement(context, element, sketchElement) {\n    let sketch = sketchElement;\n    // original element may have a clip-path\n    const sketchClipPathId = element.getAttribute(SKETCH_CLIP_ATTRIBUTE);\n    const applyPencilFilter = context.pencilFilter && element.tagName !== 'text';\n    // wrap it in another container to safely apply post-processing attributes,\n    // though avoid no-op <g> containers\n    const isPlainContainer = sketch.tagName === 'g' && sketch.attributes.length === 0;\n    if (!isPlainContainer && (sketchClipPathId || applyPencilFilter)) {\n        const g = document.createElementNS('http://www.w3.org/2000/svg', 'g');\n        g.appendChild(sketch);\n        sketch = g;\n    }\n    if (sketchClipPathId) {\n        sketch.setAttribute('clip-path', `url(#${sketchClipPathId})`);\n        element.removeAttribute(SKETCH_CLIP_ATTRIBUTE);\n    }\n    if (applyPencilFilter) {\n        sketch.setAttribute('filter', 'url(#pencilTextureFilter)');\n    }\n    context.svgSketch.appendChild(sketch);\n}\n/**\n * Helper method to sketch a path.\n * Paths with curves should utilize the preserverVertices option to avoid line disjoints.\n * For non-curved paths it looks nicer to actually allow these diskoints.\n * @returns Returns the sketched SVGElement\n */\nexport function sketchPath(context, path, options) {\n    if (PATH_CURVES_REGEX.test(path)) {\n        options = options ? Object.assign(Object.assign({}, options), { preserveVertices: true }) : { preserveVertices: true };\n    }\n    return context.rc.path(path, options);\n}\n/**\n * Helper funtion to sketch a DOM fragment.\n * Wraps the given element in an SVG and runs the processor on it to sketch the fragment.\n * The result is then unpacked and returned.\n */\nexport function sketchFragment(context, g, roughOverwrites) {\n    const proxySource = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n    proxySource.appendChild(g);\n    const proxyContext = Object.assign(Object.assign({}, context), { sourceSvg: proxySource, svgSketch: document.createElementNS('http://www.w3.org/2000/svg', 'svg'), roughConfig: Object.assign(Object.assign({}, context.roughConfig), roughOverwrites) });\n    proxyContext.processElement(proxyContext, g, null);\n    return reparentNodes(document.createElementNS('http://www.w3.org/2000/svg', 'g'), proxyContext.svgSketch);\n}\n/**\n * Measures the text in the context of the sketchSvg to account for inherited text\n * attributes.\n * The given text element must be a child of the svgSketch.\n */\nexport function measureText({ svgSketch, svgSketchIsInDOM }, text) {\n    const hiddenElementStyle = 'visibility:hidden;position:absolute;left:-100%;top-100%;';\n    const origStyle = svgSketch.getAttribute('style');\n    if (origStyle) {\n        svgSketch.setAttribute('style', `${origStyle};${hiddenElementStyle}`);\n    }\n    else {\n        svgSketch.setAttribute('style', hiddenElementStyle);\n    }\n    // the element must be in the DOM for getBBox\n    const body = document.body;\n    const previousParent = svgSketch.parentElement;\n    if (!svgSketchIsInDOM) {\n        body.appendChild(svgSketch);\n    }\n    const { width, height } = text.getBBox();\n    // make sure to not change the DOM hierarchy of the element\n    if (!svgSketchIsInDOM) {\n        body.removeChild(svgSketch);\n        if (previousParent) {\n            previousParent.appendChild(svgSketch);\n        }\n    }\n    if (origStyle) {\n        svgSketch.setAttribute('style', origStyle);\n    }\n    else {\n        svgSketch.removeAttribute('style');\n    }\n    return { w: width, h: height };\n}\n","import { getParentElement } from '../dom-helpers';\n/**\n * Returns the attribute value of an element under consideration\n * of inherited attributes from the `parentElement`.\n * @param attributeName Name of the attribute to look up\n * @param currentUseCtx Consider different DOM hierarchy for use elements\n * @return attribute value if it exists\n */\nexport function getEffectiveAttribute(context, element, attributeName, currentUseCtx) {\n    // getComputedStyle doesn't work for, e.g. <svg fill='rgba(...)'>\n    let attr;\n    if (!currentUseCtx) {\n        attr =\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            getComputedStyle(element)[attributeName] || element.getAttribute(attributeName);\n    }\n    else {\n        // use elements traverse a different parent-hierarchy, thus we cannot use getComputedStyle here\n        attr = element.getAttribute(attributeName);\n    }\n    if (!attr) {\n        let parent = getParentElement(element);\n        const useCtx = currentUseCtx;\n        let nextCtx = useCtx;\n        if (useCtx && useCtx.referenced === element) {\n            // switch context and traverse the use-element parent now\n            parent = useCtx.root;\n            nextCtx = useCtx.parentContext;\n        }\n        if (!parent || parent === context.sourceSvg) {\n            return;\n        }\n        return getEffectiveAttribute(context, parent, attributeName, nextCtx);\n    }\n    return attr;\n}\n/**\n * Traverses the given elements hierarchy bottom-up to determine its effective\n * opacity attribute.\n * @param currentUseCtx Consider different DOM hierarchy for use elements\n */\nexport function getEffectiveElementOpacity(context, element, currentOpacity, currentUseCtx) {\n    let attr;\n    if (!currentUseCtx) {\n        attr = getComputedStyle(element)['opacity'] || element.getAttribute('opacity');\n    }\n    else {\n        // use elements traverse a different parent-hierarchy, thus we cannot use getComputedStyle here\n        attr = element.getAttribute('opacity');\n    }\n    if (attr) {\n        let elementOpacity = 1;\n        if (attr.indexOf('%') !== -1) {\n            elementOpacity = Math.min(1, Math.max(0, parseFloat(attr.substring(0, attr.length - 1)) / 100));\n        }\n        else {\n            elementOpacity = Math.min(1, Math.max(0, parseFloat(attr)));\n        }\n        // combine opacities\n        currentOpacity *= elementOpacity;\n    }\n    // traverse upwards to combine parent opacities as well\n    let parent = getParentElement(element);\n    const useCtx = currentUseCtx;\n    let nextUseCtx = useCtx;\n    if (useCtx && useCtx.referenced === element) {\n        // switch context and traverse the use-element parent now\n        parent = useCtx.root;\n        nextUseCtx = useCtx.parentContext;\n    }\n    if (!parent || parent === context.sourceSvg) {\n        return currentOpacity;\n    }\n    return getEffectiveElementOpacity(context, parent, currentOpacity, nextUseCtx);\n}\n","import { getIdFromUrl, reparentNodes } from '../dom-helpers';\nimport { appendSketchElement, getDefsElement, sketchFragment } from '../utils';\nimport { getEffectiveAttribute } from './effective-attributes';\n/**\n * If the input element has a pattern stroke/fill, an additional element is added to the result,\n * which just provides the pattern storke/fill.\n * @param patternProxyCreator Should return the transformed `SVGElement` that holds the stroke/fill pattern.\n */\nexport function appendPatternPaint(context, sourceElement, patternProxyCreator) {\n    const { fillId, strokeId } = getPatternPaintIds(context, sourceElement);\n    if (fillId !== null || strokeId !== null) {\n        // the additional element that should provide the pattern\n        const patternProxy = patternProxyCreator();\n        patternProxy.setAttribute('fill', fillId !== null ? `url(#${fillId})` : 'none');\n        patternProxy.setAttribute('stroke', strokeId !== null ? `url(#${strokeId})` : 'none');\n        const strokeWidth = getEffectiveAttribute(context, sourceElement, 'stroke-width', context.useElementContext);\n        patternProxy.setAttribute('stroke-width', strokeWidth !== null && strokeWidth !== void 0 ? strokeWidth : '0');\n        // append the proxy\n        appendSketchElement(context, sourceElement, patternProxy);\n        // add the pattern defs\n        appendPatternDefsElement(context, fillId);\n        appendPatternDefsElement(context, strokeId);\n    }\n}\n/**\n * Returns the element's referenced fill and stroke pattern ids if there are any.\n */\nfunction getPatternPaintIds(context, element) {\n    function getPatternId(attributeName) {\n        const attr = element.getAttribute(attributeName);\n        if (attr && attr.indexOf('url') !== -1) {\n            const id = getIdFromUrl(attr);\n            if (id) {\n                const paint = context.idElements[id];\n                if (paint instanceof SVGPatternElement) {\n                    return id;\n                }\n            }\n        }\n        return null;\n    }\n    return { fillId: getPatternId('fill'), strokeId: getPatternId('stroke') };\n}\n/**\n * Obtains the pattern fill element from the source SVG and provides it as defs element\n * in the output sketch element if missing.\n */\nfunction appendPatternDefsElement(context, patternId) {\n    if (patternId === null) {\n        return;\n    }\n    const sketchDefs = getDefsElement(context);\n    const defId = `#${patternId}`;\n    if (!sketchDefs.querySelector(defId)) {\n        const sourceDefElement = context.sourceSvg.querySelector(defId);\n        if (sourceDefElement) {\n            if (!context.sketchPatterns) {\n                // just copy the pattern to the output\n                sketchDefs.appendChild(sourceDefElement.cloneNode(true));\n                return;\n            }\n            // create a proxy for the pattern element to be sketched separately\n            const patternElement = reparentNodes(document.createElementNS('http://www.w3.org/2000/svg', 'g'), sourceDefElement.cloneNode(true));\n            // sketch the pattern separately from the main processor loop\n            const sketchPattern = sketchFragment(context, patternElement, {\n                // patterns usually don't benefit from too crazy sketch values due to their base-size\n                fillStyle: 'solid',\n                roughness: 0.5 // TODO ideally this should scale with the pattern's size\n            });\n            // move the result into an copy of the original def element\n            const defElementRoot = sourceDefElement.cloneNode();\n            sketchDefs.appendChild(reparentNodes(defElementRoot, sketchPattern));\n        }\n    }\n}\n","// This file is autogenerated. It's used to publish ESM to npm.\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\n\n// https://github.com/bgrins/TinyColor\n// Brian Grinstead, MIT License\n\nvar trimLeft = /^\\s+/;\nvar trimRight = /\\s+$/;\nfunction tinycolor(color, opts) {\n  color = color ? color : \"\";\n  opts = opts || {};\n\n  // If input is already a tinycolor, return itself\n  if (color instanceof tinycolor) {\n    return color;\n  }\n  // If we are called as a function, call using new instead\n  if (!(this instanceof tinycolor)) {\n    return new tinycolor(color, opts);\n  }\n  var rgb = inputToRGB(color);\n  this._originalInput = color, this._r = rgb.r, this._g = rgb.g, this._b = rgb.b, this._a = rgb.a, this._roundA = Math.round(100 * this._a) / 100, this._format = opts.format || rgb.format;\n  this._gradientType = opts.gradientType;\n\n  // Don't let the range of [0,255] come back in [0,1].\n  // Potentially lose a little bit of precision here, but will fix issues where\n  // .5 gets interpreted as half of the total, instead of half of 1\n  // If it was supposed to be 128, this was already taken care of by `inputToRgb`\n  if (this._r < 1) this._r = Math.round(this._r);\n  if (this._g < 1) this._g = Math.round(this._g);\n  if (this._b < 1) this._b = Math.round(this._b);\n  this._ok = rgb.ok;\n}\ntinycolor.prototype = {\n  isDark: function isDark() {\n    return this.getBrightness() < 128;\n  },\n  isLight: function isLight() {\n    return !this.isDark();\n  },\n  isValid: function isValid() {\n    return this._ok;\n  },\n  getOriginalInput: function getOriginalInput() {\n    return this._originalInput;\n  },\n  getFormat: function getFormat() {\n    return this._format;\n  },\n  getAlpha: function getAlpha() {\n    return this._a;\n  },\n  getBrightness: function getBrightness() {\n    //http://www.w3.org/TR/AERT#color-contrast\n    var rgb = this.toRgb();\n    return (rgb.r * 299 + rgb.g * 587 + rgb.b * 114) / 1000;\n  },\n  getLuminance: function getLuminance() {\n    //http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef\n    var rgb = this.toRgb();\n    var RsRGB, GsRGB, BsRGB, R, G, B;\n    RsRGB = rgb.r / 255;\n    GsRGB = rgb.g / 255;\n    BsRGB = rgb.b / 255;\n    if (RsRGB <= 0.03928) R = RsRGB / 12.92;else R = Math.pow((RsRGB + 0.055) / 1.055, 2.4);\n    if (GsRGB <= 0.03928) G = GsRGB / 12.92;else G = Math.pow((GsRGB + 0.055) / 1.055, 2.4);\n    if (BsRGB <= 0.03928) B = BsRGB / 12.92;else B = Math.pow((BsRGB + 0.055) / 1.055, 2.4);\n    return 0.2126 * R + 0.7152 * G + 0.0722 * B;\n  },\n  setAlpha: function setAlpha(value) {\n    this._a = boundAlpha(value);\n    this._roundA = Math.round(100 * this._a) / 100;\n    return this;\n  },\n  toHsv: function toHsv() {\n    var hsv = rgbToHsv(this._r, this._g, this._b);\n    return {\n      h: hsv.h * 360,\n      s: hsv.s,\n      v: hsv.v,\n      a: this._a\n    };\n  },\n  toHsvString: function toHsvString() {\n    var hsv = rgbToHsv(this._r, this._g, this._b);\n    var h = Math.round(hsv.h * 360),\n      s = Math.round(hsv.s * 100),\n      v = Math.round(hsv.v * 100);\n    return this._a == 1 ? \"hsv(\" + h + \", \" + s + \"%, \" + v + \"%)\" : \"hsva(\" + h + \", \" + s + \"%, \" + v + \"%, \" + this._roundA + \")\";\n  },\n  toHsl: function toHsl() {\n    var hsl = rgbToHsl(this._r, this._g, this._b);\n    return {\n      h: hsl.h * 360,\n      s: hsl.s,\n      l: hsl.l,\n      a: this._a\n    };\n  },\n  toHslString: function toHslString() {\n    var hsl = rgbToHsl(this._r, this._g, this._b);\n    var h = Math.round(hsl.h * 360),\n      s = Math.round(hsl.s * 100),\n      l = Math.round(hsl.l * 100);\n    return this._a == 1 ? \"hsl(\" + h + \", \" + s + \"%, \" + l + \"%)\" : \"hsla(\" + h + \", \" + s + \"%, \" + l + \"%, \" + this._roundA + \")\";\n  },\n  toHex: function toHex(allow3Char) {\n    return rgbToHex(this._r, this._g, this._b, allow3Char);\n  },\n  toHexString: function toHexString(allow3Char) {\n    return \"#\" + this.toHex(allow3Char);\n  },\n  toHex8: function toHex8(allow4Char) {\n    return rgbaToHex(this._r, this._g, this._b, this._a, allow4Char);\n  },\n  toHex8String: function toHex8String(allow4Char) {\n    return \"#\" + this.toHex8(allow4Char);\n  },\n  toRgb: function toRgb() {\n    return {\n      r: Math.round(this._r),\n      g: Math.round(this._g),\n      b: Math.round(this._b),\n      a: this._a\n    };\n  },\n  toRgbString: function toRgbString() {\n    return this._a == 1 ? \"rgb(\" + Math.round(this._r) + \", \" + Math.round(this._g) + \", \" + Math.round(this._b) + \")\" : \"rgba(\" + Math.round(this._r) + \", \" + Math.round(this._g) + \", \" + Math.round(this._b) + \", \" + this._roundA + \")\";\n  },\n  toPercentageRgb: function toPercentageRgb() {\n    return {\n      r: Math.round(bound01(this._r, 255) * 100) + \"%\",\n      g: Math.round(bound01(this._g, 255) * 100) + \"%\",\n      b: Math.round(bound01(this._b, 255) * 100) + \"%\",\n      a: this._a\n    };\n  },\n  toPercentageRgbString: function toPercentageRgbString() {\n    return this._a == 1 ? \"rgb(\" + Math.round(bound01(this._r, 255) * 100) + \"%, \" + Math.round(bound01(this._g, 255) * 100) + \"%, \" + Math.round(bound01(this._b, 255) * 100) + \"%)\" : \"rgba(\" + Math.round(bound01(this._r, 255) * 100) + \"%, \" + Math.round(bound01(this._g, 255) * 100) + \"%, \" + Math.round(bound01(this._b, 255) * 100) + \"%, \" + this._roundA + \")\";\n  },\n  toName: function toName() {\n    if (this._a === 0) {\n      return \"transparent\";\n    }\n    if (this._a < 1) {\n      return false;\n    }\n    return hexNames[rgbToHex(this._r, this._g, this._b, true)] || false;\n  },\n  toFilter: function toFilter(secondColor) {\n    var hex8String = \"#\" + rgbaToArgbHex(this._r, this._g, this._b, this._a);\n    var secondHex8String = hex8String;\n    var gradientType = this._gradientType ? \"GradientType = 1, \" : \"\";\n    if (secondColor) {\n      var s = tinycolor(secondColor);\n      secondHex8String = \"#\" + rgbaToArgbHex(s._r, s._g, s._b, s._a);\n    }\n    return \"progid:DXImageTransform.Microsoft.gradient(\" + gradientType + \"startColorstr=\" + hex8String + \",endColorstr=\" + secondHex8String + \")\";\n  },\n  toString: function toString(format) {\n    var formatSet = !!format;\n    format = format || this._format;\n    var formattedString = false;\n    var hasAlpha = this._a < 1 && this._a >= 0;\n    var needsAlphaFormat = !formatSet && hasAlpha && (format === \"hex\" || format === \"hex6\" || format === \"hex3\" || format === \"hex4\" || format === \"hex8\" || format === \"name\");\n    if (needsAlphaFormat) {\n      // Special case for \"transparent\", all other non-alpha formats\n      // will return rgba when there is transparency.\n      if (format === \"name\" && this._a === 0) {\n        return this.toName();\n      }\n      return this.toRgbString();\n    }\n    if (format === \"rgb\") {\n      formattedString = this.toRgbString();\n    }\n    if (format === \"prgb\") {\n      formattedString = this.toPercentageRgbString();\n    }\n    if (format === \"hex\" || format === \"hex6\") {\n      formattedString = this.toHexString();\n    }\n    if (format === \"hex3\") {\n      formattedString = this.toHexString(true);\n    }\n    if (format === \"hex4\") {\n      formattedString = this.toHex8String(true);\n    }\n    if (format === \"hex8\") {\n      formattedString = this.toHex8String();\n    }\n    if (format === \"name\") {\n      formattedString = this.toName();\n    }\n    if (format === \"hsl\") {\n      formattedString = this.toHslString();\n    }\n    if (format === \"hsv\") {\n      formattedString = this.toHsvString();\n    }\n    return formattedString || this.toHexString();\n  },\n  clone: function clone() {\n    return tinycolor(this.toString());\n  },\n  _applyModification: function _applyModification(fn, args) {\n    var color = fn.apply(null, [this].concat([].slice.call(args)));\n    this._r = color._r;\n    this._g = color._g;\n    this._b = color._b;\n    this.setAlpha(color._a);\n    return this;\n  },\n  lighten: function lighten() {\n    return this._applyModification(_lighten, arguments);\n  },\n  brighten: function brighten() {\n    return this._applyModification(_brighten, arguments);\n  },\n  darken: function darken() {\n    return this._applyModification(_darken, arguments);\n  },\n  desaturate: function desaturate() {\n    return this._applyModification(_desaturate, arguments);\n  },\n  saturate: function saturate() {\n    return this._applyModification(_saturate, arguments);\n  },\n  greyscale: function greyscale() {\n    return this._applyModification(_greyscale, arguments);\n  },\n  spin: function spin() {\n    return this._applyModification(_spin, arguments);\n  },\n  _applyCombination: function _applyCombination(fn, args) {\n    return fn.apply(null, [this].concat([].slice.call(args)));\n  },\n  analogous: function analogous() {\n    return this._applyCombination(_analogous, arguments);\n  },\n  complement: function complement() {\n    return this._applyCombination(_complement, arguments);\n  },\n  monochromatic: function monochromatic() {\n    return this._applyCombination(_monochromatic, arguments);\n  },\n  splitcomplement: function splitcomplement() {\n    return this._applyCombination(_splitcomplement, arguments);\n  },\n  // Disabled until https://github.com/bgrins/TinyColor/issues/254\n  // polyad: function (number) {\n  //   return this._applyCombination(polyad, [number]);\n  // },\n  triad: function triad() {\n    return this._applyCombination(polyad, [3]);\n  },\n  tetrad: function tetrad() {\n    return this._applyCombination(polyad, [4]);\n  }\n};\n\n// If input is an object, force 1 into \"1.0\" to handle ratios properly\n// String input requires \"1.0\" as input, so 1 will be treated as 1\ntinycolor.fromRatio = function (color, opts) {\n  if (_typeof(color) == \"object\") {\n    var newColor = {};\n    for (var i in color) {\n      if (color.hasOwnProperty(i)) {\n        if (i === \"a\") {\n          newColor[i] = color[i];\n        } else {\n          newColor[i] = convertToPercentage(color[i]);\n        }\n      }\n    }\n    color = newColor;\n  }\n  return tinycolor(color, opts);\n};\n\n// Given a string or object, convert that input to RGB\n// Possible string inputs:\n//\n//     \"red\"\n//     \"#f00\" or \"f00\"\n//     \"#ff0000\" or \"ff0000\"\n//     \"#ff000000\" or \"ff000000\"\n//     \"rgb 255 0 0\" or \"rgb (255, 0, 0)\"\n//     \"rgb 1.0 0 0\" or \"rgb (1, 0, 0)\"\n//     \"rgba (255, 0, 0, 1)\" or \"rgba 255, 0, 0, 1\"\n//     \"rgba (1.0, 0, 0, 1)\" or \"rgba 1.0, 0, 0, 1\"\n//     \"hsl(0, 100%, 50%)\" or \"hsl 0 100% 50%\"\n//     \"hsla(0, 100%, 50%, 1)\" or \"hsla 0 100% 50%, 1\"\n//     \"hsv(0, 100%, 100%)\" or \"hsv 0 100% 100%\"\n//\nfunction inputToRGB(color) {\n  var rgb = {\n    r: 0,\n    g: 0,\n    b: 0\n  };\n  var a = 1;\n  var s = null;\n  var v = null;\n  var l = null;\n  var ok = false;\n  var format = false;\n  if (typeof color == \"string\") {\n    color = stringInputToObject(color);\n  }\n  if (_typeof(color) == \"object\") {\n    if (isValidCSSUnit(color.r) && isValidCSSUnit(color.g) && isValidCSSUnit(color.b)) {\n      rgb = rgbToRgb(color.r, color.g, color.b);\n      ok = true;\n      format = String(color.r).substr(-1) === \"%\" ? \"prgb\" : \"rgb\";\n    } else if (isValidCSSUnit(color.h) && isValidCSSUnit(color.s) && isValidCSSUnit(color.v)) {\n      s = convertToPercentage(color.s);\n      v = convertToPercentage(color.v);\n      rgb = hsvToRgb(color.h, s, v);\n      ok = true;\n      format = \"hsv\";\n    } else if (isValidCSSUnit(color.h) && isValidCSSUnit(color.s) && isValidCSSUnit(color.l)) {\n      s = convertToPercentage(color.s);\n      l = convertToPercentage(color.l);\n      rgb = hslToRgb(color.h, s, l);\n      ok = true;\n      format = \"hsl\";\n    }\n    if (color.hasOwnProperty(\"a\")) {\n      a = color.a;\n    }\n  }\n  a = boundAlpha(a);\n  return {\n    ok: ok,\n    format: color.format || format,\n    r: Math.min(255, Math.max(rgb.r, 0)),\n    g: Math.min(255, Math.max(rgb.g, 0)),\n    b: Math.min(255, Math.max(rgb.b, 0)),\n    a: a\n  };\n}\n\n// Conversion Functions\n// --------------------\n\n// `rgbToHsl`, `rgbToHsv`, `hslToRgb`, `hsvToRgb` modified from:\n// <http://mjijackson.com/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript>\n\n// `rgbToRgb`\n// Handle bounds / percentage checking to conform to CSS color spec\n// <http://www.w3.org/TR/css3-color/>\n// *Assumes:* r, g, b in [0, 255] or [0, 1]\n// *Returns:* { r, g, b } in [0, 255]\nfunction rgbToRgb(r, g, b) {\n  return {\n    r: bound01(r, 255) * 255,\n    g: bound01(g, 255) * 255,\n    b: bound01(b, 255) * 255\n  };\n}\n\n// `rgbToHsl`\n// Converts an RGB color value to HSL.\n// *Assumes:* r, g, and b are contained in [0, 255] or [0, 1]\n// *Returns:* { h, s, l } in [0,1]\nfunction rgbToHsl(r, g, b) {\n  r = bound01(r, 255);\n  g = bound01(g, 255);\n  b = bound01(b, 255);\n  var max = Math.max(r, g, b),\n    min = Math.min(r, g, b);\n  var h,\n    s,\n    l = (max + min) / 2;\n  if (max == min) {\n    h = s = 0; // achromatic\n  } else {\n    var d = max - min;\n    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n    switch (max) {\n      case r:\n        h = (g - b) / d + (g < b ? 6 : 0);\n        break;\n      case g:\n        h = (b - r) / d + 2;\n        break;\n      case b:\n        h = (r - g) / d + 4;\n        break;\n    }\n    h /= 6;\n  }\n  return {\n    h: h,\n    s: s,\n    l: l\n  };\n}\n\n// `hslToRgb`\n// Converts an HSL color value to RGB.\n// *Assumes:* h is contained in [0, 1] or [0, 360] and s and l are contained [0, 1] or [0, 100]\n// *Returns:* { r, g, b } in the set [0, 255]\nfunction hslToRgb(h, s, l) {\n  var r, g, b;\n  h = bound01(h, 360);\n  s = bound01(s, 100);\n  l = bound01(l, 100);\n  function hue2rgb(p, q, t) {\n    if (t < 0) t += 1;\n    if (t > 1) t -= 1;\n    if (t < 1 / 6) return p + (q - p) * 6 * t;\n    if (t < 1 / 2) return q;\n    if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\n    return p;\n  }\n  if (s === 0) {\n    r = g = b = l; // achromatic\n  } else {\n    var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n    var p = 2 * l - q;\n    r = hue2rgb(p, q, h + 1 / 3);\n    g = hue2rgb(p, q, h);\n    b = hue2rgb(p, q, h - 1 / 3);\n  }\n  return {\n    r: r * 255,\n    g: g * 255,\n    b: b * 255\n  };\n}\n\n// `rgbToHsv`\n// Converts an RGB color value to HSV\n// *Assumes:* r, g, and b are contained in the set [0, 255] or [0, 1]\n// *Returns:* { h, s, v } in [0,1]\nfunction rgbToHsv(r, g, b) {\n  r = bound01(r, 255);\n  g = bound01(g, 255);\n  b = bound01(b, 255);\n  var max = Math.max(r, g, b),\n    min = Math.min(r, g, b);\n  var h,\n    s,\n    v = max;\n  var d = max - min;\n  s = max === 0 ? 0 : d / max;\n  if (max == min) {\n    h = 0; // achromatic\n  } else {\n    switch (max) {\n      case r:\n        h = (g - b) / d + (g < b ? 6 : 0);\n        break;\n      case g:\n        h = (b - r) / d + 2;\n        break;\n      case b:\n        h = (r - g) / d + 4;\n        break;\n    }\n    h /= 6;\n  }\n  return {\n    h: h,\n    s: s,\n    v: v\n  };\n}\n\n// `hsvToRgb`\n// Converts an HSV color value to RGB.\n// *Assumes:* h is contained in [0, 1] or [0, 360] and s and v are contained in [0, 1] or [0, 100]\n// *Returns:* { r, g, b } in the set [0, 255]\nfunction hsvToRgb(h, s, v) {\n  h = bound01(h, 360) * 6;\n  s = bound01(s, 100);\n  v = bound01(v, 100);\n  var i = Math.floor(h),\n    f = h - i,\n    p = v * (1 - s),\n    q = v * (1 - f * s),\n    t = v * (1 - (1 - f) * s),\n    mod = i % 6,\n    r = [v, q, p, p, t, v][mod],\n    g = [t, v, v, q, p, p][mod],\n    b = [p, p, t, v, v, q][mod];\n  return {\n    r: r * 255,\n    g: g * 255,\n    b: b * 255\n  };\n}\n\n// `rgbToHex`\n// Converts an RGB color to hex\n// Assumes r, g, and b are contained in the set [0, 255]\n// Returns a 3 or 6 character hex\nfunction rgbToHex(r, g, b, allow3Char) {\n  var hex = [pad2(Math.round(r).toString(16)), pad2(Math.round(g).toString(16)), pad2(Math.round(b).toString(16))];\n\n  // Return a 3 character hex if possible\n  if (allow3Char && hex[0].charAt(0) == hex[0].charAt(1) && hex[1].charAt(0) == hex[1].charAt(1) && hex[2].charAt(0) == hex[2].charAt(1)) {\n    return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0);\n  }\n  return hex.join(\"\");\n}\n\n// `rgbaToHex`\n// Converts an RGBA color plus alpha transparency to hex\n// Assumes r, g, b are contained in the set [0, 255] and\n// a in [0, 1]. Returns a 4 or 8 character rgba hex\nfunction rgbaToHex(r, g, b, a, allow4Char) {\n  var hex = [pad2(Math.round(r).toString(16)), pad2(Math.round(g).toString(16)), pad2(Math.round(b).toString(16)), pad2(convertDecimalToHex(a))];\n\n  // Return a 4 character hex if possible\n  if (allow4Char && hex[0].charAt(0) == hex[0].charAt(1) && hex[1].charAt(0) == hex[1].charAt(1) && hex[2].charAt(0) == hex[2].charAt(1) && hex[3].charAt(0) == hex[3].charAt(1)) {\n    return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0) + hex[3].charAt(0);\n  }\n  return hex.join(\"\");\n}\n\n// `rgbaToArgbHex`\n// Converts an RGBA color to an ARGB Hex8 string\n// Rarely used, but required for \"toFilter()\"\nfunction rgbaToArgbHex(r, g, b, a) {\n  var hex = [pad2(convertDecimalToHex(a)), pad2(Math.round(r).toString(16)), pad2(Math.round(g).toString(16)), pad2(Math.round(b).toString(16))];\n  return hex.join(\"\");\n}\n\n// `equals`\n// Can be called with any tinycolor input\ntinycolor.equals = function (color1, color2) {\n  if (!color1 || !color2) return false;\n  return tinycolor(color1).toRgbString() == tinycolor(color2).toRgbString();\n};\ntinycolor.random = function () {\n  return tinycolor.fromRatio({\n    r: Math.random(),\n    g: Math.random(),\n    b: Math.random()\n  });\n};\n\n// Modification Functions\n// ----------------------\n// Thanks to less.js for some of the basics here\n// <https://github.com/cloudhead/less.js/blob/master/lib/less/functions.js>\n\nfunction _desaturate(color, amount) {\n  amount = amount === 0 ? 0 : amount || 10;\n  var hsl = tinycolor(color).toHsl();\n  hsl.s -= amount / 100;\n  hsl.s = clamp01(hsl.s);\n  return tinycolor(hsl);\n}\nfunction _saturate(color, amount) {\n  amount = amount === 0 ? 0 : amount || 10;\n  var hsl = tinycolor(color).toHsl();\n  hsl.s += amount / 100;\n  hsl.s = clamp01(hsl.s);\n  return tinycolor(hsl);\n}\nfunction _greyscale(color) {\n  return tinycolor(color).desaturate(100);\n}\nfunction _lighten(color, amount) {\n  amount = amount === 0 ? 0 : amount || 10;\n  var hsl = tinycolor(color).toHsl();\n  hsl.l += amount / 100;\n  hsl.l = clamp01(hsl.l);\n  return tinycolor(hsl);\n}\nfunction _brighten(color, amount) {\n  amount = amount === 0 ? 0 : amount || 10;\n  var rgb = tinycolor(color).toRgb();\n  rgb.r = Math.max(0, Math.min(255, rgb.r - Math.round(255 * -(amount / 100))));\n  rgb.g = Math.max(0, Math.min(255, rgb.g - Math.round(255 * -(amount / 100))));\n  rgb.b = Math.max(0, Math.min(255, rgb.b - Math.round(255 * -(amount / 100))));\n  return tinycolor(rgb);\n}\nfunction _darken(color, amount) {\n  amount = amount === 0 ? 0 : amount || 10;\n  var hsl = tinycolor(color).toHsl();\n  hsl.l -= amount / 100;\n  hsl.l = clamp01(hsl.l);\n  return tinycolor(hsl);\n}\n\n// Spin takes a positive or negative amount within [-360, 360] indicating the change of hue.\n// Values outside of this range will be wrapped into this range.\nfunction _spin(color, amount) {\n  var hsl = tinycolor(color).toHsl();\n  var hue = (hsl.h + amount) % 360;\n  hsl.h = hue < 0 ? 360 + hue : hue;\n  return tinycolor(hsl);\n}\n\n// Combination Functions\n// ---------------------\n// Thanks to jQuery xColor for some of the ideas behind these\n// <https://github.com/infusion/jQuery-xcolor/blob/master/jquery.xcolor.js>\n\nfunction _complement(color) {\n  var hsl = tinycolor(color).toHsl();\n  hsl.h = (hsl.h + 180) % 360;\n  return tinycolor(hsl);\n}\nfunction polyad(color, number) {\n  if (isNaN(number) || number <= 0) {\n    throw new Error(\"Argument to polyad must be a positive number\");\n  }\n  var hsl = tinycolor(color).toHsl();\n  var result = [tinycolor(color)];\n  var step = 360 / number;\n  for (var i = 1; i < number; i++) {\n    result.push(tinycolor({\n      h: (hsl.h + i * step) % 360,\n      s: hsl.s,\n      l: hsl.l\n    }));\n  }\n  return result;\n}\nfunction _splitcomplement(color) {\n  var hsl = tinycolor(color).toHsl();\n  var h = hsl.h;\n  return [tinycolor(color), tinycolor({\n    h: (h + 72) % 360,\n    s: hsl.s,\n    l: hsl.l\n  }), tinycolor({\n    h: (h + 216) % 360,\n    s: hsl.s,\n    l: hsl.l\n  })];\n}\nfunction _analogous(color, results, slices) {\n  results = results || 6;\n  slices = slices || 30;\n  var hsl = tinycolor(color).toHsl();\n  var part = 360 / slices;\n  var ret = [tinycolor(color)];\n  for (hsl.h = (hsl.h - (part * results >> 1) + 720) % 360; --results;) {\n    hsl.h = (hsl.h + part) % 360;\n    ret.push(tinycolor(hsl));\n  }\n  return ret;\n}\nfunction _monochromatic(color, results) {\n  results = results || 6;\n  var hsv = tinycolor(color).toHsv();\n  var h = hsv.h,\n    s = hsv.s,\n    v = hsv.v;\n  var ret = [];\n  var modification = 1 / results;\n  while (results--) {\n    ret.push(tinycolor({\n      h: h,\n      s: s,\n      v: v\n    }));\n    v = (v + modification) % 1;\n  }\n  return ret;\n}\n\n// Utility Functions\n// ---------------------\n\ntinycolor.mix = function (color1, color2, amount) {\n  amount = amount === 0 ? 0 : amount || 50;\n  var rgb1 = tinycolor(color1).toRgb();\n  var rgb2 = tinycolor(color2).toRgb();\n  var p = amount / 100;\n  var rgba = {\n    r: (rgb2.r - rgb1.r) * p + rgb1.r,\n    g: (rgb2.g - rgb1.g) * p + rgb1.g,\n    b: (rgb2.b - rgb1.b) * p + rgb1.b,\n    a: (rgb2.a - rgb1.a) * p + rgb1.a\n  };\n  return tinycolor(rgba);\n};\n\n// Readability Functions\n// ---------------------\n// <http://www.w3.org/TR/2008/REC-WCAG20-20081211/#contrast-ratiodef (WCAG Version 2)\n\n// `contrast`\n// Analyze the 2 colors and returns the color contrast defined by (WCAG Version 2)\ntinycolor.readability = function (color1, color2) {\n  var c1 = tinycolor(color1);\n  var c2 = tinycolor(color2);\n  return (Math.max(c1.getLuminance(), c2.getLuminance()) + 0.05) / (Math.min(c1.getLuminance(), c2.getLuminance()) + 0.05);\n};\n\n// `isReadable`\n// Ensure that foreground and background color combinations meet WCAG2 guidelines.\n// The third argument is an optional Object.\n//      the 'level' property states 'AA' or 'AAA' - if missing or invalid, it defaults to 'AA';\n//      the 'size' property states 'large' or 'small' - if missing or invalid, it defaults to 'small'.\n// If the entire object is absent, isReadable defaults to {level:\"AA\",size:\"small\"}.\n\n// *Example*\n//    tinycolor.isReadable(\"#000\", \"#111\") => false\n//    tinycolor.isReadable(\"#000\", \"#111\",{level:\"AA\",size:\"large\"}) => false\ntinycolor.isReadable = function (color1, color2, wcag2) {\n  var readability = tinycolor.readability(color1, color2);\n  var wcag2Parms, out;\n  out = false;\n  wcag2Parms = validateWCAG2Parms(wcag2);\n  switch (wcag2Parms.level + wcag2Parms.size) {\n    case \"AAsmall\":\n    case \"AAAlarge\":\n      out = readability >= 4.5;\n      break;\n    case \"AAlarge\":\n      out = readability >= 3;\n      break;\n    case \"AAAsmall\":\n      out = readability >= 7;\n      break;\n  }\n  return out;\n};\n\n// `mostReadable`\n// Given a base color and a list of possible foreground or background\n// colors for that base, returns the most readable color.\n// Optionally returns Black or White if the most readable color is unreadable.\n// *Example*\n//    tinycolor.mostReadable(tinycolor.mostReadable(\"#123\", [\"#124\", \"#125\"],{includeFallbackColors:false}).toHexString(); // \"#112255\"\n//    tinycolor.mostReadable(tinycolor.mostReadable(\"#123\", [\"#124\", \"#125\"],{includeFallbackColors:true}).toHexString();  // \"#ffffff\"\n//    tinycolor.mostReadable(\"#a8015a\", [\"#faf3f3\"],{includeFallbackColors:true,level:\"AAA\",size:\"large\"}).toHexString(); // \"#faf3f3\"\n//    tinycolor.mostReadable(\"#a8015a\", [\"#faf3f3\"],{includeFallbackColors:true,level:\"AAA\",size:\"small\"}).toHexString(); // \"#ffffff\"\ntinycolor.mostReadable = function (baseColor, colorList, args) {\n  var bestColor = null;\n  var bestScore = 0;\n  var readability;\n  var includeFallbackColors, level, size;\n  args = args || {};\n  includeFallbackColors = args.includeFallbackColors;\n  level = args.level;\n  size = args.size;\n  for (var i = 0; i < colorList.length; i++) {\n    readability = tinycolor.readability(baseColor, colorList[i]);\n    if (readability > bestScore) {\n      bestScore = readability;\n      bestColor = tinycolor(colorList[i]);\n    }\n  }\n  if (tinycolor.isReadable(baseColor, bestColor, {\n    level: level,\n    size: size\n  }) || !includeFallbackColors) {\n    return bestColor;\n  } else {\n    args.includeFallbackColors = false;\n    return tinycolor.mostReadable(baseColor, [\"#fff\", \"#000\"], args);\n  }\n};\n\n// Big List of Colors\n// ------------------\n// <https://www.w3.org/TR/css-color-4/#named-colors>\nvar names = tinycolor.names = {\n  aliceblue: \"f0f8ff\",\n  antiquewhite: \"faebd7\",\n  aqua: \"0ff\",\n  aquamarine: \"7fffd4\",\n  azure: \"f0ffff\",\n  beige: \"f5f5dc\",\n  bisque: \"ffe4c4\",\n  black: \"000\",\n  blanchedalmond: \"ffebcd\",\n  blue: \"00f\",\n  blueviolet: \"8a2be2\",\n  brown: \"a52a2a\",\n  burlywood: \"deb887\",\n  burntsienna: \"ea7e5d\",\n  cadetblue: \"5f9ea0\",\n  chartreuse: \"7fff00\",\n  chocolate: \"d2691e\",\n  coral: \"ff7f50\",\n  cornflowerblue: \"6495ed\",\n  cornsilk: \"fff8dc\",\n  crimson: \"dc143c\",\n  cyan: \"0ff\",\n  darkblue: \"00008b\",\n  darkcyan: \"008b8b\",\n  darkgoldenrod: \"b8860b\",\n  darkgray: \"a9a9a9\",\n  darkgreen: \"006400\",\n  darkgrey: \"a9a9a9\",\n  darkkhaki: \"bdb76b\",\n  darkmagenta: \"8b008b\",\n  darkolivegreen: \"556b2f\",\n  darkorange: \"ff8c00\",\n  darkorchid: \"9932cc\",\n  darkred: \"8b0000\",\n  darksalmon: \"e9967a\",\n  darkseagreen: \"8fbc8f\",\n  darkslateblue: \"483d8b\",\n  darkslategray: \"2f4f4f\",\n  darkslategrey: \"2f4f4f\",\n  darkturquoise: \"00ced1\",\n  darkviolet: \"9400d3\",\n  deeppink: \"ff1493\",\n  deepskyblue: \"00bfff\",\n  dimgray: \"696969\",\n  dimgrey: \"696969\",\n  dodgerblue: \"1e90ff\",\n  firebrick: \"b22222\",\n  floralwhite: \"fffaf0\",\n  forestgreen: \"228b22\",\n  fuchsia: \"f0f\",\n  gainsboro: \"dcdcdc\",\n  ghostwhite: \"f8f8ff\",\n  gold: \"ffd700\",\n  goldenrod: \"daa520\",\n  gray: \"808080\",\n  green: \"008000\",\n  greenyellow: \"adff2f\",\n  grey: \"808080\",\n  honeydew: \"f0fff0\",\n  hotpink: \"ff69b4\",\n  indianred: \"cd5c5c\",\n  indigo: \"4b0082\",\n  ivory: \"fffff0\",\n  khaki: \"f0e68c\",\n  lavender: \"e6e6fa\",\n  lavenderblush: \"fff0f5\",\n  lawngreen: \"7cfc00\",\n  lemonchiffon: \"fffacd\",\n  lightblue: \"add8e6\",\n  lightcoral: \"f08080\",\n  lightcyan: \"e0ffff\",\n  lightgoldenrodyellow: \"fafad2\",\n  lightgray: \"d3d3d3\",\n  lightgreen: \"90ee90\",\n  lightgrey: \"d3d3d3\",\n  lightpink: \"ffb6c1\",\n  lightsalmon: \"ffa07a\",\n  lightseagreen: \"20b2aa\",\n  lightskyblue: \"87cefa\",\n  lightslategray: \"789\",\n  lightslategrey: \"789\",\n  lightsteelblue: \"b0c4de\",\n  lightyellow: \"ffffe0\",\n  lime: \"0f0\",\n  limegreen: \"32cd32\",\n  linen: \"faf0e6\",\n  magenta: \"f0f\",\n  maroon: \"800000\",\n  mediumaquamarine: \"66cdaa\",\n  mediumblue: \"0000cd\",\n  mediumorchid: \"ba55d3\",\n  mediumpurple: \"9370db\",\n  mediumseagreen: \"3cb371\",\n  mediumslateblue: \"7b68ee\",\n  mediumspringgreen: \"00fa9a\",\n  mediumturquoise: \"48d1cc\",\n  mediumvioletred: \"c71585\",\n  midnightblue: \"191970\",\n  mintcream: \"f5fffa\",\n  mistyrose: \"ffe4e1\",\n  moccasin: \"ffe4b5\",\n  navajowhite: \"ffdead\",\n  navy: \"000080\",\n  oldlace: \"fdf5e6\",\n  olive: \"808000\",\n  olivedrab: \"6b8e23\",\n  orange: \"ffa500\",\n  orangered: \"ff4500\",\n  orchid: \"da70d6\",\n  palegoldenrod: \"eee8aa\",\n  palegreen: \"98fb98\",\n  paleturquoise: \"afeeee\",\n  palevioletred: \"db7093\",\n  papayawhip: \"ffefd5\",\n  peachpuff: \"ffdab9\",\n  peru: \"cd853f\",\n  pink: \"ffc0cb\",\n  plum: \"dda0dd\",\n  powderblue: \"b0e0e6\",\n  purple: \"800080\",\n  rebeccapurple: \"663399\",\n  red: \"f00\",\n  rosybrown: \"bc8f8f\",\n  royalblue: \"4169e1\",\n  saddlebrown: \"8b4513\",\n  salmon: \"fa8072\",\n  sandybrown: \"f4a460\",\n  seagreen: \"2e8b57\",\n  seashell: \"fff5ee\",\n  sienna: \"a0522d\",\n  silver: \"c0c0c0\",\n  skyblue: \"87ceeb\",\n  slateblue: \"6a5acd\",\n  slategray: \"708090\",\n  slategrey: \"708090\",\n  snow: \"fffafa\",\n  springgreen: \"00ff7f\",\n  steelblue: \"4682b4\",\n  tan: \"d2b48c\",\n  teal: \"008080\",\n  thistle: \"d8bfd8\",\n  tomato: \"ff6347\",\n  turquoise: \"40e0d0\",\n  violet: \"ee82ee\",\n  wheat: \"f5deb3\",\n  white: \"fff\",\n  whitesmoke: \"f5f5f5\",\n  yellow: \"ff0\",\n  yellowgreen: \"9acd32\"\n};\n\n// Make it easy to access colors via `hexNames[hex]`\nvar hexNames = tinycolor.hexNames = flip(names);\n\n// Utilities\n// ---------\n\n// `{ 'name1': 'val1' }` becomes `{ 'val1': 'name1' }`\nfunction flip(o) {\n  var flipped = {};\n  for (var i in o) {\n    if (o.hasOwnProperty(i)) {\n      flipped[o[i]] = i;\n    }\n  }\n  return flipped;\n}\n\n// Return a valid alpha value [0,1] with all invalid values being set to 1\nfunction boundAlpha(a) {\n  a = parseFloat(a);\n  if (isNaN(a) || a < 0 || a > 1) {\n    a = 1;\n  }\n  return a;\n}\n\n// Take input from [0, n] and return it as [0, 1]\nfunction bound01(n, max) {\n  if (isOnePointZero(n)) n = \"100%\";\n  var processPercent = isPercentage(n);\n  n = Math.min(max, Math.max(0, parseFloat(n)));\n\n  // Automatically convert percentage into number\n  if (processPercent) {\n    n = parseInt(n * max, 10) / 100;\n  }\n\n  // Handle floating point rounding errors\n  if (Math.abs(n - max) < 0.000001) {\n    return 1;\n  }\n\n  // Convert into [0, 1] range if it isn't already\n  return n % max / parseFloat(max);\n}\n\n// Force a number between 0 and 1\nfunction clamp01(val) {\n  return Math.min(1, Math.max(0, val));\n}\n\n// Parse a base-16 hex value into a base-10 integer\nfunction parseIntFromHex(val) {\n  return parseInt(val, 16);\n}\n\n// Need to handle 1.0 as 100%, since once it is a number, there is no difference between it and 1\n// <http://stackoverflow.com/questions/7422072/javascript-how-to-detect-number-as-a-decimal-including-1-0>\nfunction isOnePointZero(n) {\n  return typeof n == \"string\" && n.indexOf(\".\") != -1 && parseFloat(n) === 1;\n}\n\n// Check to see if string passed in is a percentage\nfunction isPercentage(n) {\n  return typeof n === \"string\" && n.indexOf(\"%\") != -1;\n}\n\n// Force a hex value to have 2 characters\nfunction pad2(c) {\n  return c.length == 1 ? \"0\" + c : \"\" + c;\n}\n\n// Replace a decimal with it's percentage value\nfunction convertToPercentage(n) {\n  if (n <= 1) {\n    n = n * 100 + \"%\";\n  }\n  return n;\n}\n\n// Converts a decimal to a hex value\nfunction convertDecimalToHex(d) {\n  return Math.round(parseFloat(d) * 255).toString(16);\n}\n// Converts a hex value to a decimal\nfunction convertHexToDecimal(h) {\n  return parseIntFromHex(h) / 255;\n}\nvar matchers = function () {\n  // <http://www.w3.org/TR/css3-values/#integers>\n  var CSS_INTEGER = \"[-\\\\+]?\\\\d+%?\";\n\n  // <http://www.w3.org/TR/css3-values/#number-value>\n  var CSS_NUMBER = \"[-\\\\+]?\\\\d*\\\\.\\\\d+%?\";\n\n  // Allow positive/negative integer/number.  Don't capture the either/or, just the entire outcome.\n  var CSS_UNIT = \"(?:\" + CSS_NUMBER + \")|(?:\" + CSS_INTEGER + \")\";\n\n  // Actual matching.\n  // Parentheses and commas are optional, but not required.\n  // Whitespace can take the place of commas or opening paren\n  var PERMISSIVE_MATCH3 = \"[\\\\s|\\\\(]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")\\\\s*\\\\)?\";\n  var PERMISSIVE_MATCH4 = \"[\\\\s|\\\\(]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")\\\\s*\\\\)?\";\n  return {\n    CSS_UNIT: new RegExp(CSS_UNIT),\n    rgb: new RegExp(\"rgb\" + PERMISSIVE_MATCH3),\n    rgba: new RegExp(\"rgba\" + PERMISSIVE_MATCH4),\n    hsl: new RegExp(\"hsl\" + PERMISSIVE_MATCH3),\n    hsla: new RegExp(\"hsla\" + PERMISSIVE_MATCH4),\n    hsv: new RegExp(\"hsv\" + PERMISSIVE_MATCH3),\n    hsva: new RegExp(\"hsva\" + PERMISSIVE_MATCH4),\n    hex3: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n    hex6: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,\n    hex4: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n    hex8: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/\n  };\n}();\n\n// `isValidCSSUnit`\n// Take in a single string / number and check to see if it looks like a CSS unit\n// (see `matchers` above for definition).\nfunction isValidCSSUnit(color) {\n  return !!matchers.CSS_UNIT.exec(color);\n}\n\n// `stringInputToObject`\n// Permissive string parsing.  Take in a number of formats, and output an object\n// based on detected format.  Returns `{ r, g, b }` or `{ h, s, l }` or `{ h, s, v}`\nfunction stringInputToObject(color) {\n  color = color.replace(trimLeft, \"\").replace(trimRight, \"\").toLowerCase();\n  var named = false;\n  if (names[color]) {\n    color = names[color];\n    named = true;\n  } else if (color == \"transparent\") {\n    return {\n      r: 0,\n      g: 0,\n      b: 0,\n      a: 0,\n      format: \"name\"\n    };\n  }\n\n  // Try to match string input using regular expressions.\n  // Keep most of the number bounding out of this function - don't worry about [0,1] or [0,100] or [0,360]\n  // Just return an object and let the conversion functions handle that.\n  // This way the result will be the same whether the tinycolor is initialized with string or object.\n  var match;\n  if (match = matchers.rgb.exec(color)) {\n    return {\n      r: match[1],\n      g: match[2],\n      b: match[3]\n    };\n  }\n  if (match = matchers.rgba.exec(color)) {\n    return {\n      r: match[1],\n      g: match[2],\n      b: match[3],\n      a: match[4]\n    };\n  }\n  if (match = matchers.hsl.exec(color)) {\n    return {\n      h: match[1],\n      s: match[2],\n      l: match[3]\n    };\n  }\n  if (match = matchers.hsla.exec(color)) {\n    return {\n      h: match[1],\n      s: match[2],\n      l: match[3],\n      a: match[4]\n    };\n  }\n  if (match = matchers.hsv.exec(color)) {\n    return {\n      h: match[1],\n      s: match[2],\n      v: match[3]\n    };\n  }\n  if (match = matchers.hsva.exec(color)) {\n    return {\n      h: match[1],\n      s: match[2],\n      v: match[3],\n      a: match[4]\n    };\n  }\n  if (match = matchers.hex8.exec(color)) {\n    return {\n      r: parseIntFromHex(match[1]),\n      g: parseIntFromHex(match[2]),\n      b: parseIntFromHex(match[3]),\n      a: convertHexToDecimal(match[4]),\n      format: named ? \"name\" : \"hex8\"\n    };\n  }\n  if (match = matchers.hex6.exec(color)) {\n    return {\n      r: parseIntFromHex(match[1]),\n      g: parseIntFromHex(match[2]),\n      b: parseIntFromHex(match[3]),\n      format: named ? \"name\" : \"hex\"\n    };\n  }\n  if (match = matchers.hex4.exec(color)) {\n    return {\n      r: parseIntFromHex(match[1] + \"\" + match[1]),\n      g: parseIntFromHex(match[2] + \"\" + match[2]),\n      b: parseIntFromHex(match[3] + \"\" + match[3]),\n      a: convertHexToDecimal(match[4] + \"\" + match[4]),\n      format: named ? \"name\" : \"hex8\"\n    };\n  }\n  if (match = matchers.hex3.exec(color)) {\n    return {\n      r: parseIntFromHex(match[1] + \"\" + match[1]),\n      g: parseIntFromHex(match[2] + \"\" + match[2]),\n      b: parseIntFromHex(match[3] + \"\" + match[3]),\n      format: named ? \"name\" : \"hex\"\n    };\n  }\n  return false;\n}\nfunction validateWCAG2Parms(parms) {\n  // return valid WCAG2 parms for isReadable.\n  // If input parms are invalid, return {\"level\":\"AA\", \"size\":\"small\"}\n  var level, size;\n  parms = parms || {\n    level: \"AA\",\n    size: \"small\"\n  };\n  level = (parms.level || \"AA\").toUpperCase();\n  size = (parms.size || \"small\").toLowerCase();\n  if (level !== \"AA\" && level !== \"AAA\") {\n    level = \"AA\";\n  }\n  if (size !== \"small\" && size !== \"large\") {\n    size = \"small\";\n  }\n  return {\n    level: level,\n    size: size\n  };\n}\n\nexport { tinycolor as default };\n","import { getParentElement } from './dom-helpers';\nimport { getEffectiveAttribute } from './styles/effective-attributes';\n/**\n * Dimension parsing regexp.\n *\n * https://www.w3.org/TR/css3-values/#numbers\n * \"a number is either an integer, or zero or more decimal digits\n * followed by a dot (.) followed by one or more decimal digits and\n * optionally an exponent composed of \"e\" or \"E\" and an integer.\"\n *\n * Don't forget the signs though...\n * => ([+-]?(?:\\d+|\\d*\\.\\d+(?:[eE][+-]?\\d+)?))\n *\n * To get the unit, itself, just allow any alphabetic sequence and the '%' char.\n * => ([a-z]*|%)\n */\nconst DIMENSION_REGEX = /^([+-]?(?:\\d+|\\d*\\.\\d+(?:[eE][+-]?\\d+)?))([a-z]*|%)$/;\n/**\n * Commonly used dpi for unit conversion.\n */\nconst DPI = 96;\n/**\n * Conversion factors for absolute units.\n * https://developer.mozilla.org/en-US/docs/web/css/length\n */\nconst ABSOLUTE_UNITS = {\n    in: DPI,\n    cm: DPI / 2.54,\n    mm: DPI / 25.4,\n    pt: DPI / 72,\n    pc: DPI / 6,\n    px: 1\n};\n// pre-calculated factor for % conversion\nconst SQRT2 = Math.sqrt(2);\n/**\n * Converts the given string to px unit. May be either a\n * [length](https://developer.mozilla.org/de/docs/Web/SVG/Content_type#Length)\n * or a [percentage](https://developer.mozilla.org/de/docs/Web/SVG/Content_type#Percentage).\n * @returns The value in px unit\n */\nexport function convertToPixelUnit(context, element, dimensionValue, attribute) {\n    const { value, unit } = parseDimension(dimensionValue);\n    if (isAbsoluteUnit(unit)) {\n        return absToPixel(value, unit);\n    }\n    return relToPixel(context, element, attribute, value, unit);\n}\n/**\n * Parses the given string and returns a dimension, which is a\n * [number](https://www.w3.org/TR/css3-values/#numbers) followed\n * by a unit identifier.\n */\nfunction parseDimension(dimension) {\n    const match = dimension.match(DIMENSION_REGEX);\n    if (match === null || match.length !== 3) {\n        throw new Error(`Cannot parse dimension: ${dimension}`);\n    }\n    return { value: parseFloat(match[1]), unit: match[2].toLowerCase() || 'px' };\n}\n/**\n * unit-css converts per HTML spec, which is differently for percentages in SVG\n * https://www.w3.org/TR/SVG/coords.html#Units\n * https://oreillymedia.github.io/Using_SVG/guide/units.html\n * @param percentage [0, 100]\n * @param viewBox The coordinate system to evaluate the percentage against\n */\nfunction percentageToPixel(attribute, percentage, { w: width, h: height } = { w: 0, h: 0 }) {\n    const fraction = percentage / 100;\n    // x and y are relative to the coordinate system's width or height\n    if (attribute === 'x') {\n        return fraction * width;\n    }\n    if (attribute === 'y') {\n        return fraction * height;\n    }\n    return fraction * (Math.sqrt(width * width + height * height) / SQRT2);\n}\n/**\n * Converts an absolute unit to pixels.\n */\nfunction absToPixel(value, unit) {\n    var _a;\n    const conversion = (_a = ABSOLUTE_UNITS[unit]) !== null && _a !== void 0 ? _a : 1;\n    return value * conversion;\n}\n/**\n * Converts a relative unit to pixels.\n */\nfunction relToPixel(context, element, attribute, value, unit) {\n    var _a;\n    const coordinateSystemSize = (_a = context.viewBox) !== null && _a !== void 0 ? _a : { w: 0, h: 0 };\n    if (unit === '%') {\n        return percentageToPixel(attribute, value, coordinateSystemSize);\n    }\n    if (unit === 'vw' || unit === 'vh' || unit === 'vmin' || unit === 'vmax') {\n        return viewportLengthToPixel(value, unit, coordinateSystemSize);\n    }\n    if (unit === 'em' || unit === 'ex' || unit === 'ch' || unit === 'rem') {\n        return fontRelativeToPixel(context, element, value, unit);\n    }\n    throw new Error(`Unsupported relative length unit: ${unit}`);\n}\n/**\n * https://oreillymedia.github.io/Using_SVG/guide/units.html#units-viewport-reference\n */\nfunction viewportLengthToPixel(value, unit, { w: width, h: height } = { w: 0, h: 0 }) {\n    var _a, _b;\n    const fraction = value / 100;\n    const refWidth = (_a = window.innerWidth) !== null && _a !== void 0 ? _a : width;\n    const refHeight = (_b = window.innerHeight) !== null && _b !== void 0 ? _b : height;\n    if (unit === 'vw') {\n        return fraction * refWidth;\n    }\n    if (unit === 'vh') {\n        return fraction * refHeight;\n    }\n    if (unit === 'vmin') {\n        return fraction * Math.min(refWidth, refHeight);\n    }\n    if (unit === 'vmax') {\n        return fraction * Math.max(refWidth, refHeight);\n    }\n    throw new Error(`Not a viewport length unit: ${unit}`);\n}\n/**\n * https://oreillymedia.github.io/Using_SVG/guide/units.html#units-relative-reference\n */\nfunction fontRelativeToPixel(context, element, value, unit) {\n    var _a;\n    if (unit === 'rem') {\n        const rootElement = document.documentElement;\n        const fontSizeDimension = parseDimension(getComputedStyle(rootElement).fontSize);\n        const fontSizePx = fontSizeDimension.unit === 'px' ? fontSizeDimension.value : 16;\n        return value * fontSizePx;\n    }\n    if (unit === 'ch') {\n        const zeroCharWidth = measureZeroCharacter(element);\n        return value * zeroCharWidth;\n    }\n    // this should return a px font-size due to the getComputedStyle, otherwise use 16px as default fallback\n    const effectiveFontSize = (_a = getEffectiveAttribute(context, element, 'font-size', context.useElementContext)) !== null && _a !== void 0 ? _a : '16px';\n    const fontSizeDimension = parseDimension(effectiveFontSize);\n    const fontSizePx = fontSizeDimension.unit === 'px' ? fontSizeDimension.value : 16;\n    if (unit === 'em') {\n        return value * fontSizePx;\n    }\n    if (unit === 'ex') {\n        return value * fontSizePx * 0.5;\n    }\n    throw new Error(`Not a font relative unit: ${unit}`);\n}\n/**\n * Whether the given unit is an absolute unit.\n */\nfunction isAbsoluteUnit(unit) {\n    return !!ABSOLUTE_UNITS[unit];\n}\n/**\n * Returns the width of the '0' character in the context of the element.\n */\nfunction measureZeroCharacter(element) {\n    const parent = getParentElement(element);\n    if (!parent) {\n        return 1;\n    }\n    const measureContainer = document.createElementNS('http://www.w3.org/2000/svg', 'text');\n    measureContainer.style.visibility = 'hidden';\n    measureContainer.appendChild(document.createTextNode('0'));\n    parent.appendChild(measureContainer);\n    const bbox = measureContainer.getBBox();\n    parent.removeChild(measureContainer);\n    return bbox.width;\n}\n","/**\n * Whether the given SVGTransform resembles an identity transform.\n * @returns Whether the transform is an identity transform.\n *  Returns true if transform is undefined.\n */\nexport function isIdentityTransform(svgTransform) {\n    if (!svgTransform) {\n        return true;\n    }\n    const matrix = svgTransform.matrix;\n    return (!matrix ||\n        (matrix.a === 1 &&\n            matrix.b === 0 &&\n            matrix.c === 0 &&\n            matrix.d === 1 &&\n            matrix.e === 0 &&\n            matrix.f === 0));\n}\n/**\n * Whether the given SVGTransform does not scale nor skew.\n * @returns Whether the given SVGTransform does not scale nor skew.\n *  Returns true if transform is undefined.\n */\nexport function isTranslationTransform(svgTransform) {\n    if (!svgTransform) {\n        return true;\n    }\n    const matrix = svgTransform.matrix;\n    return !matrix || (matrix.a === 1 && matrix.b === 0 && matrix.c === 0 && matrix.d === 1);\n}\n/**\n * Applies a given `SVGTransform` to the point.\n *\n * [a c e] [x] = (a*x + c*y + e)\n * [b d f] [y] = (b*x + d*y + f)\n * [0 0 1] [1] = (0 + 0 + 1)\n */\nexport function applyMatrix(point, svgTransform) {\n    if (!svgTransform) {\n        return point;\n    }\n    const matrix = svgTransform.matrix;\n    const x = matrix.a * point.x + matrix.c * point.y + matrix.e;\n    const y = matrix.b * point.x + matrix.d * point.y + matrix.f;\n    return { x, y };\n}\n/**\n * Returns the consolidated transform of the given element.\n */\nexport function getSvgTransform(element) {\n    if (element.transform && element.transform.baseVal.numberOfItems > 0) {\n        return element.transform.baseVal.consolidate();\n    }\n    return null;\n}\n/**\n * Combines the given transform with the element's transform.\n * If no transform is given, it returns the SVGTransform of the element.\n */\nexport function getCombinedTransform(context, element, transform) {\n    if (!transform) {\n        return getSvgTransform(element);\n    }\n    const elementTransform = getSvgTransform(element);\n    if (elementTransform) {\n        const elementTransformMatrix = elementTransform.matrix;\n        const combinedMatrix = transform.matrix.multiply(elementTransformMatrix);\n        return context.sourceSvg.createSVGTransformFromMatrix(combinedMatrix);\n    }\n    return transform;\n}\n/**\n * Applies the given svgTransform to the given element.\n * @param element The element to which the transform should be applied.\n */\nexport function applyTransform(context, svgTransform, element) {\n    if (svgTransform && svgTransform.matrix && !isIdentityTransform(svgTransform)) {\n        const matrix = svgTransform.matrix;\n        if (element.transform.baseVal.numberOfItems > 0) {\n            element.transform.baseVal.getItem(0).setMatrix(matrix);\n        }\n        else {\n            element.transform.baseVal.appendItem(svgTransform);\n        }\n    }\n}\n","import tinycolor from 'tinycolor2';\n/**\n * Converts an SVG gradient to a color by mixing all stop colors\n * with `tinycolor.mix`.\n */\nexport function gradientToColor(gradient, opacity) {\n    const stops = Array.prototype.slice.apply(gradient.querySelectorAll('stop'));\n    if (stops.length === 0) {\n        return 'transparent';\n    }\n    else if (stops.length === 1) {\n        const color = getStopColor(stops[0]);\n        color.setAlpha(opacity);\n        return color.toString();\n    }\n    else {\n        // Because roughjs can only deal with solid colors, we try to calculate\n        // the average color of the gradient here.\n        // The idea is to create an array of discrete (average) colors that represents the\n        // gradient under consideration of the stop's offset. Thus, larger offsets\n        // result in more entries of the same mixed color (of the two adjacent color stops).\n        // At the end, this array is averaged again, to create a single solid color.\n        const resolution = 10;\n        const discreteColors = [];\n        let lastColor = null;\n        for (let i = 0; i < stops.length; i++) {\n            const currentColor = getStopColor(stops[i]);\n            const currentOffset = getStopOffset(stops[i]);\n            // combine the adjacent colors\n            const combinedColor = lastColor ? averageColor([lastColor, currentColor]) : currentColor;\n            // fill the discrete color array depending on the offset size\n            let entries = Math.max(1, (currentOffset / resolution) | 0);\n            while (entries > 0) {\n                discreteColors.push(combinedColor);\n                entries--;\n            }\n            lastColor = currentColor;\n        }\n        // average the discrete colors again for the final result\n        const mixedColor = averageColor(discreteColors);\n        mixedColor.setAlpha(opacity);\n        return mixedColor.toString();\n    }\n}\n/**\n * Returns the `stop-color` of an `SVGStopElement`.\n */\nexport function getStopColor(stop) {\n    var _a;\n    let stopColorStr = stop.getAttribute('stop-color');\n    if (!stopColorStr) {\n        const style = (_a = stop.getAttribute('style')) !== null && _a !== void 0 ? _a : '';\n        const match = /stop-color:\\s?(.*);?/.exec(style);\n        if (match && match.length > 1) {\n            stopColorStr = match[1];\n        }\n    }\n    return stopColorStr ? tinycolor(stopColorStr) : tinycolor('white');\n}\n/**\n * Calculates the average color of the colors in the given array.\n * @returns The average color\n */\nexport function averageColor(colorArray) {\n    const count = colorArray.length;\n    let r = 0;\n    let g = 0;\n    let b = 0;\n    let a = 0;\n    colorArray.forEach(tinycolor => {\n        const color = tinycolor.toRgb();\n        r += color.r * color.r;\n        g += color.g * color.g;\n        b += color.b * color.b;\n        a += color.a;\n    });\n    return tinycolor({\n        r: Math.sqrt(r / count),\n        g: Math.sqrt(g / count),\n        b: Math.sqrt(b / count),\n        a: a / count\n    });\n}\n/**\n * Returns the `offset` of an `SVGStopElement`.\n * @return stop percentage\n */\nexport function getStopOffset(stop) {\n    const offset = stop.getAttribute('offset');\n    if (!offset) {\n        return 0;\n    }\n    if (offset.indexOf('%')) {\n        return parseFloat(offset.substring(0, offset.length - 1));\n    }\n    else {\n        return parseFloat(offset) * 100;\n    }\n}\n","function getPenConfiguration(fillStyle) {\n    // the svg2roughjs v2 config\n    const legacyConfig = {\n        angle: {\n            normal: [-30, -50],\n            horizontal: [-30, -50],\n            vertical: [-30, -50]\n        },\n        weight: {\n            normal: [0.5, 3],\n            small: [0.5, 3]\n        },\n        gap: {\n            normal: [3, 5],\n            small: [3, 5]\n        }\n    };\n    // adjusted config for more variation\n    const defaultConfig = {\n        angle: {\n            // just lean more into the direction of the aspect ratio\n            normal: [-30, -50],\n            horizontal: [-50, -75],\n            vertical: [-30, -15]\n        },\n        weight: {\n            normal: [1, 3],\n            small: [0.5, 1.7]\n        },\n        gap: {\n            normal: [2, 5],\n            small: [1, 3]\n        }\n    };\n    // fine-tune configs depending on fill-style\n    switch (fillStyle) {\n        default:\n            return defaultConfig;\n        case 'zigzag':\n        case 'zigzag-line':\n            return Object.assign(Object.assign({}, defaultConfig), { weight: { normal: [0.5, 3], small: [0.5, 2] }, gap: { normal: [2, 6], small: [2, 5] } });\n        case 'cross-hatch':\n            return Object.assign(Object.assign({}, defaultConfig), { weight: { normal: [1, 3], small: [0.5, 1.3] }, gap: { normal: [4, 8], small: [2, 5] } });\n        case 'dots':\n            return legacyConfig;\n    }\n}\n/**\n * Creates a random rendering configuration for the given element.\n * The returned pen is specific of the `config.fillStyle` and the element's shape.\n */\nexport function createPen(context, element) {\n    if (context.roughConfig.fillStyle === 'solid') {\n        // config doesn't affect drawing\n        return { angle: 0, gap: 0, weight: 0 };\n    }\n    // Only works when the element is in the DOM, but no need to check it here,\n    // since the related methods can cope with non-finite or zero cases.\n    const { width, height } = element.getBoundingClientRect();\n    const aspectRatio = width / height;\n    const sideLength = Math.sqrt(width * height);\n    const { angle, gap, weight } = getPenConfiguration(context.roughConfig.fillStyle);\n    return {\n        angle: getHachureAngle(context, angle, aspectRatio),\n        gap: getHachureGap(context, gap, sideLength),\n        weight: getFillWeight(context, weight, sideLength)\n    };\n}\n/**\n * Returns a random hachure angle in the range of the given config.\n *\n * Rough.js default is -41deg\n */\nfunction getHachureAngle({ rng }, { normal, horizontal, vertical }, aspectRatio) {\n    if (isFinite(aspectRatio)) {\n        // sketch elements along the smaller side\n        if (aspectRatio < 0.25) {\n            return rng.next(horizontal);\n        }\n        else if (aspectRatio > 6) {\n            return rng.next(vertical);\n        }\n    }\n    return rng.next(normal);\n}\n/**\n * Returns a random hachure gap in the range of the given config.\n *\n * Rough.js default is 4 * strokeWidth\n */\nfunction getHachureGap({ rng }, { normal, small }, sideLength) {\n    return sideLength < 45 ? rng.next(small) : rng.next(normal);\n}\n/**\n * Returns a random fill weight in the range of the given config.\n *\n * Rough.js default is 0.5 * strokeWidth\n */\nfunction getFillWeight({ rng }, { normal, small }, sideLength) {\n    return sideLength < 45 ? rng.next(small) : rng.next(normal);\n}\n","import tinycolor from 'tinycolor2';\nimport { getIdFromUrl } from '../dom-helpers';\nimport { convertToPixelUnit } from '../svg-units';\nimport { isIdentityTransform } from '../transformation';\nimport { gradientToColor } from './colors';\nimport { getEffectiveAttribute, getEffectiveElementOpacity } from './effective-attributes';\nimport { createPen } from './pens';\n/**\n * Converts the effective style attributes of the given `SVGElement`\n * to a Rough.js config object that is used to draw the element with\n * Rough.js.\n * @return config for Rough.js drawing\n */\nexport function parseStyleConfig(context, element, svgTransform) {\n    var _a;\n    const precision = (_a = context.roughConfig.fixedDecimalPlaceDigits) !== null && _a !== void 0 ? _a : 15;\n    const config = Object.assign({}, context.roughConfig);\n    // Scalefactor for certain style attributes. For lack of a better option here, use the determinant\n    let scaleFactor = 1;\n    if (!isIdentityTransform(svgTransform)) {\n        const m = svgTransform.matrix;\n        const det = m.a * m.d - m.c * m.b;\n        scaleFactor = Math.sqrt(Math.abs(det));\n    }\n    // incorporate the elements base opacity\n    const elementOpacity = getEffectiveElementOpacity(context, element, 1, context.useElementContext);\n    const fill = getEffectiveAttribute(context, element, 'fill', context.useElementContext) || 'black';\n    const fillOpacity = elementOpacity * getOpacity(element, 'fill-opacity');\n    if (fill) {\n        if (fill.indexOf('url') !== -1) {\n            const gradientColor = convertGradient(context, fill, fillOpacity);\n            if (gradientColor !== 'none') {\n                config.fill = gradientColor;\n            }\n            else {\n                // delete fill, otherwise it may create an invisible 'hachure' element\n                delete config.fill;\n            }\n        }\n        else if (fill === 'none') {\n            // delete fill, otherwise it may create an invisible 'hachure' element\n            delete config.fill;\n        }\n        else {\n            const color = tinycolor(fill);\n            color.setAlpha(fillOpacity);\n            config.fill = color.toString();\n        }\n    }\n    const stroke = getEffectiveAttribute(context, element, 'stroke', context.useElementContext);\n    const strokeOpacity = elementOpacity * getOpacity(element, 'stroke-opacity');\n    if (stroke) {\n        if (stroke.indexOf('url') !== -1) {\n            config.stroke = convertGradient(context, stroke, strokeOpacity);\n        }\n        else if (stroke === 'none') {\n            config.stroke = 'none';\n        }\n        else {\n            const color = tinycolor(stroke);\n            color.setAlpha(strokeOpacity);\n            config.stroke = color.toString();\n        }\n    }\n    else {\n        config.stroke = 'none';\n    }\n    const strokeWidth = getEffectiveAttribute(context, element, 'stroke-width', context.useElementContext);\n    if (strokeWidth) {\n        // Convert to user space units (px)\n        const scaledWidth = convertToPixelUnit(context, element, strokeWidth, 'stroke-width') * scaleFactor;\n        config.strokeWidth = parseFloat(scaledWidth.toFixed(precision));\n    }\n    else {\n        // default stroke-width is 1\n        config.strokeWidth = 1;\n    }\n    const strokeDashArray = getEffectiveAttribute(context, element, 'stroke-dasharray', context.useElementContext);\n    if (strokeDashArray && strokeDashArray !== 'none') {\n        config.strokeLineDash = strokeDashArray\n            .split(/[\\s,]+/)\n            .filter(entry => entry.length > 0)\n            // make sure that dashes/dots are at least somewhat visible\n            .map(dash => {\n            const scaledLineDash = convertToPixelUnit(context, element, dash, 'stroke-dasharray') * scaleFactor;\n            return Math.max(0.5, parseFloat(scaledLineDash.toFixed(precision)));\n        });\n    }\n    const strokeDashOffset = getEffectiveAttribute(context, element, 'stroke-dashoffset', context.useElementContext);\n    if (strokeDashOffset) {\n        const scaledOffset = convertToPixelUnit(context, element, strokeDashOffset, 'stroke-dashoffset') * scaleFactor;\n        config.strokeLineDashOffset = parseFloat(scaledOffset.toFixed(precision));\n    }\n    // unstroked but filled shapes look weird, so always apply a stroke if we fill something\n    if (config.fill && config.stroke === 'none') {\n        config.stroke = config.fill;\n        config.strokeWidth = 1;\n    }\n    if (context.randomize) {\n        const { angle, gap, weight } = createPen(context, element);\n        config.hachureAngle = angle;\n        config.hachureGap = Math.round(gap); // must be integer (avg gap in pixels)\n        config.fillWeight = parseFloat(weight.toFixed(precision)); // value is used in the sketched output as-is\n        // randomize double stroke effect if not explicitly set through user config\n        if (typeof config.disableMultiStroke === 'undefined') {\n            config.disableMultiStroke = context.rng.next() > 0.3;\n        }\n    }\n    return config;\n}\n/**\n * Converts SVG opacity attributes to a [0, 1] range.\n */\nexport function getOpacity(element, attribute) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const attr = getComputedStyle(element)[attribute] || element.getAttribute(attribute);\n    if (attr) {\n        if (attr.indexOf('%') !== -1) {\n            return Math.min(1, Math.max(0, parseFloat(attr.substring(0, attr.length - 1)) / 100));\n        }\n        return Math.min(1, Math.max(0, parseFloat(attr)));\n    }\n    return 1;\n}\n/**\n * Parses a `fill` url by looking in the SVG `defs` element.\n * When a gradient is found, it is converted to a color and stored\n * in the internal defs store for this url.\n *\n * Patterns are ignored and returned with 'none'.\n *\n * @returns The parsed color\n */\nexport function convertGradient(context, url, opacity) {\n    const id = getIdFromUrl(url);\n    if (!id) {\n        return 'none';\n    }\n    const paint = context.idElements[id];\n    if (!paint) {\n        return 'none';\n    }\n    if (typeof paint === 'string') {\n        // maybe it was already parsed and replaced with a color\n        return paint;\n    }\n    else if (paint instanceof SVGLinearGradientElement ||\n        paint instanceof SVGRadialGradientElement) {\n        const color = gradientToColor(paint, opacity);\n        context.idElements[id] = color;\n        return color;\n    }\n    else {\n        // pattern or something else that cannot be directly used in the roughjs config\n        return 'none';\n    }\n}\nexport function isHidden(element) {\n    const style = element.style;\n    if (!style) {\n        return false;\n    }\n    return style.display === 'none' || style.visibility === 'hidden';\n}\nexport function concatStyleStrings(...args) {\n    let ret = '';\n    args = args.filter(s => s !== null);\n    for (const style of args) {\n        if (ret.length > 0 && ret[ret.length - 1] !== ';') {\n            ret += ';';\n        }\n        ret += style;\n    }\n    return ret;\n}\n","export function str(p) {\n    return `${p.x},${p.y}`;\n}\nexport function equals(p0, p1) {\n    return p0.x === p1.x && p0.y === p1.y;\n}\n","/*! *****************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\nvar t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])})(r,e)};function r(r,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Class extends value \"+String(e)+\" is not a constructor or null\");function i(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function e(t){var r=\"\";Array.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++){var i=t[e];if(i.type===_.CLOSE_PATH)r+=\"z\";else if(i.type===_.HORIZ_LINE_TO)r+=(i.relative?\"h\":\"H\")+i.x;else if(i.type===_.VERT_LINE_TO)r+=(i.relative?\"v\":\"V\")+i.y;else if(i.type===_.MOVE_TO)r+=(i.relative?\"m\":\"M\")+i.x+\" \"+i.y;else if(i.type===_.LINE_TO)r+=(i.relative?\"l\":\"L\")+i.x+\" \"+i.y;else if(i.type===_.CURVE_TO)r+=(i.relative?\"c\":\"C\")+i.x1+\" \"+i.y1+\" \"+i.x2+\" \"+i.y2+\" \"+i.x+\" \"+i.y;else if(i.type===_.SMOOTH_CURVE_TO)r+=(i.relative?\"s\":\"S\")+i.x2+\" \"+i.y2+\" \"+i.x+\" \"+i.y;else if(i.type===_.QUAD_TO)r+=(i.relative?\"q\":\"Q\")+i.x1+\" \"+i.y1+\" \"+i.x+\" \"+i.y;else if(i.type===_.SMOOTH_QUAD_TO)r+=(i.relative?\"t\":\"T\")+i.x+\" \"+i.y;else{if(i.type!==_.ARC)throw new Error('Unexpected command type \"'+i.type+'\" at index '+e+\".\");r+=(i.relative?\"a\":\"A\")+i.rX+\" \"+i.rY+\" \"+i.xRot+\" \"+ +i.lArcFlag+\" \"+ +i.sweepFlag+\" \"+i.x+\" \"+i.y}}return r}function i(t,r){var e=t[0],i=t[1];return[e*Math.cos(r)-i*Math.sin(r),e*Math.sin(r)+i*Math.cos(r)]}function a(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=0;e<t.length;e++)if(\"number\"!=typeof t[e])throw new Error(\"assertNumbers arguments[\"+e+\"] is not a number. \"+typeof t[e]+\" == typeof \"+t[e]);return!0}var n=Math.PI;function o(t,r,e){t.lArcFlag=0===t.lArcFlag?0:1,t.sweepFlag=0===t.sweepFlag?0:1;var a=t.rX,o=t.rY,s=t.x,u=t.y;a=Math.abs(t.rX),o=Math.abs(t.rY);var h=i([(r-s)/2,(e-u)/2],-t.xRot/180*n),c=h[0],y=h[1],p=Math.pow(c,2)/Math.pow(a,2)+Math.pow(y,2)/Math.pow(o,2);1<p&&(a*=Math.sqrt(p),o*=Math.sqrt(p)),t.rX=a,t.rY=o;var m=Math.pow(a,2)*Math.pow(y,2)+Math.pow(o,2)*Math.pow(c,2),O=(t.lArcFlag!==t.sweepFlag?1:-1)*Math.sqrt(Math.max(0,(Math.pow(a,2)*Math.pow(o,2)-m)/m)),l=a*y/o*O,T=-o*c/a*O,v=i([l,T],t.xRot/180*n);t.cX=v[0]+(r+s)/2,t.cY=v[1]+(e+u)/2,t.phi1=Math.atan2((y-T)/o,(c-l)/a),t.phi2=Math.atan2((-y-T)/o,(-c-l)/a),0===t.sweepFlag&&t.phi2>t.phi1&&(t.phi2-=2*n),1===t.sweepFlag&&t.phi2<t.phi1&&(t.phi2+=2*n),t.phi1*=180/n,t.phi2*=180/n}function s(t,r,e){a(t,r,e);var i=t*t+r*r-e*e;if(0>i)return[];if(0===i)return[[t*e/(t*t+r*r),r*e/(t*t+r*r)]];var n=Math.sqrt(i);return[[(t*e+r*n)/(t*t+r*r),(r*e-t*n)/(t*t+r*r)],[(t*e-r*n)/(t*t+r*r),(r*e+t*n)/(t*t+r*r)]]}var u,h=Math.PI/180;function c(t,r,e){return(1-e)*t+e*r}function y(t,r,e,i){return t+Math.cos(i/180*n)*r+Math.sin(i/180*n)*e}function p(t,r,e,i){var a=1e-6,n=r-t,o=e-r,s=3*n+3*(i-e)-6*o,u=6*(o-n),h=3*n;return Math.abs(s)<a?[-h/u]:function(t,r,e){void 0===e&&(e=1e-6);var i=t*t/4-r;if(i<-e)return[];if(i<=e)return[-t/2];var a=Math.sqrt(i);return[-t/2-a,-t/2+a]}(u/s,h/s,a)}function m(t,r,e,i,a){var n=1-a;return t*(n*n*n)+r*(3*n*n*a)+e*(3*n*a*a)+i*(a*a*a)}!function(t){function r(){return u((function(t,r,e){return t.relative&&(void 0!==t.x1&&(t.x1+=r),void 0!==t.y1&&(t.y1+=e),void 0!==t.x2&&(t.x2+=r),void 0!==t.y2&&(t.y2+=e),void 0!==t.x&&(t.x+=r),void 0!==t.y&&(t.y+=e),t.relative=!1),t}))}function e(){var t=NaN,r=NaN,e=NaN,i=NaN;return u((function(a,n,o){return a.type&_.SMOOTH_CURVE_TO&&(a.type=_.CURVE_TO,t=isNaN(t)?n:t,r=isNaN(r)?o:r,a.x1=a.relative?n-t:2*n-t,a.y1=a.relative?o-r:2*o-r),a.type&_.CURVE_TO?(t=a.relative?n+a.x2:a.x2,r=a.relative?o+a.y2:a.y2):(t=NaN,r=NaN),a.type&_.SMOOTH_QUAD_TO&&(a.type=_.QUAD_TO,e=isNaN(e)?n:e,i=isNaN(i)?o:i,a.x1=a.relative?n-e:2*n-e,a.y1=a.relative?o-i:2*o-i),a.type&_.QUAD_TO?(e=a.relative?n+a.x1:a.x1,i=a.relative?o+a.y1:a.y1):(e=NaN,i=NaN),a}))}function n(){var t=NaN,r=NaN;return u((function(e,i,a){if(e.type&_.SMOOTH_QUAD_TO&&(e.type=_.QUAD_TO,t=isNaN(t)?i:t,r=isNaN(r)?a:r,e.x1=e.relative?i-t:2*i-t,e.y1=e.relative?a-r:2*a-r),e.type&_.QUAD_TO){t=e.relative?i+e.x1:e.x1,r=e.relative?a+e.y1:e.y1;var n=e.x1,o=e.y1;e.type=_.CURVE_TO,e.x1=((e.relative?0:i)+2*n)/3,e.y1=((e.relative?0:a)+2*o)/3,e.x2=(e.x+2*n)/3,e.y2=(e.y+2*o)/3}else t=NaN,r=NaN;return e}))}function u(t){var r=0,e=0,i=NaN,a=NaN;return function(n){if(isNaN(i)&&!(n.type&_.MOVE_TO))throw new Error(\"path must start with moveto\");var o=t(n,r,e,i,a);return n.type&_.CLOSE_PATH&&(r=i,e=a),void 0!==n.x&&(r=n.relative?r+n.x:n.x),void 0!==n.y&&(e=n.relative?e+n.y:n.y),n.type&_.MOVE_TO&&(i=r,a=e),o}}function O(t,r,e,i,n,o){return a(t,r,e,i,n,o),u((function(a,s,u,h){var c=a.x1,y=a.x2,p=a.relative&&!isNaN(h),m=void 0!==a.x?a.x:p?0:s,O=void 0!==a.y?a.y:p?0:u;function l(t){return t*t}a.type&_.HORIZ_LINE_TO&&0!==r&&(a.type=_.LINE_TO,a.y=a.relative?0:u),a.type&_.VERT_LINE_TO&&0!==e&&(a.type=_.LINE_TO,a.x=a.relative?0:s),void 0!==a.x&&(a.x=a.x*t+O*e+(p?0:n)),void 0!==a.y&&(a.y=m*r+a.y*i+(p?0:o)),void 0!==a.x1&&(a.x1=a.x1*t+a.y1*e+(p?0:n)),void 0!==a.y1&&(a.y1=c*r+a.y1*i+(p?0:o)),void 0!==a.x2&&(a.x2=a.x2*t+a.y2*e+(p?0:n)),void 0!==a.y2&&(a.y2=y*r+a.y2*i+(p?0:o));var T=t*i-r*e;if(void 0!==a.xRot&&(1!==t||0!==r||0!==e||1!==i))if(0===T)delete a.rX,delete a.rY,delete a.xRot,delete a.lArcFlag,delete a.sweepFlag,a.type=_.LINE_TO;else{var v=a.xRot*Math.PI/180,f=Math.sin(v),N=Math.cos(v),x=1/l(a.rX),d=1/l(a.rY),E=l(N)*x+l(f)*d,A=2*f*N*(x-d),C=l(f)*x+l(N)*d,M=E*i*i-A*r*i+C*r*r,R=A*(t*i+r*e)-2*(E*e*i+C*t*r),g=E*e*e-A*t*e+C*t*t,I=(Math.atan2(R,M-g)+Math.PI)%Math.PI/2,S=Math.sin(I),L=Math.cos(I);a.rX=Math.abs(T)/Math.sqrt(M*l(L)+R*S*L+g*l(S)),a.rY=Math.abs(T)/Math.sqrt(M*l(S)-R*S*L+g*l(L)),a.xRot=180*I/Math.PI}return void 0!==a.sweepFlag&&0>T&&(a.sweepFlag=+!a.sweepFlag),a}))}function l(){return function(t){var r={};for(var e in t)r[e]=t[e];return r}}t.ROUND=function(t){function r(r){return Math.round(r*t)/t}return void 0===t&&(t=1e13),a(t),function(t){return void 0!==t.x1&&(t.x1=r(t.x1)),void 0!==t.y1&&(t.y1=r(t.y1)),void 0!==t.x2&&(t.x2=r(t.x2)),void 0!==t.y2&&(t.y2=r(t.y2)),void 0!==t.x&&(t.x=r(t.x)),void 0!==t.y&&(t.y=r(t.y)),void 0!==t.rX&&(t.rX=r(t.rX)),void 0!==t.rY&&(t.rY=r(t.rY)),t}},t.TO_ABS=r,t.TO_REL=function(){return u((function(t,r,e){return t.relative||(void 0!==t.x1&&(t.x1-=r),void 0!==t.y1&&(t.y1-=e),void 0!==t.x2&&(t.x2-=r),void 0!==t.y2&&(t.y2-=e),void 0!==t.x&&(t.x-=r),void 0!==t.y&&(t.y-=e),t.relative=!0),t}))},t.NORMALIZE_HVZ=function(t,r,e){return void 0===t&&(t=!0),void 0===r&&(r=!0),void 0===e&&(e=!0),u((function(i,a,n,o,s){if(isNaN(o)&&!(i.type&_.MOVE_TO))throw new Error(\"path must start with moveto\");return r&&i.type&_.HORIZ_LINE_TO&&(i.type=_.LINE_TO,i.y=i.relative?0:n),e&&i.type&_.VERT_LINE_TO&&(i.type=_.LINE_TO,i.x=i.relative?0:a),t&&i.type&_.CLOSE_PATH&&(i.type=_.LINE_TO,i.x=i.relative?o-a:o,i.y=i.relative?s-n:s),i.type&_.ARC&&(0===i.rX||0===i.rY)&&(i.type=_.LINE_TO,delete i.rX,delete i.rY,delete i.xRot,delete i.lArcFlag,delete i.sweepFlag),i}))},t.NORMALIZE_ST=e,t.QT_TO_C=n,t.INFO=u,t.SANITIZE=function(t){void 0===t&&(t=0),a(t);var r=NaN,e=NaN,i=NaN,n=NaN;return u((function(a,o,s,u,h){var c=Math.abs,y=!1,p=0,m=0;if(a.type&_.SMOOTH_CURVE_TO&&(p=isNaN(r)?0:o-r,m=isNaN(e)?0:s-e),a.type&(_.CURVE_TO|_.SMOOTH_CURVE_TO)?(r=a.relative?o+a.x2:a.x2,e=a.relative?s+a.y2:a.y2):(r=NaN,e=NaN),a.type&_.SMOOTH_QUAD_TO?(i=isNaN(i)?o:2*o-i,n=isNaN(n)?s:2*s-n):a.type&_.QUAD_TO?(i=a.relative?o+a.x1:a.x1,n=a.relative?s+a.y1:a.y2):(i=NaN,n=NaN),a.type&_.LINE_COMMANDS||a.type&_.ARC&&(0===a.rX||0===a.rY||!a.lArcFlag)||a.type&_.CURVE_TO||a.type&_.SMOOTH_CURVE_TO||a.type&_.QUAD_TO||a.type&_.SMOOTH_QUAD_TO){var O=void 0===a.x?0:a.relative?a.x:a.x-o,l=void 0===a.y?0:a.relative?a.y:a.y-s;p=isNaN(i)?void 0===a.x1?p:a.relative?a.x:a.x1-o:i-o,m=isNaN(n)?void 0===a.y1?m:a.relative?a.y:a.y1-s:n-s;var T=void 0===a.x2?0:a.relative?a.x:a.x2-o,v=void 0===a.y2?0:a.relative?a.y:a.y2-s;c(O)<=t&&c(l)<=t&&c(p)<=t&&c(m)<=t&&c(T)<=t&&c(v)<=t&&(y=!0)}return a.type&_.CLOSE_PATH&&c(o-u)<=t&&c(s-h)<=t&&(y=!0),y?[]:a}))},t.MATRIX=O,t.ROTATE=function(t,r,e){void 0===r&&(r=0),void 0===e&&(e=0),a(t,r,e);var i=Math.sin(t),n=Math.cos(t);return O(n,i,-i,n,r-r*n+e*i,e-r*i-e*n)},t.TRANSLATE=function(t,r){return void 0===r&&(r=0),a(t,r),O(1,0,0,1,t,r)},t.SCALE=function(t,r){return void 0===r&&(r=t),a(t,r),O(t,0,0,r,0,0)},t.SKEW_X=function(t){return a(t),O(1,0,Math.atan(t),1,0,0)},t.SKEW_Y=function(t){return a(t),O(1,Math.atan(t),0,1,0,0)},t.X_AXIS_SYMMETRY=function(t){return void 0===t&&(t=0),a(t),O(-1,0,0,1,t,0)},t.Y_AXIS_SYMMETRY=function(t){return void 0===t&&(t=0),a(t),O(1,0,0,-1,0,t)},t.A_TO_C=function(){return u((function(t,r,e){return _.ARC===t.type?function(t,r,e){var a,n,s,u;t.cX||o(t,r,e);for(var y=Math.min(t.phi1,t.phi2),p=Math.max(t.phi1,t.phi2)-y,m=Math.ceil(p/90),O=new Array(m),l=r,T=e,v=0;v<m;v++){var f=c(t.phi1,t.phi2,v/m),N=c(t.phi1,t.phi2,(v+1)/m),x=N-f,d=4/3*Math.tan(x*h/4),E=[Math.cos(f*h)-d*Math.sin(f*h),Math.sin(f*h)+d*Math.cos(f*h)],A=E[0],C=E[1],M=[Math.cos(N*h),Math.sin(N*h)],R=M[0],g=M[1],I=[R+d*Math.sin(N*h),g-d*Math.cos(N*h)],S=I[0],L=I[1];O[v]={relative:t.relative,type:_.CURVE_TO};var H=function(r,e){var a=i([r*t.rX,e*t.rY],t.xRot),n=a[0],o=a[1];return[t.cX+n,t.cY+o]};a=H(A,C),O[v].x1=a[0],O[v].y1=a[1],n=H(S,L),O[v].x2=n[0],O[v].y2=n[1],s=H(R,g),O[v].x=s[0],O[v].y=s[1],t.relative&&(O[v].x1-=l,O[v].y1-=T,O[v].x2-=l,O[v].y2-=T,O[v].x-=l,O[v].y-=T),l=(u=[O[v].x,O[v].y])[0],T=u[1]}return O}(t,t.relative?0:r,t.relative?0:e):t}))},t.ANNOTATE_ARCS=function(){return u((function(t,r,e){return t.relative&&(r=0,e=0),_.ARC===t.type&&o(t,r,e),t}))},t.CLONE=l,t.CALCULATE_BOUNDS=function(){var t=function(t){var r={};for(var e in t)r[e]=t[e];return r},i=r(),a=n(),h=e(),c=u((function(r,e,n){var u=h(a(i(t(r))));function O(t){t>c.maxX&&(c.maxX=t),t<c.minX&&(c.minX=t)}function l(t){t>c.maxY&&(c.maxY=t),t<c.minY&&(c.minY=t)}if(u.type&_.DRAWING_COMMANDS&&(O(e),l(n)),u.type&_.HORIZ_LINE_TO&&O(u.x),u.type&_.VERT_LINE_TO&&l(u.y),u.type&_.LINE_TO&&(O(u.x),l(u.y)),u.type&_.CURVE_TO){O(u.x),l(u.y);for(var T=0,v=p(e,u.x1,u.x2,u.x);T<v.length;T++){0<(w=v[T])&&1>w&&O(m(e,u.x1,u.x2,u.x,w))}for(var f=0,N=p(n,u.y1,u.y2,u.y);f<N.length;f++){0<(w=N[f])&&1>w&&l(m(n,u.y1,u.y2,u.y,w))}}if(u.type&_.ARC){O(u.x),l(u.y),o(u,e,n);for(var x=u.xRot/180*Math.PI,d=Math.cos(x)*u.rX,E=Math.sin(x)*u.rX,A=-Math.sin(x)*u.rY,C=Math.cos(x)*u.rY,M=u.phi1<u.phi2?[u.phi1,u.phi2]:-180>u.phi2?[u.phi2+360,u.phi1+360]:[u.phi2,u.phi1],R=M[0],g=M[1],I=function(t){var r=t[0],e=t[1],i=180*Math.atan2(e,r)/Math.PI;return i<R?i+360:i},S=0,L=s(A,-d,0).map(I);S<L.length;S++){(w=L[S])>R&&w<g&&O(y(u.cX,d,A,w))}for(var H=0,U=s(C,-E,0).map(I);H<U.length;H++){var w;(w=U[H])>R&&w<g&&l(y(u.cY,E,C,w))}}return r}));return c.minX=1/0,c.maxX=-1/0,c.minY=1/0,c.maxY=-1/0,c}}(u||(u={}));var O,l=function(){function t(){}return t.prototype.round=function(t){return this.transform(u.ROUND(t))},t.prototype.toAbs=function(){return this.transform(u.TO_ABS())},t.prototype.toRel=function(){return this.transform(u.TO_REL())},t.prototype.normalizeHVZ=function(t,r,e){return this.transform(u.NORMALIZE_HVZ(t,r,e))},t.prototype.normalizeST=function(){return this.transform(u.NORMALIZE_ST())},t.prototype.qtToC=function(){return this.transform(u.QT_TO_C())},t.prototype.aToC=function(){return this.transform(u.A_TO_C())},t.prototype.sanitize=function(t){return this.transform(u.SANITIZE(t))},t.prototype.translate=function(t,r){return this.transform(u.TRANSLATE(t,r))},t.prototype.scale=function(t,r){return this.transform(u.SCALE(t,r))},t.prototype.rotate=function(t,r,e){return this.transform(u.ROTATE(t,r,e))},t.prototype.matrix=function(t,r,e,i,a,n){return this.transform(u.MATRIX(t,r,e,i,a,n))},t.prototype.skewX=function(t){return this.transform(u.SKEW_X(t))},t.prototype.skewY=function(t){return this.transform(u.SKEW_Y(t))},t.prototype.xSymmetry=function(t){return this.transform(u.X_AXIS_SYMMETRY(t))},t.prototype.ySymmetry=function(t){return this.transform(u.Y_AXIS_SYMMETRY(t))},t.prototype.annotateArcs=function(){return this.transform(u.ANNOTATE_ARCS())},t}(),T=function(t){return\" \"===t||\"\\t\"===t||\"\\r\"===t||\"\\n\"===t},v=function(t){return\"0\".charCodeAt(0)<=t.charCodeAt(0)&&t.charCodeAt(0)<=\"9\".charCodeAt(0)},f=function(t){function e(){var r=t.call(this)||this;return r.curNumber=\"\",r.curCommandType=-1,r.curCommandRelative=!1,r.canParseCommandOrComma=!0,r.curNumberHasExp=!1,r.curNumberHasExpDigits=!1,r.curNumberHasDecimal=!1,r.curArgs=[],r}return r(e,t),e.prototype.finish=function(t){if(void 0===t&&(t=[]),this.parse(\" \",t),0!==this.curArgs.length||!this.canParseCommandOrComma)throw new SyntaxError(\"Unterminated command at the path end.\");return t},e.prototype.parse=function(t,r){var e=this;void 0===r&&(r=[]);for(var i=function(t){r.push(t),e.curArgs.length=0,e.canParseCommandOrComma=!0},a=0;a<t.length;a++){var n=t[a],o=!(this.curCommandType!==_.ARC||3!==this.curArgs.length&&4!==this.curArgs.length||1!==this.curNumber.length||\"0\"!==this.curNumber&&\"1\"!==this.curNumber),s=v(n)&&(\"0\"===this.curNumber&&\"0\"===n||o);if(!v(n)||s)if(\"e\"!==n&&\"E\"!==n)if(\"-\"!==n&&\"+\"!==n||!this.curNumberHasExp||this.curNumberHasExpDigits)if(\".\"!==n||this.curNumberHasExp||this.curNumberHasDecimal||o){if(this.curNumber&&-1!==this.curCommandType){var u=Number(this.curNumber);if(isNaN(u))throw new SyntaxError(\"Invalid number ending at \"+a);if(this.curCommandType===_.ARC)if(0===this.curArgs.length||1===this.curArgs.length){if(0>u)throw new SyntaxError('Expected positive number, got \"'+u+'\" at index \"'+a+'\"')}else if((3===this.curArgs.length||4===this.curArgs.length)&&\"0\"!==this.curNumber&&\"1\"!==this.curNumber)throw new SyntaxError('Expected a flag, got \"'+this.curNumber+'\" at index \"'+a+'\"');this.curArgs.push(u),this.curArgs.length===N[this.curCommandType]&&(_.HORIZ_LINE_TO===this.curCommandType?i({type:_.HORIZ_LINE_TO,relative:this.curCommandRelative,x:u}):_.VERT_LINE_TO===this.curCommandType?i({type:_.VERT_LINE_TO,relative:this.curCommandRelative,y:u}):this.curCommandType===_.MOVE_TO||this.curCommandType===_.LINE_TO||this.curCommandType===_.SMOOTH_QUAD_TO?(i({type:this.curCommandType,relative:this.curCommandRelative,x:this.curArgs[0],y:this.curArgs[1]}),_.MOVE_TO===this.curCommandType&&(this.curCommandType=_.LINE_TO)):this.curCommandType===_.CURVE_TO?i({type:_.CURVE_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x2:this.curArgs[2],y2:this.curArgs[3],x:this.curArgs[4],y:this.curArgs[5]}):this.curCommandType===_.SMOOTH_CURVE_TO?i({type:_.SMOOTH_CURVE_TO,relative:this.curCommandRelative,x2:this.curArgs[0],y2:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===_.QUAD_TO?i({type:_.QUAD_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===_.ARC&&i({type:_.ARC,relative:this.curCommandRelative,rX:this.curArgs[0],rY:this.curArgs[1],xRot:this.curArgs[2],lArcFlag:this.curArgs[3],sweepFlag:this.curArgs[4],x:this.curArgs[5],y:this.curArgs[6]})),this.curNumber=\"\",this.curNumberHasExpDigits=!1,this.curNumberHasExp=!1,this.curNumberHasDecimal=!1,this.canParseCommandOrComma=!0}if(!T(n))if(\",\"===n&&this.canParseCommandOrComma)this.canParseCommandOrComma=!1;else if(\"+\"!==n&&\"-\"!==n&&\".\"!==n)if(s)this.curNumber=n,this.curNumberHasDecimal=!1;else{if(0!==this.curArgs.length)throw new SyntaxError(\"Unterminated command at index \"+a+\".\");if(!this.canParseCommandOrComma)throw new SyntaxError('Unexpected character \"'+n+'\" at index '+a+\". Command cannot follow comma\");if(this.canParseCommandOrComma=!1,\"z\"!==n&&\"Z\"!==n)if(\"h\"===n||\"H\"===n)this.curCommandType=_.HORIZ_LINE_TO,this.curCommandRelative=\"h\"===n;else if(\"v\"===n||\"V\"===n)this.curCommandType=_.VERT_LINE_TO,this.curCommandRelative=\"v\"===n;else if(\"m\"===n||\"M\"===n)this.curCommandType=_.MOVE_TO,this.curCommandRelative=\"m\"===n;else if(\"l\"===n||\"L\"===n)this.curCommandType=_.LINE_TO,this.curCommandRelative=\"l\"===n;else if(\"c\"===n||\"C\"===n)this.curCommandType=_.CURVE_TO,this.curCommandRelative=\"c\"===n;else if(\"s\"===n||\"S\"===n)this.curCommandType=_.SMOOTH_CURVE_TO,this.curCommandRelative=\"s\"===n;else if(\"q\"===n||\"Q\"===n)this.curCommandType=_.QUAD_TO,this.curCommandRelative=\"q\"===n;else if(\"t\"===n||\"T\"===n)this.curCommandType=_.SMOOTH_QUAD_TO,this.curCommandRelative=\"t\"===n;else{if(\"a\"!==n&&\"A\"!==n)throw new SyntaxError('Unexpected character \"'+n+'\" at index '+a+\".\");this.curCommandType=_.ARC,this.curCommandRelative=\"a\"===n}else r.push({type:_.CLOSE_PATH}),this.canParseCommandOrComma=!0,this.curCommandType=-1}else this.curNumber=n,this.curNumberHasDecimal=\".\"===n}else this.curNumber+=n,this.curNumberHasDecimal=!0;else this.curNumber+=n;else this.curNumber+=n,this.curNumberHasExp=!0;else this.curNumber+=n,this.curNumberHasExpDigits=this.curNumberHasExp}return r},e.prototype.transform=function(t){return Object.create(this,{parse:{value:function(r,e){void 0===e&&(e=[]);for(var i=0,a=Object.getPrototypeOf(this).parse.call(this,r);i<a.length;i++){var n=a[i],o=t(n);Array.isArray(o)?e.push.apply(e,o):e.push(o)}return e}}})},e}(l),_=function(t){function i(r){var e=t.call(this)||this;return e.commands=\"string\"==typeof r?i.parse(r):r,e}return r(i,t),i.prototype.encode=function(){return i.encode(this.commands)},i.prototype.getBounds=function(){var t=u.CALCULATE_BOUNDS();return this.transform(t),t},i.prototype.transform=function(t){for(var r=[],e=0,i=this.commands;e<i.length;e++){var a=t(i[e]);Array.isArray(a)?r.push.apply(r,a):r.push(a)}return this.commands=r,this},i.encode=function(t){return e(t)},i.parse=function(t){var r=new f,e=[];return r.parse(t,e),r.finish(e),e},i.CLOSE_PATH=1,i.MOVE_TO=2,i.HORIZ_LINE_TO=4,i.VERT_LINE_TO=8,i.LINE_TO=16,i.CURVE_TO=32,i.SMOOTH_CURVE_TO=64,i.QUAD_TO=128,i.SMOOTH_QUAD_TO=256,i.ARC=512,i.LINE_COMMANDS=i.LINE_TO|i.HORIZ_LINE_TO|i.VERT_LINE_TO,i.DRAWING_COMMANDS=i.HORIZ_LINE_TO|i.VERT_LINE_TO|i.LINE_TO|i.CURVE_TO|i.SMOOTH_CURVE_TO|i.QUAD_TO|i.SMOOTH_QUAD_TO|i.ARC,i}(l),N=((O={})[_.MOVE_TO]=2,O[_.LINE_TO]=2,O[_.HORIZ_LINE_TO]=1,O[_.VERT_LINE_TO]=1,O[_.CLOSE_PATH]=0,O[_.QUAD_TO]=4,O[_.SMOOTH_QUAD_TO]=2,O[_.CURVE_TO]=6,O[_.SMOOTH_CURVE_TO]=4,O[_.ARC]=7,O);export{N as COMMAND_ARG_COUNTS,_ as SVGPathData,f as SVGPathDataParser,u as SVGPathDataTransformer,e as encodeSVGPath};\n//# sourceMappingURL=SVGPathData.module.js.map\n","import { getIdFromUrl } from '../dom-helpers';\nimport { getEffectiveAttribute } from '../styles/effective-attributes';\nimport { convertToPixelUnit } from '../svg-units';\nimport { equals } from './primitives';\nexport function drawMarkers(context, element, points, svgTransform) {\n    if (points.length === 0) {\n        return;\n    }\n    const startPt = points[0];\n    const endPt = points[points.length - 1];\n    // start marker\n    const markerStartId = getIdFromUrl(element.getAttribute('marker-start'));\n    const markerStartElement = markerStartId\n        ? context.idElements[markerStartId]\n        : null;\n    // marker-start is only rendered when there are at least two points\n    if (markerStartElement && points.length > 1) {\n        let angle = markerStartElement.orientAngle.baseVal.value;\n        const nextPt = points[1];\n        const orientAttr = markerStartElement.getAttribute('orient');\n        if (orientAttr === 'auto' || orientAttr === 'auto-start-reverse') {\n            const reverse = orientAttr === 'auto' ? 0 : 180;\n            const prevPt = points[points.length - 2];\n            if (isClosedPath(points)) {\n                // https://www.w3.org/TR/SVG11/painting.html#OrientAttribute\n                // use angle bisector of incoming and outgoing angle\n                angle = getBisectingAngle(prevPt, endPt, nextPt) - reverse;\n            }\n            else {\n                const vOut = { x: nextPt.x - startPt.x, y: nextPt.y - startPt.y };\n                angle = getAngle({ x: 1, y: 0 }, vOut) - reverse;\n            }\n        }\n        const matrix = context.sourceSvg\n            .createSVGMatrix()\n            .translate(startPt.x, startPt.y)\n            .rotate(angle)\n            .scale(getScaleFactor(context, markerStartElement, element));\n        const combinedMatrix = svgTransform ? svgTransform.matrix.multiply(matrix) : matrix;\n        const markerTransform = context.sourceSvg.createSVGTransformFromMatrix(combinedMatrix);\n        context.processElement(context, markerStartElement, markerTransform);\n    }\n    // end marker\n    const markerEndId = getIdFromUrl(element.getAttribute('marker-end'));\n    const markerEndElement = markerEndId\n        ? context.idElements[markerEndId]\n        : null;\n    // marker-end is also rendered if the path has only one point\n    if (markerEndElement) {\n        let angle = markerEndElement.orientAngle.baseVal.value;\n        if (points.length > 1) {\n            const orientAttr = markerEndElement.getAttribute('orient');\n            if (orientAttr === 'auto' || orientAttr === 'auto-start-reverse') {\n                // by spec, \"auto-start-reverse\" has no effect on marker end\n                const prevPt = points[points.length - 2];\n                if (isClosedPath(points)) {\n                    // https://www.w3.org/TR/SVG11/painting.html#OrientAttribute\n                    // use angle bisector of incoming and outgoing angle\n                    const nextPt = points[1]; // start and end points are equal, take second point\n                    angle = getBisectingAngle(prevPt, endPt, nextPt);\n                }\n                else {\n                    const vIn = { x: endPt.x - prevPt.x, y: endPt.y - prevPt.y };\n                    angle = getAngle({ x: 1, y: 0 }, vIn);\n                }\n            }\n        }\n        const matrix = context.sourceSvg\n            .createSVGMatrix()\n            .translate(endPt.x, endPt.y)\n            .rotate(angle)\n            .scale(getScaleFactor(context, markerEndElement, element));\n        const combinedMatrix = svgTransform ? svgTransform.matrix.multiply(matrix) : matrix;\n        const markerTransform = context.sourceSvg.createSVGTransformFromMatrix(combinedMatrix);\n        context.processElement(context, markerEndElement, markerTransform);\n    }\n    // mid marker(s)\n    const markerMidId = getIdFromUrl(element.getAttribute('marker-mid'));\n    const markerMidElement = markerMidId\n        ? context.idElements[markerMidId]\n        : null;\n    if (markerMidElement && points.length > 2) {\n        for (let i = 0; i < points.length; i++) {\n            const loc = points[i];\n            if (i === 0 || i === points.length - 1) {\n                // mid markers are not drawn on first or last point\n                continue;\n            }\n            let angle = markerMidElement.orientAngle.baseVal.value;\n            const orientAttr = markerMidElement.getAttribute('orient');\n            if (orientAttr === 'auto' || orientAttr === 'auto-start-reverse') {\n                // by spec, \"auto-start-reverse\" has no effect on marker mid\n                const prevPt = points[i - 1];\n                const nextPt = points[i + 1];\n                // https://www.w3.org/TR/SVG11/painting.html#OrientAttribute\n                // use angle bisector of incoming and outgoing angle\n                angle = getBisectingAngle(prevPt, loc, nextPt);\n            }\n            const matrix = context.sourceSvg\n                .createSVGMatrix()\n                .translate(loc.x, loc.y)\n                .rotate(angle)\n                .scale(getScaleFactor(context, markerMidElement, element));\n            const combinedMatrix = svgTransform ? svgTransform.matrix.multiply(matrix) : matrix;\n            const markerTransform = context.sourceSvg.createSVGTransformFromMatrix(combinedMatrix);\n            context.processElement(context, markerMidElement, markerTransform);\n        }\n    }\n}\n/**\n * Consider scaled coordinate system for markerWidth/markerHeight.\n */\nfunction getScaleFactor(context, marker, referrer) {\n    const markerUnits = marker.getAttribute('markerUnits');\n    let scaleFactor = 1;\n    if (!markerUnits || markerUnits === 'strokeWidth') {\n        // default is strokeWidth by SVG spec\n        const strokeWidth = getEffectiveAttribute(context, referrer, 'stroke-width');\n        if (strokeWidth) {\n            scaleFactor = convertToPixelUnit(context, referrer, strokeWidth, 'stroke-width');\n        }\n    }\n    return scaleFactor;\n}\n/**\n * Whether the path is closed, i.e. the start and end points are identical\n */\nfunction isClosedPath(points) {\n    return equals(points[0], points[points.length - 1]);\n}\n/**\n * Returns the bisection angle of the angle that is spanned by the given points.\n * @param prevPt The point from which the incoming flank is pointing\n * @param crossingPt The anchor point of the angle\n * @param nextPt Th point to which the outgoing flank is pointing\n * @returns The bisecting angle\n */\nfunction getBisectingAngle(prevPt, crossingPt, nextPt) {\n    const vIn = { x: nextPt.x - crossingPt.x, y: nextPt.y - crossingPt.y };\n    const vOut = { x: prevPt.x - crossingPt.x, y: prevPt.y - crossingPt.y };\n    // the relative angle between the two vectors\n    const vectorAngle = getAngle(vIn, vOut);\n    // calculate the absolute angle of the vectors considering the x-axis as reference\n    const refPoint = { x: crossingPt.x + 1, y: crossingPt.y };\n    const refVector = { x: refPoint.x - crossingPt.x, y: refPoint.y - crossingPt.y };\n    const refAngle = getAngle(vIn, refVector);\n    // return the absolute bisector\n    return getOppositeAngle(vectorAngle) / 2 - refAngle;\n}\n/**\n * Returns the opposite angle of the line. Considers the direction of the angle\n * (i.e. positive for clockwise, negative for counter-clickwise).\n */\nfunction getOppositeAngle(angle) {\n    return angle - Math.sign(angle) * 180;\n}\n/**\n * Returns the signed angle between the vectors (i.e. positive for clockwise,\n * negative for counter-clickwise).\n * @param v1 2-dimensional vector\n * @param v2 2-dimensional vector\n * @returns The signed angle between the vectors\n */\nfunction getAngle(v1, v2) {\n    const a1 = Math.atan2(v1.y, v1.x);\n    const a2 = Math.atan2(v2.y, v2.x);\n    const angle = a2 - a1;\n    const K = -Math.sign(angle) * Math.PI * 2;\n    const a = Math.abs(K + angle) < Math.abs(angle) ? K + angle : angle;\n    return Math.round((360 * a) / (Math.PI * 2));\n}\n","import { appendPatternPaint } from '../styles/pattern';\nimport { parseStyleConfig } from '../styles/styles';\nimport { applyTransform, applyMatrix, isIdentityTransform, isTranslationTransform } from '../transformation';\nimport { appendSketchElement, sketchPath } from '../utils';\nimport { str } from './primitives';\nexport function drawRect(context, rect, svgTransform) {\n    const x = rect.x.baseVal.value;\n    const y = rect.y.baseVal.value;\n    const width = rect.width.baseVal.value;\n    const height = rect.height.baseVal.value;\n    if (width === 0 || height === 0) {\n        // zero-width or zero-height rect will not be rendered\n        return;\n    }\n    // Negative values are an error and result in the default value, and clamp both values to half their sides' lengths\n    let rx = rect.hasAttribute('rx') ? Math.min(Math.max(0, rect.rx.baseVal.value), width / 2) : null;\n    let ry = rect.hasAttribute('ry') ? Math.min(Math.max(0, rect.ry.baseVal.value), height / 2) : null;\n    if (rx !== null || ry !== null) {\n        // If only one of the two values is specified, the other has the same value\n        rx = rx === null ? ry : rx;\n        ry = ry === null ? rx : ry;\n    }\n    // the transformed, rectangular bounds\n    const p1 = applyMatrix({ x, y }, svgTransform);\n    const p2 = applyMatrix({ x: x + width, y: y + height }, svgTransform);\n    const transformedWidth = p2.x - p1.x;\n    const transformedHeight = p2.y - p1.y;\n    const transformedBounds = { x: p1.x, y: p1.y, w: transformedWidth, h: transformedHeight };\n    if ((isIdentityTransform(svgTransform) || isTranslationTransform(svgTransform)) && !rx && !ry) {\n        // Simple case; just a rectangle\n        const sketchRect = context.rc.rectangle(transformedBounds.x, transformedBounds.y, transformedBounds.w, transformedBounds.h, parseStyleConfig(context, rect, svgTransform));\n        applyPatternPaint(context, rect, transformedBounds);\n        appendSketchElement(context, rect, sketchRect);\n    }\n    else {\n        let path = '';\n        if (rx !== null && ry !== null) {\n            const factor = (4 / 3) * (Math.sqrt(2) - 1);\n            // Construct path for the rounded rectangle\n            // perform an absolute moveto operation to location (x+rx,y), where x is the value of the rect element's x attribute converted to user space, rx is the effective value of the rx attribute converted to user space and y is the value of the y attribute converted to user space\n            const p1 = applyMatrix({ x: x + rx, y }, svgTransform);\n            path += `M ${str(p1)}`;\n            // perform an absolute horizontal lineto operation to location (x+width-rx,y), where width is the rect element's width attribute converted to user space\n            const p2 = applyMatrix({ x: x + width - rx, y }, svgTransform);\n            path += `L ${str(p2)}`;\n            // perform an absolute elliptical arc operation to coordinate (x+width,y+ry), where the effective values for the rx and ry attributes on the rect element converted to user space are used as the rx and ry attributes on the elliptical arc command, respectively, the x-axis-rotation is set to zero, the large-arc-flag is set to zero, and the sweep-flag is set to one\n            const p3c1 = applyMatrix({ x: x + width - rx + factor * rx, y }, svgTransform);\n            const p3c2 = applyMatrix({ x: x + width, y: y + factor * ry }, svgTransform);\n            const p3 = applyMatrix({ x: x + width, y: y + ry }, svgTransform);\n            path += `C ${str(p3c1)} ${str(p3c2)} ${str(p3)}`; // We cannot use the arc command, since we no longer draw in the expected coordinates. So approximate everything with lines and bziers\n            // perform a absolute vertical lineto to location (x+width,y+height-ry), where height is the rect element's height attribute converted to user space\n            const p4 = applyMatrix({ x: x + width, y: y + height - ry }, svgTransform);\n            path += `L ${str(p4)}`;\n            // perform an absolute elliptical arc operation to coordinate (x+width-rx,y+height)\n            const p5c1 = applyMatrix({ x: x + width, y: y + height - ry + factor * ry }, svgTransform);\n            const p5c2 = applyMatrix({ x: x + width - factor * rx, y: y + height }, svgTransform);\n            const p5 = applyMatrix({ x: x + width - rx, y: y + height }, svgTransform);\n            path += `C ${str(p5c1)} ${str(p5c2)} ${str(p5)}`;\n            // perform an absolute horizontal lineto to location (x+rx,y+height)\n            const p6 = applyMatrix({ x: x + rx, y: y + height }, svgTransform);\n            path += `L ${str(p6)}`;\n            // perform an absolute elliptical arc operation to coordinate (x,y+height-ry)\n            const p7c1 = applyMatrix({ x: x + rx - factor * rx, y: y + height }, svgTransform);\n            const p7c2 = applyMatrix({ x, y: y + height - factor * ry }, svgTransform);\n            const p7 = applyMatrix({ x, y: y + height - ry }, svgTransform);\n            path += `C ${str(p7c1)} ${str(p7c2)} ${str(p7)}`;\n            // perform an absolute absolute vertical lineto to location (x,y+ry)\n            const p8 = applyMatrix({ x, y: y + ry }, svgTransform);\n            path += `L ${str(p8)}`;\n            // perform an absolute elliptical arc operation to coordinate (x+rx,y)\n            const p9c1 = applyMatrix({ x, y: y + factor * ry }, svgTransform);\n            const p9c2 = applyMatrix({ x: x + factor * rx, y }, svgTransform);\n            path += `C ${str(p9c1)} ${str(p9c2)} ${str(p1)}`;\n            path += 'z';\n        }\n        else {\n            // No rounding, so just construct the respective path as a simple polygon\n            const p1 = applyMatrix({ x, y }, svgTransform);\n            const p2 = applyMatrix({ x: x + width, y }, svgTransform);\n            const p3 = applyMatrix({ x: x + width, y: y + height }, svgTransform);\n            const p4 = applyMatrix({ x, y: y + height }, svgTransform);\n            path += `M ${str(p1)}`;\n            path += `L ${str(p2)}`;\n            path += `L ${str(p3)}`;\n            path += `L ${str(p4)}`;\n            path += `z`;\n        }\n        const result = sketchPath(context, path, parseStyleConfig(context, rect, svgTransform));\n        applyPatternPaint(context, rect, transformedBounds);\n        appendSketchElement(context, rect, result);\n    }\n}\nfunction applyPatternPaint(context, rect, { x, y, w, h }) {\n    appendPatternPaint(context, rect, () => {\n        const proxy = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\n        proxy.x.baseVal.value = x;\n        proxy.y.baseVal.value = y;\n        proxy.width.baseVal.value = w;\n        proxy.height.baseVal.value = h;\n        return proxy;\n    });\n}\nexport function applyRectClip(context, rect, container, svgTransform) {\n    const x = rect.x.baseVal.value;\n    const y = rect.y.baseVal.value;\n    const width = rect.width.baseVal.value;\n    const height = rect.height.baseVal.value;\n    if (width === 0 || height === 0) {\n        // zero-width or zero-height rect will not be rendered\n        return;\n    }\n    const rx = rect.hasAttribute('rx') ? rect.rx.baseVal.value : null;\n    const ry = rect.hasAttribute('ry') ? rect.ry.baseVal.value : null;\n    const clip = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\n    clip.x.baseVal.value = x;\n    clip.y.baseVal.value = y;\n    clip.width.baseVal.value = width;\n    clip.height.baseVal.value = height;\n    if (rx) {\n        clip.rx.baseVal.value = rx;\n    }\n    if (ry) {\n        clip.ry.baseVal.value = ry;\n    }\n    applyTransform(context, svgTransform, clip);\n    container.appendChild(clip);\n}\n","import { getIdFromUrl, getNodeChildren } from './dom-helpers';\nimport { applyCircleClip } from './geom/circle';\nimport { applyEllipseClip } from './geom/ellipse';\nimport { applyPathClip } from './geom/path';\nimport { applyPolygonClip } from './geom/polygon';\nimport { applyRectClip } from './geom/rect';\nimport { getCombinedTransform } from './transformation';\nimport { getDefsElement, SKETCH_CLIP_ATTRIBUTE } from './utils';\n/**\n * Applies the clip-path to the CanvasContext.\n */\nexport function applyClipPath(context, owner, clipPathAttr, svgTransform) {\n    const id = getIdFromUrl(clipPathAttr);\n    if (!id) {\n        return;\n    }\n    const clipPath = context.idElements[id];\n    if (!clipPath) {\n        return;\n    }\n    // TODO clipPath: consider clipPathUnits\n    //  create clipPath defs\n    const targetDefs = getDefsElement(context);\n    // unfortunately, we cannot reuse clip-paths due to the 'global transform' approach\n    const sketchClipPathId = `${id}_${targetDefs.childElementCount}`;\n    const clipContainer = document.createElementNS('http://www.w3.org/2000/svg', 'clipPath');\n    clipContainer.id = sketchClipPathId;\n    storeSketchClipId(owner, sketchClipPathId);\n    // traverse clip-path elements in DFS\n    const stack = [];\n    const children = getNodeChildren(clipPath);\n    for (let i = children.length - 1; i >= 0; i--) {\n        const childElement = children[i];\n        const childTransform = getCombinedTransform(context, childElement, svgTransform);\n        stack.push({ element: childElement, transform: childTransform });\n    }\n    while (stack.length > 0) {\n        const { element, transform } = stack.pop();\n        try {\n            applyElementClip(context, element, clipContainer, transform);\n        }\n        catch (e) {\n            console.error(e);\n        }\n        if (element.tagName === 'defs' ||\n            element.tagName === 'svg' ||\n            element.tagName === 'clipPath' ||\n            element.tagName === 'text') {\n            // some elements are ignored on clippaths\n            continue;\n        }\n        // process children\n        const children = getNodeChildren(element);\n        for (let i = children.length - 1; i >= 0; i--) {\n            const childElement = children[i];\n            const childTransform = getCombinedTransform(context, childElement, transform);\n            stack.push({ element: childElement, transform: childTransform });\n        }\n    }\n    if (clipContainer.childNodes.length > 0) {\n        // add the clip-path only if it contains converted elements\n        // some elements are not yet supported\n        targetDefs.appendChild(clipContainer);\n    }\n}\n/**\n * Creates a clip element and appends it to the given container.\n */\nfunction applyElementClip(context, element, container, svgTransform) {\n    switch (element.tagName) {\n        case 'rect':\n            applyRectClip(context, element, container, svgTransform);\n            break;\n        case 'circle':\n            applyCircleClip(context, element, container, svgTransform);\n            break;\n        case 'ellipse':\n            applyEllipseClip(context, element, container, svgTransform);\n            break;\n        case 'polygon':\n            applyPolygonClip(context, element, container, svgTransform);\n            break;\n        case 'path':\n            applyPathClip(context, element, container, svgTransform);\n            break;\n    }\n}\n/**\n * Store clippath-id on each child for <g> elements, or on the owner itself for other\n * elements.\n *\n * <g> elements are skipped in the processing loop, thus the clip-path id must be stored\n * on the child elements.\n */\nfunction storeSketchClipId(element, id) {\n    if (element.tagName !== 'g') {\n        element.setAttribute(SKETCH_CLIP_ATTRIBUTE, id);\n        return;\n    }\n    const stack = [];\n    const children = getNodeChildren(element);\n    for (let i = children.length - 1; i >= 0; i--) {\n        stack.push(children[i]);\n    }\n    while (stack.length > 0) {\n        const element = stack.pop();\n        element.setAttribute(SKETCH_CLIP_ATTRIBUTE, id);\n        const children = getNodeChildren(element);\n        for (let i = children.length - 1; i >= 0; i--) {\n            stack.push(children[i]);\n        }\n    }\n}\n","import { appendPatternPaint } from '../styles/pattern';\nimport { parseStyleConfig } from '../styles/styles';\nimport { applyTransform, applyMatrix, isIdentityTransform, isTranslationTransform } from '../transformation';\nimport { appendSketchElement, sketchPath } from '../utils';\nimport { str } from './primitives';\nexport function drawCircle(context, circle, svgTransform) {\n    const cx = circle.cx.baseVal.value;\n    const cy = circle.cy.baseVal.value;\n    const r = circle.r.baseVal.value;\n    if (r === 0) {\n        // zero-radius circle is not rendered\n        return;\n    }\n    const center = applyMatrix({ x: cx, y: cy }, svgTransform);\n    const radiusPoint = applyMatrix({ x: cx + r, y: cy + r }, svgTransform);\n    const transformedRadius = radiusPoint.x - center.x;\n    let result;\n    if (isIdentityTransform(svgTransform) || isTranslationTransform(svgTransform)) {\n        // transform a point on the ellipse to get the transformed radius\n        result = context.rc.circle(center.x, center.y, 2 * transformedRadius, Object.assign(Object.assign({}, parseStyleConfig(context, circle, svgTransform)), { preserveVertices: true }));\n    }\n    else {\n        // in other cases we need to construct the path manually.\n        const factor = (4 / 3) * (Math.sqrt(2) - 1);\n        const p1 = applyMatrix({ x: cx + r, y: cy }, svgTransform);\n        const p2 = applyMatrix({ x: cx, y: cy + r }, svgTransform);\n        const p3 = applyMatrix({ x: cx - r, y: cy }, svgTransform);\n        const p4 = applyMatrix({ x: cx, y: cy - r }, svgTransform);\n        const c1 = applyMatrix({ x: cx + r, y: cy + factor * r }, svgTransform);\n        const c2 = applyMatrix({ x: cx + factor * r, y: cy + r }, svgTransform);\n        const c4 = applyMatrix({ x: cx - r, y: cy + factor * r }, svgTransform);\n        const c6 = applyMatrix({ x: cx - factor * r, y: cy - r }, svgTransform);\n        const c8 = applyMatrix({ x: cx + r, y: cy - factor * r }, svgTransform);\n        const path = `M ${str(p1)} C ${str(c1)} ${str(c2)} ${str(p2)} S ${str(c4)} ${str(p3)} S ${str(c6)} ${str(p4)} S ${str(c8)} ${str(p1)}z`;\n        result = sketchPath(context, path, parseStyleConfig(context, circle, svgTransform));\n    }\n    appendPatternPaint(context, circle, () => {\n        const proxy = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\n        proxy.cx.baseVal.value = center.x;\n        proxy.cy.baseVal.value = center.y;\n        proxy.r.baseVal.value = transformedRadius;\n        return proxy;\n    });\n    appendSketchElement(context, circle, result);\n}\nexport function applyCircleClip(context, circle, container, svgTransform) {\n    const cx = circle.cx.baseVal.value;\n    const cy = circle.cy.baseVal.value;\n    const r = circle.r.baseVal.value;\n    if (r === 0) {\n        // zero-radius circle is not rendered\n        return;\n    }\n    const clip = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\n    clip.cx.baseVal.value = cx;\n    clip.cy.baseVal.value = cy;\n    clip.r.baseVal.value = r;\n    applyTransform(context, svgTransform, clip);\n    container.appendChild(clip);\n}\n","import { appendPatternPaint } from '../styles/pattern';\nimport { parseStyleConfig } from '../styles/styles';\nimport { applyTransform, applyMatrix, isIdentityTransform, isTranslationTransform } from '../transformation';\nimport { appendSketchElement, sketchPath } from '../utils';\nimport { str } from './primitives';\nexport function drawEllipse(context, ellipse, svgTransform) {\n    const cx = ellipse.cx.baseVal.value;\n    const cy = ellipse.cy.baseVal.value;\n    const rx = ellipse.rx.baseVal.value;\n    const ry = ellipse.ry.baseVal.value;\n    if (rx === 0 || ry === 0) {\n        // zero-radius ellipse is not rendered\n        return;\n    }\n    const center = applyMatrix({ x: cx, y: cy }, svgTransform);\n    // transform a point on the ellipse to get the transformed radius\n    const radiusPoint = applyMatrix({ x: cx + rx, y: cy + ry }, svgTransform);\n    const transformedRx = radiusPoint.x - center.x;\n    const transformedRy = radiusPoint.y - center.y;\n    let result;\n    if (isIdentityTransform(svgTransform) || isTranslationTransform(svgTransform)) {\n        // Simple case, there's no transform and we can use the ellipse command\n        result = context.rc.ellipse(center.x, center.y, 2 * transformedRx, 2 * transformedRy, Object.assign(Object.assign({}, parseStyleConfig(context, ellipse, svgTransform)), { preserveVertices: true }));\n    }\n    else {\n        // in other cases we need to construct the path manually.\n        const factor = (4 / 3) * (Math.sqrt(2) - 1);\n        const p1 = applyMatrix({ x: cx + rx, y: cy }, svgTransform);\n        const p2 = applyMatrix({ x: cx, y: cy + ry }, svgTransform);\n        const p3 = applyMatrix({ x: cx - rx, y: cy }, svgTransform);\n        const p4 = applyMatrix({ x: cx, y: cy - ry }, svgTransform);\n        const c1 = applyMatrix({ x: cx + rx, y: cy + factor * ry }, svgTransform);\n        const c2 = applyMatrix({ x: cx + factor * rx, y: cy + ry }, svgTransform);\n        const c4 = applyMatrix({ x: cx - rx, y: cy + factor * ry }, svgTransform);\n        const c6 = applyMatrix({ x: cx - factor * rx, y: cy - ry }, svgTransform);\n        const c8 = applyMatrix({ x: cx + rx, y: cy - factor * ry }, svgTransform);\n        const path = `M ${str(p1)} C ${str(c1)} ${str(c2)} ${str(p2)} S ${str(c4)} ${str(p3)} S ${str(c6)} ${str(p4)} S ${str(c8)} ${str(p1)}z`;\n        result = sketchPath(context, path, parseStyleConfig(context, ellipse, svgTransform));\n    }\n    appendPatternPaint(context, ellipse, () => {\n        const proxy = document.createElementNS('http://www.w3.org/2000/svg', 'ellipse');\n        proxy.cx.baseVal.value = center.x;\n        proxy.cy.baseVal.value = center.y;\n        proxy.rx.baseVal.value = transformedRx;\n        proxy.ry.baseVal.value = transformedRy;\n        return proxy;\n    });\n    appendSketchElement(context, ellipse, result);\n}\nexport function applyEllipseClip(context, ellipse, container, svgTransform) {\n    const cx = ellipse.cx.baseVal.value;\n    const cy = ellipse.cy.baseVal.value;\n    const rx = ellipse.rx.baseVal.value;\n    const ry = ellipse.ry.baseVal.value;\n    if (rx === 0 || ry === 0) {\n        // zero-radius ellipse is not rendered\n        return;\n    }\n    const clip = document.createElementNS('http://www.w3.org/2000/svg', 'ellipse');\n    clip.cx.baseVal.value = cx;\n    clip.cy.baseVal.value = cy;\n    clip.rx.baseVal.value = rx;\n    clip.ry.baseVal.value = ry;\n    applyTransform(context, svgTransform, clip);\n    container.appendChild(clip);\n}\n","import { appendPatternPaint } from '../styles/pattern';\nimport { parseStyleConfig } from '../styles/styles';\nimport { applyTransform, applyMatrix } from '../transformation';\nimport { appendSketchElement, getPointsArray } from '../utils';\nimport { drawMarkers } from './marker';\nexport function drawPolygon(context, polygon, svgTransform) {\n    const points = getPointsArray(polygon);\n    const transformed = points.map(p => {\n        const pt = applyMatrix(p, svgTransform);\n        return [pt.x, pt.y];\n    });\n    const polygonSketch = context.rc.polygon(transformed, parseStyleConfig(context, polygon, svgTransform));\n    appendPatternPaint(context, polygon, () => {\n        const proxy = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');\n        proxy.setAttribute('points', transformed.join(' '));\n        return proxy;\n    });\n    appendSketchElement(context, polygon, polygonSketch);\n    // https://www.w3.org/TR/SVG11/painting.html#MarkerProperties\n    // Note that for a path element which ends with a closed sub-path,\n    // the last vertex is the same as the initial vertex on the given\n    // sub-path (same applies to polygon).\n    if (points.length > 0) {\n        points.push(points[0]);\n        drawMarkers(context, polygon, points, svgTransform);\n    }\n}\nexport function applyPolygonClip(context, polygon, container, svgTransform) {\n    const clip = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');\n    clip.setAttribute('points', polygon.getAttribute('points'));\n    applyTransform(context, svgTransform, clip);\n    container.appendChild(clip);\n}\n","import { encodeSVGPath, SVGPathData, SVGPathDataTransformer } from 'svg-pathdata';\nimport { appendPatternPaint } from '../styles/pattern';\nimport { parseStyleConfig } from '../styles/styles';\nimport { applyTransform } from '../transformation';\nimport { appendSketchElement, sketchPath } from '../utils';\nimport { drawMarkers } from './marker';\nexport function drawPath(context, path, svgTransform) {\n    const dataAttrs = path.getAttribute('d');\n    const pathData = \n    // Parse path data and convert to absolute coordinates\n    new SVGPathData(dataAttrs)\n        .toAbs()\n        // Normalize H and V to L commands - those cannot work with how we draw transformed paths otherwise\n        .transform(SVGPathDataTransformer.NORMALIZE_HVZ())\n        // Normalize S and T to Q and C commands - Rough.js has a bug with T where it expects 4 parameters instead of 2\n        .transform(SVGPathDataTransformer.NORMALIZE_ST());\n    // If there's a transform, transform the whole path accordingly\n    const transformedPathData = new SVGPathData(\n    // clone the commands, we might need them untransformed for markers\n    pathData.commands.map(cmd => Object.assign({}, cmd)));\n    if (svgTransform) {\n        transformedPathData.transform(SVGPathDataTransformer.MATRIX(svgTransform.matrix.a, svgTransform.matrix.b, svgTransform.matrix.c, svgTransform.matrix.d, svgTransform.matrix.e, svgTransform.matrix.f));\n    }\n    const encodedPathData = encodeSVGPath(transformedPathData.commands);\n    if (encodedPathData.indexOf('undefined') !== -1) {\n        // DEBUG STUFF\n        console.error('broken path data');\n        return;\n    }\n    const pathSketch = sketchPath(context, encodedPathData, parseStyleConfig(context, path, svgTransform));\n    appendPatternPaint(context, path, () => {\n        const proxy = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n        proxy.setAttribute('d', encodedPathData);\n        return proxy;\n    });\n    appendSketchElement(context, path, pathSketch);\n    // https://www.w3.org/TR/SVG11/painting.html#MarkerProperties\n    // Note that for a path element which ends with a closed sub-path,\n    // the last vertex is the same as the initial vertex on the given\n    // sub-path (same applies to polygon).\n    const points = [];\n    let currentSubPathBegin;\n    pathData.commands.forEach(cmd => {\n        switch (cmd.type) {\n            case SVGPathData.MOVE_TO: {\n                const p = { x: cmd.x, y: cmd.y };\n                points.push(p);\n                // each moveto starts a new subpath\n                currentSubPathBegin = p;\n                break;\n            }\n            case SVGPathData.LINE_TO:\n            case SVGPathData.QUAD_TO:\n            case SVGPathData.SMOOTH_QUAD_TO:\n            case SVGPathData.CURVE_TO:\n            case SVGPathData.SMOOTH_CURVE_TO:\n            case SVGPathData.ARC:\n                points.push({ x: cmd.x, y: cmd.y });\n                break;\n            case SVGPathData.HORIZ_LINE_TO:\n                points.push({ x: cmd.x, y: 0 });\n                break;\n            case SVGPathData.VERT_LINE_TO:\n                points.push({ x: 0, y: cmd.y });\n                break;\n            case SVGPathData.CLOSE_PATH:\n                if (currentSubPathBegin) {\n                    points.push(currentSubPathBegin);\n                }\n                break;\n        }\n    });\n    drawMarkers(context, path, points, svgTransform);\n}\nexport function applyPathClip(context, path, container, svgTransform) {\n    const clip = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n    clip.setAttribute('d', path.getAttribute('d'));\n    applyTransform(context, svgTransform, clip);\n    container.appendChild(clip);\n}\n","import { getNodeChildren } from '../dom-helpers';\nimport { getEffectiveAttribute } from '../styles/effective-attributes';\nimport { concatStyleStrings } from '../styles/styles';\nimport { convertToPixelUnit } from '../svg-units';\nimport { applyTransform } from '../transformation';\nimport { SKETCH_CLIP_ATTRIBUTE, appendSketchElement, measureText } from '../utils';\nexport function drawText(context, text, svgTransform) {\n    const container = document.createElementNS('http://www.w3.org/2000/svg', 'g');\n    container.setAttribute('class', 'text-container');\n    applyTransform(context, svgTransform, container);\n    const textClone = text.cloneNode(true);\n    if (textClone.transform.baseVal.numberOfItems > 0) {\n        // remove transformation, since it is transformed globally by its parent container\n        textClone.transform.baseVal.clear();\n    }\n    // clip-path is applied on the container\n    textClone.removeAttribute('clip-path');\n    const { cssFont, fontSize: effectiveFontSize } = getCssFont(context, text, true);\n    textClone.setAttribute('style', concatStyleStrings(textClone.getAttribute('style'), cssFont));\n    copyTextStyleAttributes(context, text, textClone);\n    // apply styling to any tspan\n    if (textClone.childElementCount > 0) {\n        const children = getNodeChildren(textClone);\n        const origChildren = getNodeChildren(text);\n        for (let i = 0; i < children.length; i++) {\n            const child = children[i];\n            if (child instanceof SVGTSpanElement) {\n                copyTextStyleAttributes(context, origChildren[i], child);\n            }\n        }\n    }\n    container.appendChild(textClone);\n    appendSketchElement(context, text, container);\n    // avoid text clipping by scaling the text when changing the font\n    const useCustomFontFamily = context.fontFamily !== null;\n    const hasClipPath = textClone.hasAttribute(SKETCH_CLIP_ATTRIBUTE);\n    if (useCustomFontFamily && hasClipPath && effectiveFontSize) {\n        fitFontSize(context, text, textClone, effectiveFontSize);\n    }\n}\n/**\n * Applies a font-size on the clone such that the clone has a smaller width than the original element.\n * Only fits the width because the height is usually no problem wrt. clipping.\n */\nfunction fitFontSize(context, original, clone, effectiveFontSize) {\n    const { width, height } = original.getBBox();\n    if (width <= 0 || height <= 0) {\n        return;\n    }\n    const fontSizePx = convertToPixelUnit(context, clone, effectiveFontSize, 'font-size');\n    fitFontSizeCore(context, { w: width, h: height }, clone, fontSizePx);\n}\n/**\n * Recursively shrinks the font-size on the element until its width is smaller than the original width.\n */\nfunction fitFontSizeCore(context, originalSize, clone, fontSizePx) {\n    const STEP_SIZE = 1;\n    const { w: cloneWidth } = measureText(context, clone);\n    if (cloneWidth < originalSize.w) {\n        // fits original width\n        return;\n    }\n    if (fontSizePx <= 1) {\n        // already too small\n        return;\n    }\n    // try a smaller size\n    const newFontSize = fontSizePx - STEP_SIZE;\n    clone.style.fontSize = `${newFontSize}px`;\n    // check again\n    fitFontSizeCore(context, originalSize, clone, newFontSize);\n}\n/**\n * @param asStyleString Formats the return value as inline style string\n */\nfunction getCssFont(context, text, asStyleString = false) {\n    const effectiveAttributes = {};\n    let cssFont = '';\n    const fontStyle = getEffectiveAttribute(context, text, 'font-style', context.useElementContext);\n    if (fontStyle) {\n        cssFont += asStyleString ? `font-style: ${fontStyle};` : fontStyle;\n        effectiveAttributes.fontStyle = fontStyle;\n    }\n    const fontWeight = getEffectiveAttribute(context, text, 'font-weight', context.useElementContext);\n    if (fontWeight) {\n        cssFont += asStyleString ? `font-weight: ${fontWeight};` : ` ${fontWeight}`;\n        effectiveAttributes.fontWeight = fontWeight;\n    }\n    const fontSize = getEffectiveAttribute(context, text, 'font-size', context.useElementContext);\n    if (fontSize) {\n        cssFont += asStyleString ? `font-size: ${fontSize};` : ` ${fontSize}`;\n        effectiveAttributes.fontSize = fontSize;\n    }\n    if (context.fontFamily) {\n        cssFont += asStyleString ? `font-family: ${context.fontFamily};` : ` ${context.fontFamily}`;\n        effectiveAttributes.fontFamiliy = context.fontFamily;\n    }\n    else {\n        const fontFamily = getEffectiveAttribute(context, text, 'font-family', context.useElementContext);\n        if (fontFamily) {\n            cssFont += asStyleString ? `font-family: ${fontFamily};` : ` ${fontFamily}`;\n            effectiveAttributes.fontFamiliy = fontFamily;\n        }\n    }\n    cssFont = cssFont.trim();\n    return Object.assign(Object.assign({}, effectiveAttributes), { cssFont });\n}\nfunction copyTextStyleAttributes(context, srcElement, tgtElement) {\n    const stroke = getEffectiveAttribute(context, srcElement, 'stroke');\n    const strokeWidth = stroke ? getEffectiveAttribute(context, srcElement, 'stroke-width') : null;\n    const fill = getEffectiveAttribute(context, srcElement, 'fill');\n    const dominantBaseline = getEffectiveAttribute(context, srcElement, 'dominant-baseline');\n    const textAnchor = getEffectiveAttribute(context, srcElement, 'text-anchor', context.useElementContext);\n    if (stroke) {\n        tgtElement.setAttribute('stroke', stroke);\n    }\n    if (strokeWidth) {\n        tgtElement.setAttribute('stroke-width', strokeWidth);\n    }\n    if (fill) {\n        tgtElement.setAttribute('fill', fill);\n    }\n    if (textAnchor) {\n        tgtElement.setAttribute('text-anchor', textAnchor);\n    }\n    if (dominantBaseline) {\n        tgtElement.setAttribute('dominant-baseline', dominantBaseline);\n    }\n}\n","import { applyClipPath } from './clipping';\nimport { getNodeChildren } from './dom-helpers';\nimport { drawCircle } from './geom/circle';\nimport { drawEllipse } from './geom/ellipse';\nimport { drawForeignObject } from './geom/foreign-object';\nimport { drawImage } from './geom/image';\nimport { drawLine } from './geom/line';\nimport { drawPath } from './geom/path';\nimport { drawPolygon } from './geom/polygon';\nimport { drawPolyline } from './geom/polyline';\nimport { drawRect } from './geom/rect';\nimport { drawText } from './geom/text';\nimport { drawUse } from './geom/use';\nimport { isHidden } from './styles/styles';\nimport { getCombinedTransform } from './transformation';\n/**\n * Traverses the SVG in DFS and draws each element to the canvas.\n * @param root either an SVG- or g-element\n * @param width Use elements can overwrite width\n * @param height Use elements can overwrite height\n */\nexport function processRoot(context, root, svgTransform, width, height) {\n    var _a, _b;\n    // traverse svg in DFS\n    const stack = [];\n    const currentViewBox = { x: 0, y: 0, w: width !== null && width !== void 0 ? width : 0, h: height !== null && height !== void 0 ? height : 0 };\n    if (root instanceof SVGSVGElement ||\n        root instanceof SVGSymbolElement ||\n        root instanceof SVGMarkerElement) {\n        let rootX = 0;\n        let rootY = 0;\n        if (root instanceof SVGSymbolElement) {\n            rootX = parseFloat((_a = root.getAttribute('x')) !== null && _a !== void 0 ? _a : '') || 0;\n            rootY = parseFloat((_b = root.getAttribute('y')) !== null && _b !== void 0 ? _b : '') || 0;\n            width = width !== null && width !== void 0 ? width : (parseFloat(root.getAttribute('width')) || void 0);\n            height = height !== null && height !== void 0 ? height : (parseFloat(root.getAttribute('height')) || void 0);\n        }\n        else if (root instanceof SVGMarkerElement) {\n            // markers use refX / refY which is applied after user-space transformation\n            const mw = root.getAttribute('markerWidth');\n            const mh = root.getAttribute('markerHeight');\n            width = mw !== null ? parseFloat(mw) : 3; // marker-size is 3 by SVG spec\n            height = mh !== null ? parseFloat(mh) : 3;\n        }\n        else if (root !== context.sourceSvg) {\n            // apply translation of nested elements\n            rootX = root.x.baseVal.value;\n            rootY = root.y.baseVal.value;\n        }\n        let rootTransform = context.sourceSvg.createSVGMatrix();\n        if (root.getAttribute('viewBox')) {\n            const { x: viewBoxX, y: viewBoxY, width: viewBoxWidth, height: viewBoxHeight } = root.viewBox.baseVal;\n            currentViewBox.x = viewBoxX;\n            currentViewBox.y = viewBoxY;\n            currentViewBox.w = viewBoxWidth;\n            currentViewBox.h = viewBoxHeight;\n            if (typeof width !== 'undefined' && typeof height !== 'undefined') {\n                // viewBox values might scale the SVGs content\n                const sx = width / viewBoxWidth;\n                const sy = height / viewBoxHeight;\n                const centerviewportX = rootX + width * 0.5;\n                const centerviewportY = rootY + height * 0.5;\n                const centerViewBoxX = viewBoxX + viewBoxWidth * 0.5;\n                const centerViewBoxY = viewBoxY + viewBoxHeight * 0.5;\n                // only support scaling from the center, e.g. xMidYMid\n                rootTransform = rootTransform.translate(centerviewportX, centerviewportY);\n                if (root.getAttribute('preserveAspectRatio') === 'none') {\n                    rootTransform = rootTransform.scaleNonUniform(sx, sy);\n                }\n                else {\n                    rootTransform = rootTransform.scale(Math.min(sx, sy));\n                }\n                rootTransform = rootTransform.translate(-centerViewBoxX, -centerViewBoxY);\n            }\n        }\n        else {\n            rootTransform = rootTransform.translate(rootX, rootY);\n        }\n        if (root instanceof SVGMarkerElement) {\n            // https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/refX#symbol\n            // ref coordinates are interpreted as being in the coordinate system of the element contents,\n            // after application of the viewBox and preserveAspectRatio attributes.\n            rootTransform = rootTransform.translate(-root.refX.baseVal.value, -root.refY.baseVal.value);\n        }\n        const combinedMatrix = svgTransform\n            ? svgTransform.matrix.multiply(rootTransform)\n            : rootTransform;\n        svgTransform = context.sourceSvg.createSVGTransformFromMatrix(combinedMatrix);\n        // don't put the SVG itself into the stack, so start with the children of it\n        const children = getNodeChildren(root);\n        for (let i = children.length - 1; i >= 0; i--) {\n            const child = children[i];\n            if (child instanceof SVGSymbolElement || child instanceof SVGMarkerElement) {\n                // symbols and marker can only be instantiated by specific elements\n                continue;\n            }\n            const childTransform = getCombinedTransform(context, child, svgTransform);\n            stack.push({ element: child, transform: childTransform, viewBox: currentViewBox });\n        }\n    }\n    else {\n        stack.push({ element: root, transform: svgTransform, viewBox: currentViewBox });\n    }\n    while (stack.length > 0) {\n        const { element, transform, viewBox } = stack.pop();\n        // maybe draw the element\n        try {\n            context.viewBox = viewBox;\n            drawElement(context, element, transform);\n        }\n        catch (e) {\n            console.error(e);\n        }\n        if (element.tagName === 'defs' ||\n            element.tagName === 'symbol' ||\n            element.tagName === 'marker' ||\n            element.tagName === 'svg' ||\n            element.tagName === 'clipPath') {\n            // Defs are prepocessed separately.\n            // Symbols and marker can only be instantiated by specific elements.\n            // Don't traverse the SVG element itself. This is done by drawElement -> processRoot.\n            // ClipPaths are not drawn and processed separately.\n            continue;\n        }\n        // process children\n        const children = getNodeChildren(element);\n        for (let i = children.length - 1; i >= 0; i--) {\n            const childElement = children[i];\n            const newTransform = getCombinedTransform(context, childElement, transform);\n            stack.push({ element: childElement, transform: newTransform, viewBox });\n        }\n    }\n}\nexport function drawRoot(context, element, svgTransform) {\n    let width = parseFloat(element.getAttribute('width'));\n    let height = parseFloat(element.getAttribute('height'));\n    if (isNaN(width) || isNaN(height)) {\n        // use only if both are set\n        width = height = undefined;\n    }\n    processRoot(context, element, svgTransform, width, height);\n}\n/**\n * The main switch to delegate drawing of `SVGElement`s\n * to different subroutines.\n */\nfunction drawElement(context, element, svgTransform) {\n    if (isHidden(element)) {\n        // just skip hidden elements\n        return;\n    }\n    // possibly apply a clip on the canvas before drawing on it\n    const clipPath = element.getAttribute('clip-path');\n    if (clipPath) {\n        applyClipPath(context, element, clipPath, svgTransform);\n    }\n    switch (element.tagName) {\n        case 'svg':\n        case 'symbol':\n            drawRoot(context, element, svgTransform);\n            break;\n        case 'rect':\n            drawRect(context, element, svgTransform);\n            break;\n        case 'path':\n            drawPath(context, element, svgTransform);\n            break;\n        case 'use':\n            drawUse(context, element, svgTransform);\n            break;\n        case 'line':\n            drawLine(context, element, svgTransform);\n            break;\n        case 'circle':\n            drawCircle(context, element, svgTransform);\n            break;\n        case 'ellipse':\n            drawEllipse(context, element, svgTransform);\n            break;\n        case 'polyline':\n            drawPolyline(context, element, svgTransform);\n            break;\n        case 'polygon':\n            drawPolygon(context, element, svgTransform);\n            break;\n        case 'text':\n            drawText(context, element, svgTransform);\n            break;\n        case 'image':\n            drawImage(context, element, svgTransform);\n            break;\n        case 'foreignObject':\n            drawForeignObject(context, element, svgTransform);\n            break;\n    }\n}\n","import { getCombinedTransform } from '../transformation';\nexport function drawUse(context, use, svgTransform) {\n    let href = use.href.baseVal;\n    if (href.startsWith('#')) {\n        href = href.substring(1);\n    }\n    const defElement = context.idElements[href];\n    if (defElement) {\n        let useWidth, useHeight;\n        if (use.getAttribute('width') && use.getAttribute('height')) {\n            // Use elements can overwrite the width which is important if it is a nested SVG\n            useWidth = use.width.baseVal.value;\n            useHeight = use.height.baseVal.value;\n        }\n        // We need to account for x and y attributes as well. Those change where the element is drawn.\n        // We can simply change the transform to include that.\n        const x = use.x.baseVal.value;\n        const y = use.y.baseVal.value;\n        let matrix = context.sourceSvg.createSVGMatrix().translate(x, y);\n        matrix = svgTransform ? svgTransform.matrix.multiply(matrix) : matrix;\n        // the defsElement itself might have a transform that needs to be incorporated\n        const elementTransform = context.sourceSvg.createSVGTransformFromMatrix(matrix);\n        // use elements must be processed in their context, particularly regarding\n        // the styling of them\n        if (!context.useElementContext) {\n            context.useElementContext = { root: use, referenced: defElement, parentContext: null };\n        }\n        else {\n            const newContext = {\n                root: use,\n                referenced: defElement,\n                parentContext: Object.assign({}, context.useElementContext)\n            };\n            context.useElementContext = newContext;\n        }\n        // draw the referenced element\n        context.processElement(context, defElement, getCombinedTransform(context, defElement, elementTransform), useWidth, useHeight);\n        // restore default context\n        if (context.useElementContext.parentContext) {\n            context.useElementContext = context.useElementContext.parentContext;\n        }\n        else {\n            context.useElementContext = null;\n        }\n    }\n}\n","import { appendPatternPaint } from '../styles/pattern';\nimport { parseStyleConfig } from '../styles/styles';\nimport { applyMatrix } from '../transformation';\nimport { appendSketchElement } from '../utils';\nimport { drawMarkers } from './marker';\nexport function drawLine(context, line, svgTransform) {\n    const p1 = { x: line.x1.baseVal.value, y: line.y1.baseVal.value };\n    const p2 = { x: line.x2.baseVal.value, y: line.y2.baseVal.value };\n    const { x: tp1x, y: tp1y } = applyMatrix(p1, svgTransform);\n    const { x: tp2x, y: tp2y } = applyMatrix(p2, svgTransform);\n    if (tp1x === tp2x && tp1y === tp2y) {\n        // zero-length line is not rendered\n        return;\n    }\n    const lineSketch = context.rc.line(tp1x, tp1y, tp2x, tp2y, parseStyleConfig(context, line, svgTransform));\n    appendPatternPaint(context, line, () => {\n        const proxy = document.createElementNS('http://www.w3.org/2000/svg', 'line');\n        proxy.x1.baseVal.value = tp1x;\n        proxy.y1.baseVal.value = tp1y;\n        proxy.x2.baseVal.value = tp2x;\n        proxy.y2.baseVal.value = tp2y;\n        return proxy;\n    });\n    appendSketchElement(context, line, lineSketch);\n    drawMarkers(context, line, [p1, p2], svgTransform);\n}\n","import { appendPatternPaint } from '../styles/pattern';\nimport { parseStyleConfig } from '../styles/styles';\nimport { applyMatrix } from '../transformation';\nimport { appendSketchElement, getPointsArray } from '../utils';\nimport { drawMarkers } from './marker';\nexport function drawPolyline(context, polyline, svgTransform) {\n    const points = getPointsArray(polyline);\n    const transformed = points.map(p => {\n        const pt = applyMatrix(p, svgTransform);\n        return [pt.x, pt.y];\n    });\n    const style = parseStyleConfig(context, polyline, svgTransform);\n    appendPatternPaint(context, polyline, () => {\n        const proxy = document.createElementNS('http://www.w3.org/2000/svg', 'polyline');\n        proxy.setAttribute('points', transformed.join(' '));\n        return proxy;\n    });\n    if (style.fill && style.fill !== 'none') {\n        const fillStyle = Object.assign(Object.assign({}, style), { stroke: 'none' });\n        appendSketchElement(context, polyline, context.rc.polygon(transformed, fillStyle));\n    }\n    appendSketchElement(context, polyline, context.rc.linearPath(transformed, style));\n    drawMarkers(context, polyline, points, svgTransform);\n}\n","import { applyTransform } from '../transformation';\nimport { appendSketchElement } from '../utils';\nexport function drawImage(context, svgImage, svgTransform) {\n    const href = svgImage.href.baseVal;\n    const x = svgImage.x.baseVal.value;\n    const y = svgImage.y.baseVal.value;\n    let width, height;\n    if (svgImage.getAttribute('width') && svgImage.getAttribute('height')) {\n        width = svgImage.width.baseVal.value;\n        height = svgImage.height.baseVal.value;\n    }\n    if (href.startsWith('data:') && href.indexOf('image/svg+xml') !== -1) {\n        // data:[<media type>][;charset=<character set>][;base64],<data>\n        const dataUrlRegex = /^data:([^,]*),(.*)/;\n        const match = dataUrlRegex.exec(href);\n        if (match && match.length > 2) {\n            const meta = match[1];\n            let svgString = match[2];\n            const isBase64 = meta.indexOf('base64') !== -1;\n            const isUtf8 = meta.indexOf('utf8') !== -1;\n            if (isBase64) {\n                svgString = atob(svgString);\n            }\n            if (!isUtf8) {\n                svgString = decodeURIComponent(svgString);\n            }\n            const parser = new DOMParser();\n            const doc = parser.parseFromString(svgString, 'image/svg+xml');\n            const svg = doc.firstChild;\n            let matrix = context.sourceSvg.createSVGMatrix().translate(x, y);\n            matrix = svgTransform ? svgTransform.matrix.multiply(matrix) : matrix;\n            context.processElement(context, svg, context.sourceSvg.createSVGTransformFromMatrix(matrix), width, height);\n            return;\n        }\n    }\n    else {\n        const imageClone = svgImage.cloneNode();\n        const container = document.createElementNS('http://www.w3.org/2000/svg', 'g');\n        applyTransform(context, svgTransform, container);\n        container.appendChild(imageClone);\n        appendSketchElement(context, svgImage, container);\n    }\n}\n","import { applyTransform } from '../transformation';\nimport { appendSketchElement } from '../utils';\nexport function drawForeignObject(context, foreignObject, svgTransform) {\n    const foreignObjectClone = foreignObject.cloneNode(true);\n    const container = document.createElementNS('http://www.w3.org/2000/svg', 'g');\n    // foreignObject often relies on CSS styling, and just copying the <style> element\n    // won't do the trick, because sketching the SVG rebuilds the entire element tree, thus\n    // existing CSS rules don't apply anymore in most cases.\n    //\n    // To to make the MOST SIMPLE cases of foreignObject text elements work better,\n    // try to apply the computed style on the new SVG container.\n    // To properly fix it, we'd need to inline all computed styles recursively on the\n    // foreignObject tree.\n    const copyStyleProperties = [\n        'color',\n        'font-family',\n        'font-size',\n        'font-style',\n        'font-variant',\n        'font-weight'\n    ];\n    const style = getComputedStyle(foreignObject);\n    for (const prop of copyStyleProperties) {\n        container.style.setProperty(prop, style.getPropertyValue(prop));\n    }\n    // transform is already considered in svgTransform\n    foreignObjectClone.transform.baseVal.clear();\n    // transform the foreignObject to its destination location\n    applyTransform(context, svgTransform, container);\n    container.appendChild(foreignObjectClone);\n    appendSketchElement(context, foreignObjectClone, container);\n}\n","import { Random } from 'roughjs/bin/math';\n/**\n * A simple random number generator that allows for seeding.\n */\nexport class RandomNumberGenerator {\n    constructor(seed) {\n        // since we already depend on Rough.js, we may just use its seedable RNG implementation\n        this.rng = seed ? new Random(seed) : null;\n    }\n    /**\n     * Returns a random number in the given range.\n     */\n    next(range) {\n        var _a, _b;\n        const rnd = (_b = (_a = this.rng) === null || _a === void 0 ? void 0 : _a.next()) !== null && _b !== void 0 ? _b : Math.random();\n        if (range) {\n            const min = range[0];\n            const max = range[1];\n            return rnd * (max - min) + min;\n        }\n        return rnd;\n    }\n}\n","import rough from 'roughjs/bin/rough';\nimport { OutputType } from './OutputType';\nimport { processRoot } from './processor';\nimport { createPencilFilter } from './styles/textures';\nimport { getDefsElement } from './utils';\nimport { RandomNumberGenerator } from './RandomNumberGenerator';\n/**\n * Svg2Roughjs parses an SVG and converts it to a hand-drawn sketch.\n */\nexport class Svg2Roughjs {\n    /**\n     * Set the SVG that should be sketched.\n     */\n    set svg(svg) {\n        if (this.$svg !== svg) {\n            this.$svg = svg;\n            this.sourceSvgChanged();\n        }\n    }\n    /**\n     * Returns the SVG that should be sketched.\n     */\n    get svg() {\n        return this.$svg;\n    }\n    /**\n     * Sets the output format of the sketch.\n     *\n     * Applies only to instances that have been created with a\n     * container as output element instead of an actual SVG or canvas\n     * element.\n     *\n     * Throws when the given mode does not match the output element\n     * with which this instance was created.\n     */\n    set outputType(type) {\n        if (this.$outputType === type) {\n            return;\n        }\n        const incompatible = (type === OutputType.CANVAS && this.outputElement instanceof SVGSVGElement) ||\n            (type === OutputType.SVG && this.outputElement instanceof HTMLCanvasElement);\n        if (incompatible) {\n            throw new Error(`Output format ${type} incompatible with given output element ${this.outputElement.tagName}`);\n        }\n        this.$outputType = type;\n    }\n    /**\n     * Returns the currently configured output type.\n     */\n    get outputType() {\n        return this.$outputType;\n    }\n    /**\n     * Sets the config object that is passed to Rough.js and considered\n     * during rendering of the `SVGElement`s.\n     *\n     * Sets `fixedDecimalPlaceDigits` to `3` if not specified otherwise.\n     */\n    set roughConfig(config) {\n        if (typeof config.fixedDecimalPlaceDigits === 'undefined') {\n            config.fixedDecimalPlaceDigits = 3;\n        }\n        this.$roughConfig = config;\n    }\n    /**\n     * Returns the currently configured rendering configuration.\n     */\n    get roughConfig() {\n        return this.$roughConfig;\n    }\n    /**\n     * Creates a new instance of Svg2roughjs.\n     * @param target Either a container `HTMLDivElement` (or a selector for the container) to which a sketch should be added\n     * or an `HTMLCanvasElement` or `SVGSVGElement` that should be used as output target.\n     * @param outputType Whether the output should be an SVG or drawn to an HTML canvas.\n     * Defaults to SVG or CANVAS depending if the given target is of type `HTMLCanvasElement` or `SVGSVGElement`,\n     * otherwise it defaults to SVG.\n     * @param roughConfig Config object that is passed to Rough.js and considered during\n     * rendering of the `SVGElement`s.\n     */\n    constructor(target, outputType = OutputType.SVG, roughConfig = {}) {\n        /**\n         * Optional solid background color with which the canvas should be initialized.\n         * It is drawn on a transparent canvas by default.\n         */\n        this.backgroundColor = null;\n        /**\n         * Set a font-family for the rendering of text elements.\n         * If set to `null`, then the font-family of the SVGTextElement is used.\n         * By default, 'Comic Sans MS, cursive' is used.\n         */\n        this.fontFamily = 'Comic Sans MS, cursive';\n        /**\n         * Whether to randomize Rough.js' fillWeight, hachureAngle and hachureGap.\n         * Also randomizes the disableMultiStroke option of Rough.js.\n         * The randomness may be seeded with the `seed` property.\n         * By default `true`.\n         */\n        this.randomize = true;\n        /**\n         * Optional seed for the randomness when creating the sketch.\n         * Providing a value implicitly seeds Rough.js which may be overwritten\n         * by provding a different seed with the optional `roughConfig` property.\n         * By default `null`.\n         */\n        this.seed = null;\n        /**\n         * Whether pattern elements should be sketched or just copied to the output.\n         * For smaller pattern base sizes, it's often beneficial to just copy it over\n         * as the sketch will be too smalle to actually look sketched at all.\n         */\n        this.sketchPatterns = true;\n        /**\n         * Whether to apply a pencil filter.\n         */\n        this.pencilFilter = false;\n        this.width = 0;\n        this.height = 0;\n        this.$roughConfig = {};\n        this.idElements = {};\n        this.lastResult = null;\n        if (!target) {\n            throw new Error('No target provided');\n        }\n        const targetElement = typeof target === 'string' ? document.querySelector(target) : target;\n        if (!targetElement) {\n            throw new Error('Could not find target in document');\n        }\n        this.roughConfig = roughConfig;\n        this.outputElement = targetElement;\n        if (targetElement instanceof HTMLCanvasElement) {\n            this.$outputType = OutputType.CANVAS;\n        }\n        else if (targetElement instanceof SVGSVGElement) {\n            this.$outputType = OutputType.SVG;\n        }\n        else {\n            this.$outputType = outputType;\n        }\n    }\n    /**\n     * Triggers an entire redraw of the SVG which\n     * processes the input element anew.\n     * @param sourceSvgChanged When `true`, the given {@link svg} is re-evaluated as if it was set anew.\n     *  This allows the Svg2Rough.js instance to be used mutliple times with the same source SVG container but different contents.\n     * @returns A promise that resolves with the sketched output element or null if no {@link svg} is set.\n     */\n    sketch(sourceSvgChanged = false) {\n        var _a, _b;\n        if (!this.svg) {\n            return Promise.resolve(null);\n        }\n        if (sourceSvgChanged) {\n            this.sourceSvgChanged();\n        }\n        const sketchContainer = this.prepareRenderContainer();\n        const renderContext = this.createRenderContext(sketchContainer);\n        // prepare filter effects\n        if (this.pencilFilter) {\n            const defs = getDefsElement(renderContext);\n            defs.appendChild(createPencilFilter());\n        }\n        // sketchify the SVG\n        renderContext.processElement(renderContext, this.svg, null, this.width, this.height);\n        if (this.outputElement instanceof SVGSVGElement) {\n            // sketch already in the outputElement\n            return Promise.resolve(this.outputElement);\n        }\n        else if (this.outputElement instanceof HTMLCanvasElement) {\n            return this.drawToCanvas(renderContext, this.outputElement);\n        }\n        // remove the previous attached result\n        (_b = (_a = this.lastResult) === null || _a === void 0 ? void 0 : _a.parentNode) === null || _b === void 0 ? void 0 : _b.removeChild(this.lastResult);\n        // assume that the given output element is a container, thus append the sketch to it\n        if (this.outputType === OutputType.SVG) {\n            const svgSketch = renderContext.svgSketch;\n            this.outputElement.appendChild(svgSketch);\n            this.lastResult = svgSketch;\n            return Promise.resolve(svgSketch);\n        }\n        else {\n            // canvas output type\n            const canvas = document.createElement('canvas');\n            this.outputElement.appendChild(canvas);\n            this.lastResult = canvas;\n            return this.drawToCanvas(renderContext, canvas);\n        }\n    }\n    /**\n     * Creates a new context which contains the current state of the\n     * Svg2Roughs instance for rendering.\n     */\n    createRenderContext(sketchContainer) {\n        if (!this.svg) {\n            throw new Error('No source SVG set yet.');\n        }\n        let roughConfig = this.roughConfig;\n        if (this.seed !== null) {\n            roughConfig = Object.assign({ seed: this.seed }, roughConfig);\n        }\n        return {\n            rc: rough.svg(sketchContainer, { options: roughConfig }),\n            roughConfig: this.roughConfig,\n            fontFamily: this.fontFamily,\n            pencilFilter: this.pencilFilter,\n            randomize: this.randomize,\n            rng: new RandomNumberGenerator(this.seed),\n            sketchPatterns: this.sketchPatterns,\n            idElements: this.idElements,\n            sourceSvg: this.svg,\n            svgSketch: sketchContainer,\n            svgSketchIsInDOM: document.body.contains(sketchContainer),\n            styleSheets: Array.from(this.svg.querySelectorAll('style'))\n                .map(s => s.sheet)\n                .filter(s => s !== null),\n            processElement: processRoot\n        };\n    }\n    /**\n     * Helper method to draw the sketched SVG to a HTMLCanvasElement.\n     */\n    drawToCanvas(renderContext, canvas) {\n        canvas.width = this.width;\n        canvas.height = this.height;\n        const canvasCtx = canvas.getContext('2d');\n        canvasCtx.clearRect(0, 0, this.width, this.height);\n        return new Promise(resolve => {\n            const svgString = new XMLSerializer().serializeToString(renderContext.svgSketch);\n            const img = new Image();\n            img.onload = function () {\n                canvasCtx.drawImage(this, 0, 0);\n                resolve(canvas);\n            };\n            img.src = `data:image/svg+xml;charset=utf8,${encodeURIComponent(svgString)}`;\n        });\n    }\n    /**\n     * Prepares the given SVG element depending on the set properties.\n     */\n    prepareRenderContainer() {\n        let svgElement;\n        if (this.outputElement instanceof SVGSVGElement) {\n            // just use the user given outputElement directly as sketch-container\n            svgElement = this.outputElement;\n        }\n        else {\n            // we need a separate svgElement as output element\n            svgElement = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n        }\n        // make sure it has all the proper namespaces\n        svgElement.setAttribute('xmlns', 'http://www.w3.org/2000/svg');\n        svgElement.setAttributeNS('http://www.w3.org/2000/xmlns/', 'xmlns:xlink', 'http://www.w3.org/1999/xlink');\n        // clear SVG element\n        while (svgElement.firstChild) {\n            svgElement.removeChild(svgElement.firstChild);\n        }\n        // set size\n        svgElement.setAttribute('width', this.width.toString());\n        svgElement.setAttribute('height', this.height.toString());\n        // apply backgroundColor\n        let backgroundElement;\n        if (this.backgroundColor) {\n            backgroundElement = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\n            backgroundElement.width.baseVal.value = this.width;\n            backgroundElement.height.baseVal.value = this.height;\n            backgroundElement.setAttribute('fill', this.backgroundColor);\n            svgElement.appendChild(backgroundElement);\n        }\n        // use round linecap to emphasize a ballpoint pen like drawing\n        svgElement.setAttribute('stroke-linecap', 'round');\n        return svgElement;\n    }\n    /**\n     * Initializes the size based on the currently set SVG and collects elements\n     * with an ID property that may be referenced in the SVG.\n     */\n    sourceSvgChanged() {\n        const svg = this.$svg;\n        if (svg) {\n            const precision = this.roughConfig.fixedDecimalPlaceDigits;\n            this.width = parseFloat(this.coerceSize(svg, 'width', 300).toFixed(precision));\n            this.height = parseFloat(this.coerceSize(svg, 'height', 150).toFixed(precision));\n            // pre-process defs for subsequent references\n            this.collectElementsWithID();\n        }\n    }\n    /**\n     * Stores elements with IDs for later use.\n     */\n    collectElementsWithID() {\n        this.idElements = {};\n        const elementsWithID = Array.prototype.slice.apply(this.svg.querySelectorAll('*[id]'));\n        for (const elt of elementsWithID) {\n            const id = elt.getAttribute('id');\n            if (id) {\n                this.idElements[id] = elt;\n            }\n        }\n    }\n    /**\n     * Helper to handle percentage values for width / height of the input SVG.\n     */\n    coerceSize(svg, property, fallback) {\n        let size = fallback;\n        const hasViewbox = svg.hasAttribute('viewBox');\n        if (svg.hasAttribute(property)) {\n            // percentage sizes for the root SVG are unclear, thus use viewBox if available\n            if (svg[property].baseVal.unitType === SVGLength.SVG_LENGTHTYPE_PERCENTAGE && hasViewbox) {\n                size = svg.viewBox.baseVal[property];\n            }\n            else {\n                size = svg[property].baseVal.value;\n            }\n        }\n        else if (hasViewbox) {\n            size = svg.viewBox.baseVal[property];\n        }\n        return size;\n    }\n}\n","export function createPencilFilter() {\n    const filter = document.createElementNS('http://www.w3.org/2000/svg', 'filter');\n    filter.setAttribute('id', 'pencilTextureFilter');\n    filter.setAttribute('x', '0%');\n    filter.setAttribute('y', '0%');\n    filter.setAttribute('width', '100%');\n    filter.setAttribute('height', '100%');\n    filter.setAttribute('filterUnits', 'objectBoundingBox');\n    const feTurbulence = document.createElementNS('http://www.w3.org/2000/svg', 'feTurbulence');\n    feTurbulence.setAttribute('type', 'fractalNoise');\n    feTurbulence.setAttribute('baseFrequency', '2');\n    feTurbulence.setAttribute('numOctaves', '5');\n    feTurbulence.setAttribute('stitchTiles', 'stitch');\n    feTurbulence.setAttribute('result', 'f1');\n    filter.appendChild(feTurbulence);\n    const feColorMatrix = document.createElementNS('http://www.w3.org/2000/svg', 'feColorMatrix');\n    feColorMatrix.setAttribute('type', 'matrix');\n    feColorMatrix.setAttribute('values', '0 0 0 0 0, 0 0 0 0 0, 0 0 0 0 0, 0 0 0 -1.5 1.5');\n    feColorMatrix.setAttribute('result', 'f2');\n    filter.appendChild(feColorMatrix);\n    const feComposite = document.createElementNS('http://www.w3.org/2000/svg', 'feComposite');\n    feComposite.setAttribute('operator', 'in');\n    feComposite.setAttribute('in', 'SourceGraphic');\n    feComposite.setAttribute('in2', 'f2');\n    feComposite.setAttribute('result', 'f3');\n    filter.appendChild(feComposite);\n    return filter;\n}\n"],"names":["rotatePoints","points","center","degrees","length","cx","cy","angle","Math","PI","cos","sin","p","x","y","areSamePoints","p1","p2","hachureLines","polygons","hachureGap","hachureAngle","hachureStepOffset","gap","max","polygonList","rotationCenter","polygon","lines","vertexArray","vertices","push","edges","i","ymin","min","ymax","islope","sort","e1","e2","abs","activeEdges","iteration","ix","splice","forEach","edge","s","filter","ae","ae1","ae2","nexti","ce","ne","round","straightHachureLines","line","rotateLines","polygonHachureLines","o","_a","strokeWidth","skipOffset","roughness","randomizer","next","random","HachureFiller","constructor","helper","this","fillPolygons","_fillPolygons","type","ops","renderLines","doubleLineOps","lineLength","sqrt","pow","ZigZagFiller","Object","assign","zigZagAngle","zigzagLines","dgx","dgy","HatchFiller","set","o2","set2","concat","DotFiller","dotsOnLines","fweight","fillWeight","ro","dl","count","ceil","offset","minY","el","ellipse","DashedFiller","dashedLine","dashOffset","dashGap","floor","startOffset","alpha","atan","lstart","lend","start","end","ZigZagLineFiller","zo","zigzagOffset","dz","middle","fillers","Random","seed","imul","COMMAND","NUMBER","EOD","PARAMS","A","a","C","c","H","h","L","l","M","m","Q","q","S","T","t","V","v","Z","z","isType","token","parsePath","d","segments","tokens","Array","match","substr","RegExp","$1","text","parseFloat","tokenize","mode","index","paramsCount","params","Error","numbeToken","segment","key","data","absolutize","subx","suby","out","newdata","map","normalize","lastType","lcx","lcy","cx1","cy1","x1","y1","cx2","cy2","r1","r2","largeArcFlag","sweepFlag","arcToCubicCurves","curve","rotate","angleRad","x2","y2","recursive","f1","f2","r1Pow","r2Pow","left","right","k","asin","toFixed","df","f2old","x2old","y2old","c1","s1","c2","s2","tan","hx","hy","m1","m2","m3","m4","curves","r3","randOffset","_offsetOpt","randOffsetWithRange","_offset","width","height","generateEllipseParams","ellipseWithParams","opset","_doubleLine","linearPath","close","len","rectangle","inputPoints","pointsList","o1","_curveWithOffset","disableMultiStroke","cloneOptionsAlterSeed","underlay","overlay","item","op","psq","stepCount","curveStepCount","increment","rx","ry","curveFitRandomness","curveFitting","ellipseParams","ap1","cp1","_computeEllipsePoints","_curve","ap2","estimatedPoints","arc","stop","closed","roughClosure","strt","stp","ellipseInc","arcInc","_arc","svgPath","path","first","current","_bezierTo","solidFillPolygon","maxRandomnessOffset","patternFillPolygons","fillerName","fillStyle","getFiller","result","undefined","roughnessGain","filling","singleStroke","disableMultiStrokeFill","_line","move","lengthSq","halfOffset","divergePoint","midDispX","bowing","midDispY","randomHalf","randomFull","preserveVertices","ps","closePoint","b","curveTightness","cachedVertArray","overlap","corePoints","allPoints","radOffset","endAngle","ros","f","iterations","clone","curveToBezier","pointsIn","distanceSq","distanceToSegmentSq","w","l2","lerp","getPointsOnBezierCurveWithSplitting","tolerance","newPoints","outPoints","p3","p4","ux","uy","vx","vy","flatness","p0","q1","q2","q3","red","simplify","distance","simplifyPoints","epsilon","e","maxDistSq","maxNdx","distSq","pointsOnBezierCurves","numSegments","NOS","RoughGenerator","config","defaultOptions","stroke","fillShapeRoughnessGain","options","_o","static","_d","shape","sets","paths","outline","fill","ellipseResponse","circle","diameter","ret","fillOptions","patternFillArc","fillShape","_mergedShape","polyPoints","replace","hasFill","hasStroke","simplified","simplification","normalized","currentPoints","pendingCurve","appendPendingCurve","appendPendingPoints","lastPoint","simplifiedSet","pointsOnPath","opsToPath","drawing","fixedDecimals","trim","toPaths","drawable","fillSketch","input","RoughCanvas","canvas","ctx","getContext","gen","draw","getDefaultOptions","precision","fixedDecimalPlaceDigits","save","strokeStyle","lineWidth","strokeLineDash","setLineDash","strokeLineDashOffset","lineDashOffset","_drawToContext","restore","fillRule","fillLineDash","fillLineDashOffset","rule","beginPath","moveTo","bezierCurveTo","lineTo","generator","SVGNS","RoughSVG","svg","doc","ownerDocument","window","document","g","createElementNS","setAttribute","join","appendChild","OutputType","rough","newSeed","getNodeChildren","element","children","node","nodes","childNodes","nodeType","getParentElement","parentNode","Node","ELEMENT_NODE","reparentNodes","newParent","source","firstChild","append","getIdFromUrl","url","exec","exports","SKETCH_CLIP_ATTRIBUTE","PATH_CURVES_REGEX","getDefsElement","context","svgSketchDefs","parent","svgSketch","defs","childElementCount","insertBefore","firstElementChild","getPointsArray","pointsAttr","getAttribute","coordinateRegexp","indexOf","pointList","split","currentEntry","coordinates","appendSketchElement","sketchElement","sketch","sketchClipPathId","applyPencilFilter","pencilFilter","tagName","attributes","removeAttribute","sketchPath","test","rc","getEffectiveAttribute","attributeName","currentUseCtx","attr","getComputedStyle","useCtx","nextCtx","referenced","root","parentContext","sourceSvg","getEffectiveElementOpacity","currentOpacity","elementOpacity","substring","nextUseCtx","appendPatternPaint","sourceElement","patternProxyCreator","fillId","strokeId","getPatternId","id","idElements","SVGPatternElement","getPatternPaintIds","patternProxy","useElementContext","appendPatternDefsElement","patternId","sketchDefs","defId","querySelector","sourceDefElement","sketchPatterns","cloneNode","sketchPattern","roughOverwrites","proxySource","proxyContext","roughConfig","processElement","sketchFragment","defElementRoot","_typeof","obj","Symbol","iterator","prototype","trimLeft","trimRight","tinycolor","color","opts","rgb","r","ok","format","toLowerCase","named","names","matchers","rgba","hsl","hsla","hsv","hsva","hex8","parseIntFromHex","convertHexToDecimal","hex6","hex4","hex3","stringInputToObject","isValidCSSUnit","bound01","rgbToRgb","String","convertToPercentage","mod","hsvToRgb","hue2rgb","hslToRgb","hasOwnProperty","boundAlpha","inputToRGB","_originalInput","_r","_g","_b","_roundA","_format","_gradientType","gradientType","_ok","rgbToHsl","rgbToHsv","rgbToHex","allow3Char","hex","pad2","toString","charAt","rgbaToArgbHex","convertDecimalToHex","_desaturate","amount","toHsl","clamp01","_saturate","_greyscale","desaturate","_lighten","_brighten","toRgb","_darken","_spin","hue","_complement","polyad","number","isNaN","step","_splitcomplement","_analogous","results","slices","part","_monochromatic","toHsv","modification","isDark","getBrightness","isLight","isValid","getOriginalInput","getFormat","getAlpha","getLuminance","RsRGB","GsRGB","BsRGB","setAlpha","value","toHsvString","toHslString","toHex","toHexString","toHex8","allow4Char","rgbaToHex","toHex8String","toRgbString","toPercentageRgb","toPercentageRgbString","toName","hexNames","toFilter","secondColor","hex8String","secondHex8String","formatSet","formattedString","hasAlpha","_applyModification","fn","args","apply","slice","call","lighten","arguments","brighten","darken","saturate","greyscale","spin","_applyCombination","analogous","complement","monochromatic","splitcomplement","triad","tetrad","fromRatio","newColor","equals","color1","color2","mix","rgb1","rgb2","readability","isReadable","wcag2","wcag2Parms","parms","level","size","toUpperCase","validateWCAG2Parms","mostReadable","baseColor","colorList","includeFallbackColors","bestColor","bestScore","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","burntsienna","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","flipped","flip","n","isOnePointZero","processPercent","isPercentage","parseInt","val","CSS_UNIT","PERMISSIVE_MATCH3","PERMISSIVE_MATCH4","DIMENSION_REGEX","ABSOLUTE_UNITS","in","cm","mm","pt","pc","DPI","px","SQRT2","convertToPixelUnit","dimensionValue","attribute","unit","parseDimension","isAbsoluteUnit","conversion","absToPixel","coordinateSystemSize","viewBox","percentage","fraction","percentageToPixel","refWidth","innerWidth","refHeight","innerHeight","viewportLengthToPixel","rootElement","documentElement","fontSizeDimension","fontSize","zeroCharWidth","measureContainer","style","visibility","createTextNode","bbox","getBBox","removeChild","measureZeroCharacter","effectiveFontSize","fontSizePx","fontRelativeToPixel","relToPixel","dimension","isIdentityTransform","svgTransform","matrix","isTranslationTransform","applyMatrix","point","getSvgTransform","transform","baseVal","numberOfItems","consolidate","getCombinedTransform","elementTransform","elementTransformMatrix","combinedMatrix","multiply","createSVGTransformFromMatrix","applyTransform","getItem","setMatrix","appendItem","getStopColor","stopColorStr","averageColor","colorArray","getStopOffset","createPen","weight","getBoundingClientRect","aspectRatio","sideLength","legacyConfig","normal","horizontal","vertical","small","defaultConfig","getPenConfiguration","getHachureAngle","getHachureGap","getFillWeight","rng","isFinite","parseStyleConfig","scaleFactor","det","fillOpacity","getOpacity","gradientColor","convertGradient","strokeOpacity","scaledWidth","strokeDashArray","entry","dash","scaledLineDash","strokeDashOffset","scaledOffset","randomize","opacity","paint","SVGLinearGradientElement","SVGRadialGradientElement","gradient","stops","querySelectorAll","resolution","discreteColors","lastColor","currentColor","currentOffset","combinedColor","entries","mixedColor","gradientToColor","str","setPrototypeOf","__proto__","TypeError","create","isArray","_","CLOSE_PATH","HORIZ_LINE_TO","relative","VERT_LINE_TO","MOVE_TO","LINE_TO","CURVE_TO","SMOOTH_CURVE_TO","QUAD_TO","SMOOTH_QUAD_TO","ARC","rX","rY","xRot","lArcFlag","u","O","cX","cY","phi1","atan2","phi2","NaN","N","E","R","I","ROUND","TO_ABS","TO_REL","NORMALIZE_HVZ","NORMALIZE_ST","QT_TO_C","INFO","SANITIZE","LINE_COMMANDS","MATRIX","ROTATE","TRANSLATE","SCALE","SKEW_X","SKEW_Y","X_AXIS_SYMMETRY","Y_AXIS_SYMMETRY","A_TO_C","ANNOTATE_ARCS","CLONE","CALCULATE_BOUNDS","maxX","minX","maxY","DRAWING_COMMANDS","U","toAbs","toRel","normalizeHVZ","normalizeST","qtToC","aToC","sanitize","translate","scale","skewX","skewY","xSymmetry","ySymmetry","annotateArcs","charCodeAt","curNumber","curCommandType","curCommandRelative","canParseCommandOrComma","curNumberHasExp","curNumberHasExpDigits","curNumberHasDecimal","curArgs","finish","parse","SyntaxError","Number","getPrototypeOf","commands","encode","getBounds","drawMarkers","startPt","endPt","markerStartId","markerStartElement","orientAngle","nextPt","orientAttr","reverse","prevPt","isClosedPath","getBisectingAngle","getAngle","createSVGMatrix","getScaleFactor","markerTransform","markerEndId","markerEndElement","markerMidId","markerMidElement","loc","marker","referrer","markerUnits","crossingPt","vIn","vectorAngle","refPoint","refAngle","sign","v1","v2","a1","K","applyPatternPaint","rect","proxy","applyClipPath","owner","clipPathAttr","clipPath","targetDefs","clipContainer","stack","pop","storeSketchClipId","childElement","childTransform","applyElementClip","console","error","container","hasAttribute","clip","applyRectClip","applyCircleClip","applyEllipseClip","applyPolygonClip","applyPathClip","drawText","textClone","clear","cssFont","asStyleString","effectiveAttributes","fontStyle","fontWeight","fontFamily","fontFamiliy","getCssFont","concatStyleStrings","copyTextStyleAttributes","origChildren","child","SVGTSpanElement","useCustomFontFamily","hasClipPath","original","fitFontSizeCore","fitFontSize","originalSize","cloneWidth","svgSketchIsInDOM","hiddenElementStyle","origStyle","body","previousParent","parentElement","measureText","newFontSize","srcElement","tgtElement","dominantBaseline","textAnchor","processRoot","currentViewBox","SVGSVGElement","SVGSymbolElement","SVGMarkerElement","rootX","rootY","mw","mh","rootTransform","viewBoxX","viewBoxY","viewBoxWidth","viewBoxHeight","sx","sy","centerviewportX","centerviewportY","centerViewBoxX","centerViewBoxY","scaleNonUniform","refX","refY","drawElement","newTransform","display","isHidden","drawRoot","transformedWidth","transformedHeight","transformedBounds","factor","p3c1","p3c2","p5c1","p5c2","p5","p7c1","p7c2","p7","p9c1","p9c2","sketchRect","drawRect","dataAttrs","pathData","SVGPathData","SVGPathDataTransformer","transformedPathData","cmd","encodedPathData","encodeSVGPath","pathSketch","currentSubPathBegin","drawPath","use","href","startsWith","defElement","useWidth","useHeight","newContext","drawUse","tp1x","tp1y","tp2x","tp2y","lineSketch","drawLine","transformedRadius","c4","c6","c8","drawCircle","radiusPoint","transformedRx","transformedRy","drawEllipse","polyline","transformed","drawPolyline","polygonSketch","drawPolygon","svgImage","meta","svgString","isBase64","isUtf8","atob","decodeURIComponent","DOMParser","parseFromString","imageClone","drawImage","foreignObject","foreignObjectClone","copyStyleProperties","prop","setProperty","getPropertyValue","drawForeignObject","RandomNumberGenerator","range","rnd","$svg","sourceSvgChanged","outputType","$outputType","CANVAS","outputElement","SVG","HTMLCanvasElement","$roughConfig","target","backgroundColor","lastResult","targetElement","Promise","resolve","sketchContainer","prepareRenderContainer","renderContext","createRenderContext","feTurbulence","feColorMatrix","feComposite","createPencilFilter","drawToCanvas","createElement","contains","styleSheets","from","sheet","canvasCtx","clearRect","XMLSerializer","serializeToString","img","Image","onload","src","encodeURIComponent","svgElement","backgroundElement","setAttributeNS","coerceSize","collectElementsWithID","elementsWithID","elt","property","fallback","hasViewbox","unitType","SVGLength","SVG_LENGTHTYPE_PERCENTAGE"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,28,35]}